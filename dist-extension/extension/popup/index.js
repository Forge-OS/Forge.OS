(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Rf={exports:{}},Ms={},bf={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ui=Symbol.for("react.element"),vg=Symbol.for("react.portal"),xg=Symbol.for("react.fragment"),wg=Symbol.for("react.strict_mode"),Eg=Symbol.for("react.profiler"),Ag=Symbol.for("react.provider"),kg=Symbol.for("react.context"),Tg=Symbol.for("react.forward_ref"),Ig=Symbol.for("react.suspense"),Cg=Symbol.for("react.memo"),_g=Symbol.for("react.lazy"),jc=Symbol.iterator;function Ng(e){return e===null||typeof e!="object"?null:(e=jc&&e[jc]||e["@@iterator"],typeof e=="function"?e:null)}var jf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Of=Object.assign,Lf={};function io(e,t,n){this.props=e,this.context=t,this.refs=Lf,this.updater=n||jf}io.prototype.isReactComponent={};io.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};io.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Df(){}Df.prototype=io.prototype;function uu(e,t,n){this.props=e,this.context=t,this.refs=Lf,this.updater=n||jf}var cu=uu.prototype=new Df;cu.constructor=uu;Of(cu,io.prototype);cu.isPureReactComponent=!0;var Oc=Array.isArray,Mf=Object.prototype.hasOwnProperty,du={current:null},zf={key:!0,ref:!0,__self:!0,__source:!0};function Bf(e,t,n){var r,o={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)Mf.call(t,r)&&!zf.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(u===1)o.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];o.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)o[r]===void 0&&(o[r]=u[r]);return{$$typeof:ui,type:e,key:i,ref:s,props:o,_owner:du.current}}function Pg(e,t){return{$$typeof:ui,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fu(e){return typeof e=="object"&&e!==null&&e.$$typeof===ui}function Rg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Lc=/\/+/g;function al(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Rg(""+e.key):t.toString(36)}function Wi(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case ui:case vg:s=!0}}if(s)return s=e,o=o(s),e=r===""?"."+al(s,0):r,Oc(o)?(n="",e!=null&&(n=e.replace(Lc,"$&/")+"/"),Wi(o,t,n,"",function(d){return d})):o!=null&&(fu(o)&&(o=Pg(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(Lc,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=r===""?".":r+":",Oc(e))for(var u=0;u<e.length;u++){i=e[u];var c=r+al(i,u);s+=Wi(i,t,n,c,o)}else if(c=Ng(e),typeof c=="function")for(e=c.call(e),u=0;!(i=e.next()).done;)i=i.value,c=r+al(i,u++),s+=Wi(i,t,n,c,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function xi(e,t,n){if(e==null)return e;var r=[],o=0;return Wi(e,r,"","",function(i){return t.call(n,i,o++)}),r}function bg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lt={current:null},Vi={transition:null},jg={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:Vi,ReactCurrentOwner:du};function Uf(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:xi,forEach:function(e,t,n){xi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return xi(e,function(){t++}),t},toArray:function(e){return xi(e,function(t){return t})||[]},only:function(e){if(!fu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Y.Component=io;Y.Fragment=xg;Y.Profiler=Eg;Y.PureComponent=uu;Y.StrictMode=wg;Y.Suspense=Ig;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jg;Y.act=Uf;Y.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Of({},e.props),o=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=du.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)Mf.call(t,c)&&!zf.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&u!==void 0?u[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:ui,type:e.type,key:o,ref:i,props:r,_owner:s}};Y.createContext=function(e){return e={$$typeof:kg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ag,_context:e},e.Consumer=e};Y.createElement=Bf;Y.createFactory=function(e){var t=Bf.bind(null,e);return t.type=e,t};Y.createRef=function(){return{current:null}};Y.forwardRef=function(e){return{$$typeof:Tg,render:e}};Y.isValidElement=fu;Y.lazy=function(e){return{$$typeof:_g,_payload:{_status:-1,_result:e},_init:bg}};Y.memo=function(e,t){return{$$typeof:Cg,type:e,compare:t===void 0?null:t}};Y.startTransition=function(e){var t=Vi.transition;Vi.transition={};try{e()}finally{Vi.transition=t}};Y.unstable_act=Uf;Y.useCallback=function(e,t){return lt.current.useCallback(e,t)};Y.useContext=function(e){return lt.current.useContext(e)};Y.useDebugValue=function(){};Y.useDeferredValue=function(e){return lt.current.useDeferredValue(e)};Y.useEffect=function(e,t){return lt.current.useEffect(e,t)};Y.useId=function(){return lt.current.useId()};Y.useImperativeHandle=function(e,t,n){return lt.current.useImperativeHandle(e,t,n)};Y.useInsertionEffect=function(e,t){return lt.current.useInsertionEffect(e,t)};Y.useLayoutEffect=function(e,t){return lt.current.useLayoutEffect(e,t)};Y.useMemo=function(e,t){return lt.current.useMemo(e,t)};Y.useReducer=function(e,t,n){return lt.current.useReducer(e,t,n)};Y.useRef=function(e){return lt.current.useRef(e)};Y.useState=function(e){return lt.current.useState(e)};Y.useSyncExternalStore=function(e,t,n){return lt.current.useSyncExternalStore(e,t,n)};Y.useTransition=function(){return lt.current.useTransition()};Y.version="18.3.1";bf.exports=Y;var A=bf.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og=A,Lg=Symbol.for("react.element"),Dg=Symbol.for("react.fragment"),Mg=Object.prototype.hasOwnProperty,zg=Og.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bg={key:!0,ref:!0,__self:!0,__source:!0};function Ff(e,t,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Mg.call(t,r)&&!Bg.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Lg,type:e,key:i,ref:s,props:o,_owner:zg.current}}Ms.Fragment=Dg;Ms.jsx=Ff;Ms.jsxs=Ff;Rf.exports=Ms;var l=Rf.exports,$f={exports:{}},It={},Kf={exports:{}},Wf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,z){var U=O.length;O.push(z);e:for(;0<U;){var F=U-1>>>1,Q=O[F];if(0<o(Q,z))O[F]=z,O[U]=Q,U=F;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var z=O[0],U=O.pop();if(U!==z){O[0]=U;e:for(var F=0,Q=O.length,pe=Q>>>1;F<pe;){var de=2*(F+1)-1,X=O[de],ae=de+1,B=O[ae];if(0>o(X,U))ae<Q&&0>o(B,X)?(O[F]=B,O[ae]=U,F=ae):(O[F]=X,O[de]=U,F=de);else if(ae<Q&&0>o(B,U))O[F]=B,O[ae]=U,F=ae;else break e}}return z}function o(O,z){var U=O.sortIndex-z.sortIndex;return U!==0?U:O.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var c=[],d=[],m=1,g=null,h=3,S=!1,w=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(O){for(var z=n(d);z!==null;){if(z.callback===null)r(d);else if(z.startTime<=O)r(d),z.sortIndex=z.expirationTime,t(c,z);else break;z=n(d)}}function v(O){if(x=!1,y(O),!w)if(n(c)!==null)w=!0,J(T);else{var z=n(d);z!==null&&te(v,z.startTime-O)}}function T(O,z){w=!1,x&&(x=!1,f(P),P=-1),S=!0;var U=h;try{for(y(z),g=n(c);g!==null&&(!(g.expirationTime>z)||O&&!ee());){var F=g.callback;if(typeof F=="function"){g.callback=null,h=g.priorityLevel;var Q=F(g.expirationTime<=z);z=e.unstable_now(),typeof Q=="function"?g.callback=Q:g===n(c)&&r(c),y(z)}else r(c);g=n(c)}if(g!==null)var pe=!0;else{var de=n(d);de!==null&&te(v,de.startTime-z),pe=!1}return pe}finally{g=null,h=U,S=!1}}var k=!1,C=null,P=-1,W=5,b=-1;function ee(){return!(e.unstable_now()-b<W)}function ie(){if(C!==null){var O=e.unstable_now();b=O;var z=!0;try{z=C(!0,O)}finally{z?q():(k=!1,C=null)}}else k=!1}var q;if(typeof p=="function")q=function(){p(ie)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,ce=Re.port2;Re.port1.onmessage=ie,q=function(){ce.postMessage(null)}}else q=function(){E(ie,0)};function J(O){C=O,k||(k=!0,q())}function te(O,z){P=E(function(){O(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){w||S||(w=!0,J(T))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(O){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var U=h;h=z;try{return O()}finally{h=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,z){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var U=h;h=O;try{return z()}finally{h=U}},e.unstable_scheduleCallback=function(O,z,U){var F=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?F+U:F):U=F,O){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=U+Q,O={id:m++,callback:z,priorityLevel:O,startTime:U,expirationTime:Q,sortIndex:-1},U>F?(O.sortIndex=U,t(d,O),n(c)===null&&O===n(d)&&(x?(f(P),P=-1):x=!0,te(v,U-F))):(O.sortIndex=Q,t(c,O),w||S||(w=!0,J(T))),O},e.unstable_shouldYield=ee,e.unstable_wrapCallback=function(O){var z=h;return function(){var U=h;h=z;try{return O.apply(this,arguments)}finally{h=U}}}})(Wf);Kf.exports=Wf;var Ug=Kf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg=A,Tt=Ug;function N(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vf=new Set,Uo={};function yr(e,t){Hr(e,t),Hr(e+"Capture",t)}function Hr(e,t){for(Uo[e]=t,e=0;e<t.length;e++)Vf.add(t[e])}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ql=Object.prototype.hasOwnProperty,$g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dc={},Mc={};function Kg(e){return ql.call(Mc,e)?!0:ql.call(Dc,e)?!1:$g.test(e)?Mc[e]=!0:(Dc[e]=!0,!1)}function Wg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Vg(e,t,n,r){if(t===null||typeof t>"u"||Wg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function at(e,t,n,r,o,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qe[e]=new at(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qe[t]=new at(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qe[e]=new at(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qe[e]=new at(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qe[e]=new at(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qe[e]=new at(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qe[e]=new at(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qe[e]=new at(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qe[e]=new at(e,5,!1,e.toLowerCase(),null,!1,!1)});var pu=/[\-:]([a-z])/g;function mu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(pu,mu);Qe[t]=new at(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(pu,mu);Qe[t]=new at(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(pu,mu);Qe[t]=new at(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qe[e]=new at(e,1,!1,e.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qe[e]=new at(e,1,!1,e.toLowerCase(),null,!0,!0)});function hu(e,t,n,r){var o=Qe.hasOwnProperty(t)?Qe[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Vg(t,n,o,r)&&(n=null),r||o===null?Kg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var An=Fg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wi=Symbol.for("react.element"),Tr=Symbol.for("react.portal"),Ir=Symbol.for("react.fragment"),gu=Symbol.for("react.strict_mode"),ea=Symbol.for("react.profiler"),Hf=Symbol.for("react.provider"),Gf=Symbol.for("react.context"),yu=Symbol.for("react.forward_ref"),ta=Symbol.for("react.suspense"),na=Symbol.for("react.suspense_list"),Su=Symbol.for("react.memo"),Tn=Symbol.for("react.lazy"),Qf=Symbol.for("react.offscreen"),zc=Symbol.iterator;function co(e){return e===null||typeof e!="object"?null:(e=zc&&e[zc]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,ul;function wo(e){if(ul===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ul=t&&t[1]||""}return`
`+ul+e}var cl=!1;function dl(e,t){if(!e||cl)return"";cl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,u=i.length-1;1<=s&&0<=u&&o[s]!==i[u];)u--;for(;1<=s&&0<=u;s--,u--)if(o[s]!==i[u]){if(s!==1||u!==1)do if(s--,u--,0>u||o[s]!==i[u]){var c=`
`+o[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=u);break}}}finally{cl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?wo(e):""}function Hg(e){switch(e.tag){case 5:return wo(e.type);case 16:return wo("Lazy");case 13:return wo("Suspense");case 19:return wo("SuspenseList");case 0:case 2:case 15:return e=dl(e.type,!1),e;case 11:return e=dl(e.type.render,!1),e;case 1:return e=dl(e.type,!0),e;default:return""}}function ra(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ir:return"Fragment";case Tr:return"Portal";case ea:return"Profiler";case gu:return"StrictMode";case ta:return"Suspense";case na:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Gf:return(e.displayName||"Context")+".Consumer";case Hf:return(e._context.displayName||"Context")+".Provider";case yu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Su:return t=e.displayName||null,t!==null?t:ra(e.type)||"Memo";case Tn:t=e._payload,e=e._init;try{return ra(e(t))}catch{}}return null}function Gg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ra(t);case 8:return t===gu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Kn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qg(e){var t=Xf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ei(e){e._valueTracker||(e._valueTracker=Qg(e))}function Yf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Xf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function os(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function oa(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Bc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Kn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Jf(e,t){t=t.checked,t!=null&&hu(e,"checked",t,!1)}function ia(e,t){Jf(e,t);var n=Kn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?sa(e,t.type,n):t.hasOwnProperty("defaultValue")&&sa(e,t.type,Kn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Uc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function sa(e,t,n){(t!=="number"||os(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Eo=Array.isArray;function Br(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Kn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function la(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(N(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Fc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(N(92));if(Eo(n)){if(1<n.length)throw Error(N(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Kn(n)}}function Zf(e,t){var n=Kn(t.value),r=Kn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function $c(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function qf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function aa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?qf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ai,ep=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ai=Ai||document.createElement("div"),Ai.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ai.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var To={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xg=["Webkit","ms","Moz","O"];Object.keys(To).forEach(function(e){Xg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),To[t]=To[e]})});function tp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||To.hasOwnProperty(e)&&To[e]?(""+t).trim():t+"px"}function np(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=tp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Yg=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ua(e,t){if(t){if(Yg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(N(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(N(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(N(61))}if(t.style!=null&&typeof t.style!="object")throw Error(N(62))}}function ca(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var da=null;function vu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fa=null,Ur=null,Fr=null;function Kc(e){if(e=fi(e)){if(typeof fa!="function")throw Error(N(280));var t=e.stateNode;t&&(t=$s(t),fa(e.stateNode,e.type,t))}}function rp(e){Ur?Fr?Fr.push(e):Fr=[e]:Ur=e}function op(){if(Ur){var e=Ur,t=Fr;if(Fr=Ur=null,Kc(e),t)for(e=0;e<t.length;e++)Kc(t[e])}}function ip(e,t){return e(t)}function sp(){}var fl=!1;function lp(e,t,n){if(fl)return e(t,n);fl=!0;try{return ip(e,t,n)}finally{fl=!1,(Ur!==null||Fr!==null)&&(sp(),op())}}function $o(e,t){var n=e.stateNode;if(n===null)return null;var r=$s(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(N(231,t,typeof n));return n}var pa=!1;if(vn)try{var fo={};Object.defineProperty(fo,"passive",{get:function(){pa=!0}}),window.addEventListener("test",fo,fo),window.removeEventListener("test",fo,fo)}catch{pa=!1}function Jg(e,t,n,r,o,i,s,u,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(m){this.onError(m)}}var Io=!1,is=null,ss=!1,ma=null,Zg={onError:function(e){Io=!0,is=e}};function qg(e,t,n,r,o,i,s,u,c){Io=!1,is=null,Jg.apply(Zg,arguments)}function e0(e,t,n,r,o,i,s,u,c){if(qg.apply(this,arguments),Io){if(Io){var d=is;Io=!1,is=null}else throw Error(N(198));ss||(ss=!0,ma=d)}}function Sr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ap(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Wc(e){if(Sr(e)!==e)throw Error(N(188))}function t0(e){var t=e.alternate;if(!t){if(t=Sr(e),t===null)throw Error(N(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Wc(o),e;if(i===r)return Wc(o),t;i=i.sibling}throw Error(N(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s)throw Error(N(189))}}if(n.alternate!==r)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?e:t}function up(e){return e=t0(e),e!==null?cp(e):null}function cp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cp(e);if(t!==null)return t;e=e.sibling}return null}var dp=Tt.unstable_scheduleCallback,Vc=Tt.unstable_cancelCallback,n0=Tt.unstable_shouldYield,r0=Tt.unstable_requestPaint,Oe=Tt.unstable_now,o0=Tt.unstable_getCurrentPriorityLevel,xu=Tt.unstable_ImmediatePriority,fp=Tt.unstable_UserBlockingPriority,ls=Tt.unstable_NormalPriority,i0=Tt.unstable_LowPriority,pp=Tt.unstable_IdlePriority,zs=null,ln=null;function s0(e){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(zs,e,void 0,(e.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:u0,l0=Math.log,a0=Math.LN2;function u0(e){return e>>>=0,e===0?32:31-(l0(e)/a0|0)|0}var ki=64,Ti=4194304;function Ao(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function as(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var u=s&~o;u!==0?r=Ao(u):(i&=s,i!==0&&(r=Ao(i)))}else s=n&~o,s!==0?r=Ao(s):i!==0&&(r=Ao(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Xt(t),o=1<<n,r|=e[n],t&=~o;return r}function c0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-Xt(i),u=1<<s,c=o[s];c===-1?(!(u&n)||u&r)&&(o[s]=c0(u,t)):c<=t&&(e.expiredLanes|=u),i&=~u}}function ha(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mp(){var e=ki;return ki<<=1,!(ki&4194240)&&(ki=64),e}function pl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ci(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xt(t),e[t]=n}function f0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Xt(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function wu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Xt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var ue=0;function hp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gp,Eu,yp,Sp,vp,ga=!1,Ii=[],Ln=null,Dn=null,Mn=null,Ko=new Map,Wo=new Map,Cn=[],p0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hc(e,t){switch(e){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":Ko.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(t.pointerId)}}function po(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=fi(t),t!==null&&Eu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function m0(e,t,n,r,o){switch(t){case"focusin":return Ln=po(Ln,e,t,n,r,o),!0;case"dragenter":return Dn=po(Dn,e,t,n,r,o),!0;case"mouseover":return Mn=po(Mn,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Ko.set(i,po(Ko.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Wo.set(i,po(Wo.get(i)||null,e,t,n,r,o)),!0}return!1}function xp(e){var t=rr(e.target);if(t!==null){var n=Sr(t);if(n!==null){if(t=n.tag,t===13){if(t=ap(n),t!==null){e.blockedOn=t,vp(e.priority,function(){yp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ya(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);da=r,n.target.dispatchEvent(r),da=null}else return t=fi(n),t!==null&&Eu(t),e.blockedOn=n,!1;t.shift()}return!0}function Gc(e,t,n){Hi(e)&&n.delete(t)}function h0(){ga=!1,Ln!==null&&Hi(Ln)&&(Ln=null),Dn!==null&&Hi(Dn)&&(Dn=null),Mn!==null&&Hi(Mn)&&(Mn=null),Ko.forEach(Gc),Wo.forEach(Gc)}function mo(e,t){e.blockedOn===t&&(e.blockedOn=null,ga||(ga=!0,Tt.unstable_scheduleCallback(Tt.unstable_NormalPriority,h0)))}function Vo(e){function t(o){return mo(o,e)}if(0<Ii.length){mo(Ii[0],e);for(var n=1;n<Ii.length;n++){var r=Ii[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ln!==null&&mo(Ln,e),Dn!==null&&mo(Dn,e),Mn!==null&&mo(Mn,e),Ko.forEach(t),Wo.forEach(t),n=0;n<Cn.length;n++)r=Cn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Cn.length&&(n=Cn[0],n.blockedOn===null);)xp(n),n.blockedOn===null&&Cn.shift()}var $r=An.ReactCurrentBatchConfig,us=!0;function g0(e,t,n,r){var o=ue,i=$r.transition;$r.transition=null;try{ue=1,Au(e,t,n,r)}finally{ue=o,$r.transition=i}}function y0(e,t,n,r){var o=ue,i=$r.transition;$r.transition=null;try{ue=4,Au(e,t,n,r)}finally{ue=o,$r.transition=i}}function Au(e,t,n,r){if(us){var o=ya(e,t,n,r);if(o===null)Al(e,t,r,cs,n),Hc(e,r);else if(m0(o,e,t,n,r))r.stopPropagation();else if(Hc(e,r),t&4&&-1<p0.indexOf(e)){for(;o!==null;){var i=fi(o);if(i!==null&&gp(i),i=ya(e,t,n,r),i===null&&Al(e,t,r,cs,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Al(e,t,r,null,n)}}var cs=null;function ya(e,t,n,r){if(cs=null,e=vu(r),e=rr(e),e!==null)if(t=Sr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ap(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return cs=e,null}function wp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o0()){case xu:return 1;case fp:return 4;case ls:case i0:return 16;case pp:return 536870912;default:return 16}default:return 16}}var Pn=null,ku=null,Gi=null;function Ep(){if(Gi)return Gi;var e,t=ku,n=t.length,r,o="value"in Pn?Pn.value:Pn.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===o[i-r];r++);return Gi=o.slice(e,1<r?1-r:void 0)}function Qi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ci(){return!0}function Qc(){return!1}function Ct(e){function t(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ci:Qc,this.isPropagationStopped=Qc,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ci)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ci)},persist:function(){},isPersistent:Ci}),t}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tu=Ct(so),di=_e({},so,{view:0,detail:0}),S0=Ct(di),ml,hl,ho,Bs=_e({},di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Iu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ho&&(ho&&e.type==="mousemove"?(ml=e.screenX-ho.screenX,hl=e.screenY-ho.screenY):hl=ml=0,ho=e),ml)},movementY:function(e){return"movementY"in e?e.movementY:hl}}),Xc=Ct(Bs),v0=_e({},Bs,{dataTransfer:0}),x0=Ct(v0),w0=_e({},di,{relatedTarget:0}),gl=Ct(w0),E0=_e({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),A0=Ct(E0),k0=_e({},so,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),T0=Ct(k0),I0=_e({},so,{data:0}),Yc=Ct(I0),C0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=N0[e])?!!t[e]:!1}function Iu(){return P0}var R0=_e({},di,{key:function(e){if(e.key){var t=C0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Iu,charCode:function(e){return e.type==="keypress"?Qi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),b0=Ct(R0),j0=_e({},Bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jc=Ct(j0),O0=_e({},di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Iu}),L0=Ct(O0),D0=_e({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),M0=Ct(D0),z0=_e({},Bs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),B0=Ct(z0),U0=[9,13,27,32],Cu=vn&&"CompositionEvent"in window,Co=null;vn&&"documentMode"in document&&(Co=document.documentMode);var F0=vn&&"TextEvent"in window&&!Co,Ap=vn&&(!Cu||Co&&8<Co&&11>=Co),Zc=" ",qc=!1;function kp(e,t){switch(e){case"keyup":return U0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cr=!1;function $0(e,t){switch(e){case"compositionend":return Tp(t);case"keypress":return t.which!==32?null:(qc=!0,Zc);case"textInput":return e=t.data,e===Zc&&qc?null:e;default:return null}}function K0(e,t){if(Cr)return e==="compositionend"||!Cu&&kp(e,t)?(e=Ep(),Gi=ku=Pn=null,Cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ap&&t.locale!=="ko"?null:t.data;default:return null}}var W0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ed(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!W0[e.type]:t==="textarea"}function Ip(e,t,n,r){rp(r),t=ds(t,"onChange"),0<t.length&&(n=new Tu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var _o=null,Ho=null;function V0(e){Mp(e,0)}function Us(e){var t=Pr(e);if(Yf(t))return e}function H0(e,t){if(e==="change")return t}var Cp=!1;if(vn){var yl;if(vn){var Sl="oninput"in document;if(!Sl){var td=document.createElement("div");td.setAttribute("oninput","return;"),Sl=typeof td.oninput=="function"}yl=Sl}else yl=!1;Cp=yl&&(!document.documentMode||9<document.documentMode)}function nd(){_o&&(_o.detachEvent("onpropertychange",_p),Ho=_o=null)}function _p(e){if(e.propertyName==="value"&&Us(Ho)){var t=[];Ip(t,Ho,e,vu(e)),lp(V0,t)}}function G0(e,t,n){e==="focusin"?(nd(),_o=t,Ho=n,_o.attachEvent("onpropertychange",_p)):e==="focusout"&&nd()}function Q0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Us(Ho)}function X0(e,t){if(e==="click")return Us(t)}function Y0(e,t){if(e==="input"||e==="change")return Us(t)}function J0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Jt=typeof Object.is=="function"?Object.is:J0;function Go(e,t){if(Jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ql.call(t,o)||!Jt(e[o],t[o]))return!1}return!0}function rd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function od(e,t){var n=rd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rd(n)}}function Np(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Np(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pp(){for(var e=window,t=os();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=os(e.document)}return t}function _u(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Z0(e){var t=Pp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Np(n.ownerDocument.documentElement,n)){if(r!==null&&_u(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=od(n,i);var s=od(n,r);o&&s&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var q0=vn&&"documentMode"in document&&11>=document.documentMode,_r=null,Sa=null,No=null,va=!1;function id(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;va||_r==null||_r!==os(r)||(r=_r,"selectionStart"in r&&_u(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),No&&Go(No,r)||(No=r,r=ds(Sa,"onSelect"),0<r.length&&(t=new Tu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=_r)))}function _i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},vl={},Rp={};vn&&(Rp=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);function Fs(e){if(vl[e])return vl[e];if(!Nr[e])return e;var t=Nr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Rp)return vl[e]=t[n];return e}var bp=Fs("animationend"),jp=Fs("animationiteration"),Op=Fs("animationstart"),Lp=Fs("transitionend"),Dp=new Map,sd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hn(e,t){Dp.set(e,t),yr(t,[e])}for(var xl=0;xl<sd.length;xl++){var wl=sd[xl],ey=wl.toLowerCase(),ty=wl[0].toUpperCase()+wl.slice(1);Hn(ey,"on"+ty)}Hn(bp,"onAnimationEnd");Hn(jp,"onAnimationIteration");Hn(Op,"onAnimationStart");Hn("dblclick","onDoubleClick");Hn("focusin","onFocus");Hn("focusout","onBlur");Hn(Lp,"onTransitionEnd");Hr("onMouseEnter",["mouseout","mouseover"]);Hr("onMouseLeave",["mouseout","mouseover"]);Hr("onPointerEnter",["pointerout","pointerover"]);Hr("onPointerLeave",["pointerout","pointerover"]);yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ny=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function ld(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,e0(r,t,void 0,e),e.currentTarget=null}function Mp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var u=r[s],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&o.isPropagationStopped())break e;ld(o,u,d),i=c}else for(s=0;s<r.length;s++){if(u=r[s],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&o.isPropagationStopped())break e;ld(o,u,d),i=c}}}if(ss)throw e=ma,ss=!1,ma=null,e}function ve(e,t){var n=t[ka];n===void 0&&(n=t[ka]=new Set);var r=e+"__bubble";n.has(r)||(zp(t,e,2,!1),n.add(r))}function El(e,t,n){var r=0;t&&(r|=4),zp(n,e,r,t)}var Ni="_reactListening"+Math.random().toString(36).slice(2);function Qo(e){if(!e[Ni]){e[Ni]=!0,Vf.forEach(function(n){n!=="selectionchange"&&(ny.has(n)||El(n,!1,e),El(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ni]||(t[Ni]=!0,El("selectionchange",!1,t))}}function zp(e,t,n,r){switch(wp(t)){case 1:var o=g0;break;case 4:o=y0;break;default:o=Au}n=o.bind(null,t,n,e),o=void 0,!pa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Al(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var u=r.stateNode.containerInfo;if(u===o||u.nodeType===8&&u.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;s=s.return}for(;u!==null;){if(s=rr(u),s===null)return;if(c=s.tag,c===5||c===6){r=i=s;continue e}u=u.parentNode}}r=r.return}lp(function(){var d=i,m=vu(n),g=[];e:{var h=Dp.get(e);if(h!==void 0){var S=Tu,w=e;switch(e){case"keypress":if(Qi(n)===0)break e;case"keydown":case"keyup":S=b0;break;case"focusin":w="focus",S=gl;break;case"focusout":w="blur",S=gl;break;case"beforeblur":case"afterblur":S=gl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=x0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=L0;break;case bp:case jp:case Op:S=A0;break;case Lp:S=M0;break;case"scroll":S=S0;break;case"wheel":S=B0;break;case"copy":case"cut":case"paste":S=T0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Jc}var x=(t&4)!==0,E=!x&&e==="scroll",f=x?h!==null?h+"Capture":null:h;x=[];for(var p=d,y;p!==null;){y=p;var v=y.stateNode;if(y.tag===5&&v!==null&&(y=v,f!==null&&(v=$o(p,f),v!=null&&x.push(Xo(p,v,y)))),E)break;p=p.return}0<x.length&&(h=new S(h,w,null,n,m),g.push({event:h,listeners:x}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",h&&n!==da&&(w=n.relatedTarget||n.fromElement)&&(rr(w)||w[xn]))break e;if((S||h)&&(h=m.window===m?m:(h=m.ownerDocument)?h.defaultView||h.parentWindow:window,S?(w=n.relatedTarget||n.toElement,S=d,w=w?rr(w):null,w!==null&&(E=Sr(w),w!==E||w.tag!==5&&w.tag!==6)&&(w=null)):(S=null,w=d),S!==w)){if(x=Xc,v="onMouseLeave",f="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(x=Jc,v="onPointerLeave",f="onPointerEnter",p="pointer"),E=S==null?h:Pr(S),y=w==null?h:Pr(w),h=new x(v,p+"leave",S,n,m),h.target=E,h.relatedTarget=y,v=null,rr(m)===d&&(x=new x(f,p+"enter",w,n,m),x.target=y,x.relatedTarget=E,v=x),E=v,S&&w)t:{for(x=S,f=w,p=0,y=x;y;y=wr(y))p++;for(y=0,v=f;v;v=wr(v))y++;for(;0<p-y;)x=wr(x),p--;for(;0<y-p;)f=wr(f),y--;for(;p--;){if(x===f||f!==null&&x===f.alternate)break t;x=wr(x),f=wr(f)}x=null}else x=null;S!==null&&ad(g,h,S,x,!1),w!==null&&E!==null&&ad(g,E,w,x,!0)}}e:{if(h=d?Pr(d):window,S=h.nodeName&&h.nodeName.toLowerCase(),S==="select"||S==="input"&&h.type==="file")var T=H0;else if(ed(h))if(Cp)T=Y0;else{T=Q0;var k=G0}else(S=h.nodeName)&&S.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=X0);if(T&&(T=T(e,d))){Ip(g,T,n,m);break e}k&&k(e,h,d),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&sa(h,"number",h.value)}switch(k=d?Pr(d):window,e){case"focusin":(ed(k)||k.contentEditable==="true")&&(_r=k,Sa=d,No=null);break;case"focusout":No=Sa=_r=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,id(g,n,m);break;case"selectionchange":if(q0)break;case"keydown":case"keyup":id(g,n,m)}var C;if(Cu)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Cr?kp(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(Ap&&n.locale!=="ko"&&(Cr||P!=="onCompositionStart"?P==="onCompositionEnd"&&Cr&&(C=Ep()):(Pn=m,ku="value"in Pn?Pn.value:Pn.textContent,Cr=!0)),k=ds(d,P),0<k.length&&(P=new Yc(P,e,null,n,m),g.push({event:P,listeners:k}),C?P.data=C:(C=Tp(n),C!==null&&(P.data=C)))),(C=F0?$0(e,n):K0(e,n))&&(d=ds(d,"onBeforeInput"),0<d.length&&(m=new Yc("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:d}),m.data=C))}Mp(g,t)})}function Xo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ds(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=$o(e,n),i!=null&&r.unshift(Xo(e,i,o)),i=$o(e,t),i!=null&&r.push(Xo(e,i,o))),e=e.return}return r}function wr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ad(e,t,n,r,o){for(var i=t._reactName,s=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,o?(c=$o(n,i),c!=null&&s.unshift(Xo(n,c,u))):o||(c=$o(n,i),c!=null&&s.push(Xo(n,c,u)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var ry=/\r\n?/g,oy=/\u0000|\uFFFD/g;function ud(e){return(typeof e=="string"?e:""+e).replace(ry,`
`).replace(oy,"")}function Pi(e,t,n){if(t=ud(t),ud(e)!==t&&n)throw Error(N(425))}function fs(){}var xa=null,wa=null;function Ea(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Aa=typeof setTimeout=="function"?setTimeout:void 0,iy=typeof clearTimeout=="function"?clearTimeout:void 0,cd=typeof Promise=="function"?Promise:void 0,sy=typeof queueMicrotask=="function"?queueMicrotask:typeof cd<"u"?function(e){return cd.resolve(null).then(e).catch(ly)}:Aa;function ly(e){setTimeout(function(){throw e})}function kl(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Vo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Vo(t)}function zn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function dd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var lo=Math.random().toString(36).slice(2),rn="__reactFiber$"+lo,Yo="__reactProps$"+lo,xn="__reactContainer$"+lo,ka="__reactEvents$"+lo,ay="__reactListeners$"+lo,uy="__reactHandles$"+lo;function rr(e){var t=e[rn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[xn]||n[rn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=dd(e);e!==null;){if(n=e[rn])return n;e=dd(e)}return t}e=n,n=e.parentNode}return null}function fi(e){return e=e[rn]||e[xn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(N(33))}function $s(e){return e[Yo]||null}var Ta=[],Rr=-1;function Gn(e){return{current:e}}function we(e){0>Rr||(e.current=Ta[Rr],Ta[Rr]=null,Rr--)}function ye(e,t){Rr++,Ta[Rr]=e.current,e.current=t}var Wn={},nt=Gn(Wn),mt=Gn(!1),dr=Wn;function Gr(e,t){var n=e.type.contextTypes;if(!n)return Wn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ht(e){return e=e.childContextTypes,e!=null}function ps(){we(mt),we(nt)}function fd(e,t,n){if(nt.current!==Wn)throw Error(N(168));ye(nt,t),ye(mt,n)}function Bp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(N(108,Gg(e)||"Unknown",o));return _e({},n,r)}function ms(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wn,dr=nt.current,ye(nt,e),ye(mt,mt.current),!0}function pd(e,t,n){var r=e.stateNode;if(!r)throw Error(N(169));n?(e=Bp(e,t,dr),r.__reactInternalMemoizedMergedChildContext=e,we(mt),we(nt),ye(nt,e)):we(mt),ye(mt,n)}var mn=null,Ks=!1,Tl=!1;function Up(e){mn===null?mn=[e]:mn.push(e)}function cy(e){Ks=!0,Up(e)}function Qn(){if(!Tl&&mn!==null){Tl=!0;var e=0,t=ue;try{var n=mn;for(ue=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}mn=null,Ks=!1}catch(o){throw mn!==null&&(mn=mn.slice(e+1)),dp(xu,Qn),o}finally{ue=t,Tl=!1}}return null}var br=[],jr=0,hs=null,gs=0,bt=[],jt=0,fr=null,hn=1,gn="";function tr(e,t){br[jr++]=gs,br[jr++]=hs,hs=e,gs=t}function Fp(e,t,n){bt[jt++]=hn,bt[jt++]=gn,bt[jt++]=fr,fr=e;var r=hn;e=gn;var o=32-Xt(r)-1;r&=~(1<<o),n+=1;var i=32-Xt(t)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,hn=1<<32-Xt(t)+o|n<<o|r,gn=i+e}else hn=1<<i|n<<o|r,gn=e}function Nu(e){e.return!==null&&(tr(e,1),Fp(e,1,0))}function Pu(e){for(;e===hs;)hs=br[--jr],br[jr]=null,gs=br[--jr],br[jr]=null;for(;e===fr;)fr=bt[--jt],bt[jt]=null,gn=bt[--jt],bt[jt]=null,hn=bt[--jt],bt[jt]=null}var kt=null,At=null,ke=!1,Qt=null;function $p(e,t){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function md(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kt=e,At=zn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kt=e,At=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=fr!==null?{id:hn,overflow:gn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,kt=e,At=null,!0):!1;default:return!1}}function Ia(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ca(e){if(ke){var t=At;if(t){var n=t;if(!md(e,t)){if(Ia(e))throw Error(N(418));t=zn(n.nextSibling);var r=kt;t&&md(e,t)?$p(r,n):(e.flags=e.flags&-4097|2,ke=!1,kt=e)}}else{if(Ia(e))throw Error(N(418));e.flags=e.flags&-4097|2,ke=!1,kt=e}}}function hd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kt=e}function Ri(e){if(e!==kt)return!1;if(!ke)return hd(e),ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ea(e.type,e.memoizedProps)),t&&(t=At)){if(Ia(e))throw Kp(),Error(N(418));for(;t;)$p(e,t),t=zn(t.nextSibling)}if(hd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){At=zn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}At=null}}else At=kt?zn(e.stateNode.nextSibling):null;return!0}function Kp(){for(var e=At;e;)e=zn(e.nextSibling)}function Qr(){At=kt=null,ke=!1}function Ru(e){Qt===null?Qt=[e]:Qt.push(e)}var dy=An.ReactCurrentBatchConfig;function go(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(N(309));var r=n.stateNode}if(!r)throw Error(N(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var u=o.refs;s===null?delete u[i]:u[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(N(284));if(!n._owner)throw Error(N(290,e))}return e}function bi(e,t){throw e=Object.prototype.toString.call(t),Error(N(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gd(e){var t=e._init;return t(e._payload)}function Wp(e){function t(f,p){if(e){var y=f.deletions;y===null?(f.deletions=[p],f.flags|=16):y.push(p)}}function n(f,p){if(!e)return null;for(;p!==null;)t(f,p),p=p.sibling;return null}function r(f,p){for(f=new Map;p!==null;)p.key!==null?f.set(p.key,p):f.set(p.index,p),p=p.sibling;return f}function o(f,p){return f=$n(f,p),f.index=0,f.sibling=null,f}function i(f,p,y){return f.index=y,e?(y=f.alternate,y!==null?(y=y.index,y<p?(f.flags|=2,p):y):(f.flags|=2,p)):(f.flags|=1048576,p)}function s(f){return e&&f.alternate===null&&(f.flags|=2),f}function u(f,p,y,v){return p===null||p.tag!==6?(p=bl(y,f.mode,v),p.return=f,p):(p=o(p,y),p.return=f,p)}function c(f,p,y,v){var T=y.type;return T===Ir?m(f,p,y.props.children,v,y.key):p!==null&&(p.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Tn&&gd(T)===p.type)?(v=o(p,y.props),v.ref=go(f,p,y),v.return=f,v):(v=ts(y.type,y.key,y.props,null,f.mode,v),v.ref=go(f,p,y),v.return=f,v)}function d(f,p,y,v){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=jl(y,f.mode,v),p.return=f,p):(p=o(p,y.children||[]),p.return=f,p)}function m(f,p,y,v,T){return p===null||p.tag!==7?(p=ur(y,f.mode,v,T),p.return=f,p):(p=o(p,y),p.return=f,p)}function g(f,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=bl(""+p,f.mode,y),p.return=f,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case wi:return y=ts(p.type,p.key,p.props,null,f.mode,y),y.ref=go(f,null,p),y.return=f,y;case Tr:return p=jl(p,f.mode,y),p.return=f,p;case Tn:var v=p._init;return g(f,v(p._payload),y)}if(Eo(p)||co(p))return p=ur(p,f.mode,y,null),p.return=f,p;bi(f,p)}return null}function h(f,p,y,v){var T=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:u(f,p,""+y,v);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case wi:return y.key===T?c(f,p,y,v):null;case Tr:return y.key===T?d(f,p,y,v):null;case Tn:return T=y._init,h(f,p,T(y._payload),v)}if(Eo(y)||co(y))return T!==null?null:m(f,p,y,v,null);bi(f,y)}return null}function S(f,p,y,v,T){if(typeof v=="string"&&v!==""||typeof v=="number")return f=f.get(y)||null,u(p,f,""+v,T);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case wi:return f=f.get(v.key===null?y:v.key)||null,c(p,f,v,T);case Tr:return f=f.get(v.key===null?y:v.key)||null,d(p,f,v,T);case Tn:var k=v._init;return S(f,p,y,k(v._payload),T)}if(Eo(v)||co(v))return f=f.get(y)||null,m(p,f,v,T,null);bi(p,v)}return null}function w(f,p,y,v){for(var T=null,k=null,C=p,P=p=0,W=null;C!==null&&P<y.length;P++){C.index>P?(W=C,C=null):W=C.sibling;var b=h(f,C,y[P],v);if(b===null){C===null&&(C=W);break}e&&C&&b.alternate===null&&t(f,C),p=i(b,p,P),k===null?T=b:k.sibling=b,k=b,C=W}if(P===y.length)return n(f,C),ke&&tr(f,P),T;if(C===null){for(;P<y.length;P++)C=g(f,y[P],v),C!==null&&(p=i(C,p,P),k===null?T=C:k.sibling=C,k=C);return ke&&tr(f,P),T}for(C=r(f,C);P<y.length;P++)W=S(C,f,P,y[P],v),W!==null&&(e&&W.alternate!==null&&C.delete(W.key===null?P:W.key),p=i(W,p,P),k===null?T=W:k.sibling=W,k=W);return e&&C.forEach(function(ee){return t(f,ee)}),ke&&tr(f,P),T}function x(f,p,y,v){var T=co(y);if(typeof T!="function")throw Error(N(150));if(y=T.call(y),y==null)throw Error(N(151));for(var k=T=null,C=p,P=p=0,W=null,b=y.next();C!==null&&!b.done;P++,b=y.next()){C.index>P?(W=C,C=null):W=C.sibling;var ee=h(f,C,b.value,v);if(ee===null){C===null&&(C=W);break}e&&C&&ee.alternate===null&&t(f,C),p=i(ee,p,P),k===null?T=ee:k.sibling=ee,k=ee,C=W}if(b.done)return n(f,C),ke&&tr(f,P),T;if(C===null){for(;!b.done;P++,b=y.next())b=g(f,b.value,v),b!==null&&(p=i(b,p,P),k===null?T=b:k.sibling=b,k=b);return ke&&tr(f,P),T}for(C=r(f,C);!b.done;P++,b=y.next())b=S(C,f,P,b.value,v),b!==null&&(e&&b.alternate!==null&&C.delete(b.key===null?P:b.key),p=i(b,p,P),k===null?T=b:k.sibling=b,k=b);return e&&C.forEach(function(ie){return t(f,ie)}),ke&&tr(f,P),T}function E(f,p,y,v){if(typeof y=="object"&&y!==null&&y.type===Ir&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case wi:e:{for(var T=y.key,k=p;k!==null;){if(k.key===T){if(T=y.type,T===Ir){if(k.tag===7){n(f,k.sibling),p=o(k,y.props.children),p.return=f,f=p;break e}}else if(k.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Tn&&gd(T)===k.type){n(f,k.sibling),p=o(k,y.props),p.ref=go(f,k,y),p.return=f,f=p;break e}n(f,k);break}else t(f,k);k=k.sibling}y.type===Ir?(p=ur(y.props.children,f.mode,v,y.key),p.return=f,f=p):(v=ts(y.type,y.key,y.props,null,f.mode,v),v.ref=go(f,p,y),v.return=f,f=v)}return s(f);case Tr:e:{for(k=y.key;p!==null;){if(p.key===k)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(f,p.sibling),p=o(p,y.children||[]),p.return=f,f=p;break e}else{n(f,p);break}else t(f,p);p=p.sibling}p=jl(y,f.mode,v),p.return=f,f=p}return s(f);case Tn:return k=y._init,E(f,p,k(y._payload),v)}if(Eo(y))return w(f,p,y,v);if(co(y))return x(f,p,y,v);bi(f,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(f,p.sibling),p=o(p,y),p.return=f,f=p):(n(f,p),p=bl(y,f.mode,v),p.return=f,f=p),s(f)):n(f,p)}return E}var Xr=Wp(!0),Vp=Wp(!1),ys=Gn(null),Ss=null,Or=null,bu=null;function ju(){bu=Or=Ss=null}function Ou(e){var t=ys.current;we(ys),e._currentValue=t}function _a(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Kr(e,t){Ss=e,bu=Or=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ft=!0),e.firstContext=null)}function Bt(e){var t=e._currentValue;if(bu!==e)if(e={context:e,memoizedValue:t,next:null},Or===null){if(Ss===null)throw Error(N(308));Or=e,Ss.dependencies={lanes:0,firstContext:e}}else Or=Or.next=e;return t}var or=null;function Lu(e){or===null?or=[e]:or.push(e)}function Hp(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Lu(t)):(n.next=o.next,o.next=n),t.interleaved=n,wn(e,r)}function wn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var In=!1;function Du(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function yn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,wn(e,n)}return o=r.interleaved,o===null?(t.next=t,Lu(r)):(t.next=o.next,o.next=t),r.interleaved=t,wn(e,n)}function Xi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,wu(e,n)}}function yd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function vs(e,t,n,r){var o=e.updateQueue;In=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var c=u,d=c.next;c.next=null,s===null?i=d:s.next=d,s=c;var m=e.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==s&&(u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=c))}if(i!==null){var g=o.baseState;s=0,m=d=c=null,u=i;do{var h=u.lane,S=u.eventTime;if((r&h)===h){m!==null&&(m=m.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var w=e,x=u;switch(h=t,S=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){g=w.call(S,g,h);break e}g=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,h=typeof w=="function"?w.call(S,g,h):w,h==null)break e;g=_e({},g,h);break e;case 2:In=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[u]:h.push(u))}else S={eventTime:S,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(d=m=S,c=g):m=m.next=S,s|=h;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;h=u,u=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(m===null&&(c=g),o.baseState=c,o.firstBaseUpdate=d,o.lastBaseUpdate=m,t=o.shared.interleaved,t!==null){o=t;do s|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);mr|=s,e.lanes=s,e.memoizedState=g}}function Sd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(N(191,o));o.call(r)}}}var pi={},an=Gn(pi),Jo=Gn(pi),Zo=Gn(pi);function ir(e){if(e===pi)throw Error(N(174));return e}function Mu(e,t){switch(ye(Zo,t),ye(Jo,e),ye(an,pi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:aa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=aa(t,e)}we(an),ye(an,t)}function Yr(){we(an),we(Jo),we(Zo)}function Qp(e){ir(Zo.current);var t=ir(an.current),n=aa(t,e.type);t!==n&&(ye(Jo,e),ye(an,n))}function zu(e){Jo.current===e&&(we(an),we(Jo))}var Ie=Gn(0);function xs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Il=[];function Bu(){for(var e=0;e<Il.length;e++)Il[e]._workInProgressVersionPrimary=null;Il.length=0}var Yi=An.ReactCurrentDispatcher,Cl=An.ReactCurrentBatchConfig,pr=0,Ce=null,ze=null,Ke=null,ws=!1,Po=!1,qo=0,fy=0;function Je(){throw Error(N(321))}function Uu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jt(e[n],t[n]))return!1;return!0}function Fu(e,t,n,r,o,i){if(pr=i,Ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yi.current=e===null||e.memoizedState===null?gy:yy,e=n(r,o),Po){i=0;do{if(Po=!1,qo=0,25<=i)throw Error(N(301));i+=1,Ke=ze=null,t.updateQueue=null,Yi.current=Sy,e=n(r,o)}while(Po)}if(Yi.current=Es,t=ze!==null&&ze.next!==null,pr=0,Ke=ze=Ce=null,ws=!1,t)throw Error(N(300));return e}function $u(){var e=qo!==0;return qo=0,e}function tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Ce.memoizedState=Ke=e:Ke=Ke.next=e,Ke}function Ut(){if(ze===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=Ke===null?Ce.memoizedState:Ke.next;if(t!==null)Ke=t,ze=e;else{if(e===null)throw Error(N(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Ke===null?Ce.memoizedState=Ke=e:Ke=Ke.next=e}return Ke}function ei(e,t){return typeof t=="function"?t(e):t}function _l(e){var t=Ut(),n=t.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=e;var r=ze,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var u=s=null,c=null,d=i;do{var m=d.lane;if((pr&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var g={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=g,s=r):c=c.next=g,Ce.lanes|=m,mr|=m}d=d.next}while(d!==null&&d!==i);c===null?s=r:c.next=u,Jt(r,t.memoizedState)||(ft=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,Ce.lanes|=i,mr|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Nl(e){var t=Ut(),n=t.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=e(i,s.action),s=s.next;while(s!==o);Jt(i,t.memoizedState)||(ft=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Xp(){}function Yp(e,t){var n=Ce,r=Ut(),o=t(),i=!Jt(r.memoizedState,o);if(i&&(r.memoizedState=o,ft=!0),r=r.queue,Ku(qp.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,ti(9,Zp.bind(null,n,r,o,t),void 0,null),We===null)throw Error(N(349));pr&30||Jp(n,t,o)}return o}function Jp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Zp(e,t,n,r){t.value=n,t.getSnapshot=r,em(t)&&tm(e)}function qp(e,t,n){return n(function(){em(t)&&tm(e)})}function em(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jt(e,n)}catch{return!0}}function tm(e){var t=wn(e,1);t!==null&&Yt(t,e,1,-1)}function vd(e){var t=tn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:e},t.queue=e,e=e.dispatch=hy.bind(null,Ce,e),[t.memoizedState,e]}function ti(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function nm(){return Ut().memoizedState}function Ji(e,t,n,r){var o=tn();Ce.flags|=e,o.memoizedState=ti(1|t,n,void 0,r===void 0?null:r)}function Ws(e,t,n,r){var o=Ut();r=r===void 0?null:r;var i=void 0;if(ze!==null){var s=ze.memoizedState;if(i=s.destroy,r!==null&&Uu(r,s.deps)){o.memoizedState=ti(t,n,i,r);return}}Ce.flags|=e,o.memoizedState=ti(1|t,n,i,r)}function xd(e,t){return Ji(8390656,8,e,t)}function Ku(e,t){return Ws(2048,8,e,t)}function rm(e,t){return Ws(4,2,e,t)}function om(e,t){return Ws(4,4,e,t)}function im(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sm(e,t,n){return n=n!=null?n.concat([e]):null,Ws(4,4,im.bind(null,t,e),n)}function Wu(){}function lm(e,t){var n=Ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Uu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function am(e,t){var n=Ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Uu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function um(e,t,n){return pr&21?(Jt(n,t)||(n=mp(),Ce.lanes|=n,mr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ft=!0),e.memoizedState=n)}function py(e,t){var n=ue;ue=n!==0&&4>n?n:4,e(!0);var r=Cl.transition;Cl.transition={};try{e(!1),t()}finally{ue=n,Cl.transition=r}}function cm(){return Ut().memoizedState}function my(e,t,n){var r=Fn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dm(e))fm(t,n);else if(n=Hp(e,t,n,r),n!==null){var o=st();Yt(n,e,r,o),pm(n,t,r)}}function hy(e,t,n){var r=Fn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dm(e))fm(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,u=i(s,n);if(o.hasEagerState=!0,o.eagerState=u,Jt(u,s)){var c=t.interleaved;c===null?(o.next=o,Lu(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=Hp(e,t,o,r),n!==null&&(o=st(),Yt(n,e,r,o),pm(n,t,r))}}function dm(e){var t=e.alternate;return e===Ce||t!==null&&t===Ce}function fm(e,t){Po=ws=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,wu(e,n)}}var Es={readContext:Bt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},gy={readContext:Bt,useCallback:function(e,t){return tn().memoizedState=[e,t===void 0?null:t],e},useContext:Bt,useEffect:xd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ji(4194308,4,im.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ji(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ji(4,2,e,t)},useMemo:function(e,t){var n=tn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=tn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=my.bind(null,Ce,e),[r.memoizedState,e]},useRef:function(e){var t=tn();return e={current:e},t.memoizedState=e},useState:vd,useDebugValue:Wu,useDeferredValue:function(e){return tn().memoizedState=e},useTransition:function(){var e=vd(!1),t=e[0];return e=py.bind(null,e[1]),tn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ce,o=tn();if(ke){if(n===void 0)throw Error(N(407));n=n()}else{if(n=t(),We===null)throw Error(N(349));pr&30||Jp(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,xd(qp.bind(null,r,i,e),[e]),r.flags|=2048,ti(9,Zp.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=tn(),t=We.identifierPrefix;if(ke){var n=gn,r=hn;n=(r&~(1<<32-Xt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=qo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=fy++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yy={readContext:Bt,useCallback:lm,useContext:Bt,useEffect:Ku,useImperativeHandle:sm,useInsertionEffect:rm,useLayoutEffect:om,useMemo:am,useReducer:_l,useRef:nm,useState:function(){return _l(ei)},useDebugValue:Wu,useDeferredValue:function(e){var t=Ut();return um(t,ze.memoizedState,e)},useTransition:function(){var e=_l(ei)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:Xp,useSyncExternalStore:Yp,useId:cm,unstable_isNewReconciler:!1},Sy={readContext:Bt,useCallback:lm,useContext:Bt,useEffect:Ku,useImperativeHandle:sm,useInsertionEffect:rm,useLayoutEffect:om,useMemo:am,useReducer:Nl,useRef:nm,useState:function(){return Nl(ei)},useDebugValue:Wu,useDeferredValue:function(e){var t=Ut();return ze===null?t.memoizedState=e:um(t,ze.memoizedState,e)},useTransition:function(){var e=Nl(ei)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:Xp,useSyncExternalStore:Yp,useId:cm,unstable_isNewReconciler:!1};function Vt(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Na(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Vs={isMounted:function(e){return(e=e._reactInternals)?Sr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=st(),o=Fn(e),i=yn(r,o);i.payload=t,n!=null&&(i.callback=n),t=Bn(e,i,o),t!==null&&(Yt(t,e,o,r),Xi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=st(),o=Fn(e),i=yn(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Bn(e,i,o),t!==null&&(Yt(t,e,o,r),Xi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=st(),r=Fn(e),o=yn(n,r);o.tag=2,t!=null&&(o.callback=t),t=Bn(e,o,r),t!==null&&(Yt(t,e,r,n),Xi(t,e,r))}};function wd(e,t,n,r,o,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!Go(n,r)||!Go(o,i):!0}function mm(e,t,n){var r=!1,o=Wn,i=t.contextType;return typeof i=="object"&&i!==null?i=Bt(i):(o=ht(t)?dr:nt.current,r=t.contextTypes,i=(r=r!=null)?Gr(e,o):Wn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vs,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ed(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vs.enqueueReplaceState(t,t.state,null)}function Pa(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Du(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=Bt(i):(i=ht(t)?dr:nt.current,o.context=Gr(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Na(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Vs.enqueueReplaceState(o,o.state,null),vs(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Jr(e,t){try{var n="",r=t;do n+=Hg(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function Pl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ra(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var vy=typeof WeakMap=="function"?WeakMap:Map;function hm(e,t,n){n=yn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ks||(ks=!0,Fa=r),Ra(e,t)},n}function gm(e,t,n){n=yn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Ra(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ra(e,t),typeof r!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Ad(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new vy;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=jy.bind(null,e,t,n),t.then(e,e))}function kd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Td(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=yn(-1,1),t.tag=2,Bn(n,t,1))),n.lanes|=1),e)}var xy=An.ReactCurrentOwner,ft=!1;function ot(e,t,n,r){t.child=e===null?Vp(t,null,n,r):Xr(t,e.child,n,r)}function Id(e,t,n,r,o){n=n.render;var i=t.ref;return Kr(t,o),r=Fu(e,t,n,r,i,o),n=$u(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,En(e,t,o)):(ke&&n&&Nu(t),t.flags|=1,ot(e,t,r,o),t.child)}function Cd(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!Zu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,ym(e,t,i,r,o)):(e=ts(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:Go,n(s,r)&&e.ref===t.ref)return En(e,t,o)}return t.flags|=1,e=$n(i,r),e.ref=t.ref,e.return=t,t.child=e}function ym(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(Go(i,r)&&e.ref===t.ref)if(ft=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(ft=!0);else return t.lanes=e.lanes,En(e,t,o)}return ba(e,t,n,r,o)}function Sm(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Dr,wt),wt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ye(Dr,wt),wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ye(Dr,wt),wt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ye(Dr,wt),wt|=r;return ot(e,t,o,n),t.child}function vm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ba(e,t,n,r,o){var i=ht(n)?dr:nt.current;return i=Gr(t,i),Kr(t,o),n=Fu(e,t,n,r,i,o),r=$u(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,En(e,t,o)):(ke&&r&&Nu(t),t.flags|=1,ot(e,t,n,o),t.child)}function _d(e,t,n,r,o){if(ht(n)){var i=!0;ms(t)}else i=!1;if(Kr(t,o),t.stateNode===null)Zi(e,t),mm(t,n,r),Pa(t,n,r,o),r=!0;else if(e===null){var s=t.stateNode,u=t.memoizedProps;s.props=u;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Bt(d):(d=ht(n)?dr:nt.current,d=Gr(t,d));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function";g||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==r||c!==d)&&Ed(t,s,r,d),In=!1;var h=t.memoizedState;s.state=h,vs(t,r,s,o),c=t.memoizedState,u!==r||h!==c||mt.current||In?(typeof m=="function"&&(Na(t,n,m,r),c=t.memoizedState),(u=In||wd(t,n,u,r,h,c,d))?(g||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=d,r=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Gp(e,t),u=t.memoizedProps,d=t.type===t.elementType?u:Vt(t.type,u),s.props=d,g=t.pendingProps,h=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Bt(c):(c=ht(n)?dr:nt.current,c=Gr(t,c));var S=n.getDerivedStateFromProps;(m=typeof S=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==g||h!==c)&&Ed(t,s,r,c),In=!1,h=t.memoizedState,s.state=h,vs(t,r,s,o);var w=t.memoizedState;u!==g||h!==w||mt.current||In?(typeof S=="function"&&(Na(t,n,S,r),w=t.memoizedState),(d=In||wd(t,n,d,r,h,w,c)||!1)?(m||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,w,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,w,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),s.props=r,s.state=w,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return ja(e,t,n,r,i,o)}function ja(e,t,n,r,o,i){vm(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return o&&pd(t,n,!1),En(e,t,i);r=t.stateNode,xy.current=t;var u=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Xr(t,e.child,null,i),t.child=Xr(t,null,u,i)):ot(e,t,u,i),t.memoizedState=r.state,o&&pd(t,n,!0),t.child}function xm(e){var t=e.stateNode;t.pendingContext?fd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fd(e,t.context,!1),Mu(e,t.containerInfo)}function Nd(e,t,n,r,o){return Qr(),Ru(o),t.flags|=256,ot(e,t,n,r),t.child}var Oa={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function wm(e,t,n){var r=t.pendingProps,o=Ie.current,i=!1,s=(t.flags&128)!==0,u;if((u=s)||(u=e!==null&&e.memoizedState===null?!1:(o&2)!==0),u?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),ye(Ie,o&1),e===null)return Ca(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=Qs(s,r,0,null),e=ur(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=La(n),t.memoizedState=Oa,e):Vu(t,s));if(o=e.memoizedState,o!==null&&(u=o.dehydrated,u!==null))return wy(e,t,s,r,u,o,n);if(i){i=r.fallback,s=t.mode,o=e.child,u=o.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=$n(o,c),r.subtreeFlags=o.subtreeFlags&14680064),u!==null?i=$n(u,i):(i=ur(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?La(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=Oa,r}return i=e.child,e=i.sibling,r=$n(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Vu(e,t){return t=Qs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ji(e,t,n,r){return r!==null&&Ru(r),Xr(t,e.child,null,n),e=Vu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wy(e,t,n,r,o,i,s){if(n)return t.flags&256?(t.flags&=-257,r=Pl(Error(N(422))),ji(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=Qs({mode:"visible",children:r.children},o,0,null),i=ur(i,o,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Xr(t,e.child,null,s),t.child.memoizedState=La(s),t.memoizedState=Oa,i);if(!(t.mode&1))return ji(e,t,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(N(419)),r=Pl(i,r,void 0),ji(e,t,s,r)}if(u=(s&e.childLanes)!==0,ft||u){if(r=We,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,wn(e,o),Yt(r,e,o,-1))}return Ju(),r=Pl(Error(N(421))),ji(e,t,s,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Oy.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,At=zn(o.nextSibling),kt=t,ke=!0,Qt=null,e!==null&&(bt[jt++]=hn,bt[jt++]=gn,bt[jt++]=fr,hn=e.id,gn=e.overflow,fr=t),t=Vu(t,r.children),t.flags|=4096,t)}function Pd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),_a(e.return,t,n)}function Rl(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Em(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(ot(e,t,r.children,n),r=Ie.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pd(e,n,t);else if(e.tag===19)Pd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ye(Ie,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&xs(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Rl(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&xs(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Rl(t,!0,n,null,i);break;case"together":Rl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function En(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(N(153));if(t.child!==null){for(e=t.child,n=$n(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=$n(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ey(e,t,n){switch(t.tag){case 3:xm(t),Qr();break;case 5:Qp(t);break;case 1:ht(t.type)&&ms(t);break;case 4:Mu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;ye(ys,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ye(Ie,Ie.current&1),t.flags|=128,null):n&t.child.childLanes?wm(e,t,n):(ye(Ie,Ie.current&1),e=En(e,t,n),e!==null?e.sibling:null);ye(Ie,Ie.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Em(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ye(Ie,Ie.current),r)break;return null;case 22:case 23:return t.lanes=0,Sm(e,t,n)}return En(e,t,n)}var Am,Da,km,Tm;Am=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Da=function(){};km=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ir(an.current);var i=null;switch(n){case"input":o=oa(e,o),r=oa(e,r),i=[];break;case"select":o=_e({},o,{value:void 0}),r=_e({},r,{value:void 0}),i=[];break;case"textarea":o=la(e,o),r=la(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=fs)}ua(n,r);var s;n=null;for(d in o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var u=o[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Uo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(u=o!=null?o[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Uo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ve("scroll",e),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Tm=function(e,t,n,r){n!==r&&(t.flags|=4)};function yo(e,t){if(!ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ay(e,t,n){var r=t.pendingProps;switch(Pu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return ht(t.type)&&ps(),Ze(t),null;case 3:return r=t.stateNode,Yr(),we(mt),we(nt),Bu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ri(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qt!==null&&(Wa(Qt),Qt=null))),Da(e,t),Ze(t),null;case 5:zu(t);var o=ir(Zo.current);if(n=t.type,e!==null&&t.stateNode!=null)km(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(N(166));return Ze(t),null}if(e=ir(an.current),Ri(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[rn]=t,r[Yo]=i,e=(t.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(o=0;o<ko.length;o++)ve(ko[o],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":Bc(r,i),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ve("invalid",r);break;case"textarea":Fc(r,i),ve("invalid",r)}ua(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var u=i[s];s==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Pi(r.textContent,u,e),o=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Pi(r.textContent,u,e),o=["children",""+u]):Uo.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&ve("scroll",r)}switch(n){case"input":Ei(r),Uc(r,i,!0);break;case"textarea":Ei(r),$c(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=fs)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=qf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[rn]=t,e[Yo]=r,Am(e,t,!1,!1),t.stateNode=e;e:{switch(s=ca(n,r),n){case"dialog":ve("cancel",e),ve("close",e),o=r;break;case"iframe":case"object":case"embed":ve("load",e),o=r;break;case"video":case"audio":for(o=0;o<ko.length;o++)ve(ko[o],e);o=r;break;case"source":ve("error",e),o=r;break;case"img":case"image":case"link":ve("error",e),ve("load",e),o=r;break;case"details":ve("toggle",e),o=r;break;case"input":Bc(e,r),o=oa(e,r),ve("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=_e({},r,{value:void 0}),ve("invalid",e);break;case"textarea":Fc(e,r),o=la(e,r),ve("invalid",e);break;default:o=r}ua(n,o),u=o;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?np(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ep(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Fo(e,c):typeof c=="number"&&Fo(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Uo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ve("scroll",e):c!=null&&hu(e,i,c,s))}switch(n){case"input":Ei(e),Uc(e,r,!1);break;case"textarea":Ei(e),$c(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Kn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Br(e,!!r.multiple,i,!1):r.defaultValue!=null&&Br(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=fs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ze(t),null;case 6:if(e&&t.stateNode!=null)Tm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(N(166));if(n=ir(Zo.current),ir(an.current),Ri(t)){if(r=t.stateNode,n=t.memoizedProps,r[rn]=t,(i=r.nodeValue!==n)&&(e=kt,e!==null))switch(e.tag){case 3:Pi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pi(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rn]=t,t.stateNode=r}return Ze(t),null;case 13:if(we(Ie),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ke&&At!==null&&t.mode&1&&!(t.flags&128))Kp(),Qr(),t.flags|=98560,i=!1;else if(i=Ri(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(N(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));i[rn]=t}else Qr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ze(t),i=!1}else Qt!==null&&(Wa(Qt),Qt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ie.current&1?Be===0&&(Be=3):Ju())),t.updateQueue!==null&&(t.flags|=4),Ze(t),null);case 4:return Yr(),Da(e,t),e===null&&Qo(t.stateNode.containerInfo),Ze(t),null;case 10:return Ou(t.type._context),Ze(t),null;case 17:return ht(t.type)&&ps(),Ze(t),null;case 19:if(we(Ie),i=t.memoizedState,i===null)return Ze(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)yo(i,!1);else{if(Be!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=xs(e),s!==null){for(t.flags|=128,yo(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ye(Ie,Ie.current&1|2),t.child}e=e.sibling}i.tail!==null&&Oe()>Zr&&(t.flags|=128,r=!0,yo(i,!1),t.lanes=4194304)}else{if(!r)if(e=xs(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),yo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!ke)return Ze(t),null}else 2*Oe()-i.renderingStartTime>Zr&&n!==1073741824&&(t.flags|=128,r=!0,yo(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Oe(),t.sibling=null,n=Ie.current,ye(Ie,r?n&1|2:n&1),t):(Ze(t),null);case 22:case 23:return Yu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?wt&1073741824&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),null;case 24:return null;case 25:return null}throw Error(N(156,t.tag))}function ky(e,t){switch(Pu(t),t.tag){case 1:return ht(t.type)&&ps(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yr(),we(mt),we(nt),Bu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zu(t),null;case 13:if(we(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(N(340));Qr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return we(Ie),null;case 4:return Yr(),null;case 10:return Ou(t.type._context),null;case 22:case 23:return Yu(),null;case 24:return null;default:return null}}var Oi=!1,qe=!1,Ty=typeof WeakSet=="function"?WeakSet:Set,M=null;function Lr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(e,t,r)}else n.current=null}function Ma(e,t,n){try{n()}catch(r){Pe(e,t,r)}}var Rd=!1;function Iy(e,t){if(xa=us,e=Pp(),_u(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,u=-1,c=-1,d=0,m=0,g=e,h=null;t:for(;;){for(var S;g!==n||o!==0&&g.nodeType!==3||(u=s+o),g!==i||r!==0&&g.nodeType!==3||(c=s+r),g.nodeType===3&&(s+=g.nodeValue.length),(S=g.firstChild)!==null;)h=g,g=S;for(;;){if(g===e)break t;if(h===n&&++d===o&&(u=s),h===i&&++m===r&&(c=s),(S=g.nextSibling)!==null)break;g=h,h=g.parentNode}g=S}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(wa={focusedElem:e,selectionRange:n},us=!1,M=t;M!==null;)if(t=M,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,M=e;else for(;M!==null;){t=M;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,E=w.memoizedState,f=t.stateNode,p=f.getSnapshotBeforeUpdate(t.elementType===t.type?x:Vt(t.type,x),E);f.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(v){Pe(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,M=e;break}M=t.return}return w=Rd,Rd=!1,w}function Ro(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&Ma(t,n,i)}o=o.next}while(o!==r)}}function Hs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function za(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Im(e){var t=e.alternate;t!==null&&(e.alternate=null,Im(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rn],delete t[Yo],delete t[ka],delete t[ay],delete t[uy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Cm(e){return e.tag===5||e.tag===3||e.tag===4}function bd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Cm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ba(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=fs));else if(r!==4&&(e=e.child,e!==null))for(Ba(e,t,n),e=e.sibling;e!==null;)Ba(e,t,n),e=e.sibling}function Ua(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ua(e,t,n),e=e.sibling;e!==null;)Ua(e,t,n),e=e.sibling}var He=null,Gt=!1;function kn(e,t,n){for(n=n.child;n!==null;)_m(e,t,n),n=n.sibling}function _m(e,t,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(zs,n)}catch{}switch(n.tag){case 5:qe||Lr(n,t);case 6:var r=He,o=Gt;He=null,kn(e,t,n),He=r,Gt=o,He!==null&&(Gt?(e=He,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&(Gt?(e=He,n=n.stateNode,e.nodeType===8?kl(e.parentNode,n):e.nodeType===1&&kl(e,n),Vo(e)):kl(He,n.stateNode));break;case 4:r=He,o=Gt,He=n.stateNode.containerInfo,Gt=!0,kn(e,t,n),He=r,Gt=o;break;case 0:case 11:case 14:case 15:if(!qe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Ma(n,t,s),o=o.next}while(o!==r)}kn(e,t,n);break;case 1:if(!qe&&(Lr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Pe(n,t,u)}kn(e,t,n);break;case 21:kn(e,t,n);break;case 22:n.mode&1?(qe=(r=qe)||n.memoizedState!==null,kn(e,t,n),qe=r):kn(e,t,n);break;default:kn(e,t,n)}}function jd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ty),t.forEach(function(r){var o=Ly.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Wt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,u=s;e:for(;u!==null;){switch(u.tag){case 5:He=u.stateNode,Gt=!1;break e;case 3:He=u.stateNode.containerInfo,Gt=!0;break e;case 4:He=u.stateNode.containerInfo,Gt=!0;break e}u=u.return}if(He===null)throw Error(N(160));_m(i,s,o),He=null,Gt=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(d){Pe(o,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Nm(t,e),t=t.sibling}function Nm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wt(t,e),en(e),r&4){try{Ro(3,e,e.return),Hs(3,e)}catch(x){Pe(e,e.return,x)}try{Ro(5,e,e.return)}catch(x){Pe(e,e.return,x)}}break;case 1:Wt(t,e),en(e),r&512&&n!==null&&Lr(n,n.return);break;case 5:if(Wt(t,e),en(e),r&512&&n!==null&&Lr(n,n.return),e.flags&32){var o=e.stateNode;try{Fo(o,"")}catch(x){Pe(e,e.return,x)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,u=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Jf(o,i),ca(u,s);var d=ca(u,i);for(s=0;s<c.length;s+=2){var m=c[s],g=c[s+1];m==="style"?np(o,g):m==="dangerouslySetInnerHTML"?ep(o,g):m==="children"?Fo(o,g):hu(o,m,g,d)}switch(u){case"input":ia(o,i);break;case"textarea":Zf(o,i);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?Br(o,!!i.multiple,S,!1):h!==!!i.multiple&&(i.defaultValue!=null?Br(o,!!i.multiple,i.defaultValue,!0):Br(o,!!i.multiple,i.multiple?[]:"",!1))}o[Yo]=i}catch(x){Pe(e,e.return,x)}}break;case 6:if(Wt(t,e),en(e),r&4){if(e.stateNode===null)throw Error(N(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(x){Pe(e,e.return,x)}}break;case 3:if(Wt(t,e),en(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vo(t.containerInfo)}catch(x){Pe(e,e.return,x)}break;case 4:Wt(t,e),en(e);break;case 13:Wt(t,e),en(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Qu=Oe())),r&4&&jd(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(qe=(d=qe)||m,Wt(t,e),qe=d):Wt(t,e),en(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(M=e,m=e.child;m!==null;){for(g=M=m;M!==null;){switch(h=M,S=h.child,h.tag){case 0:case 11:case 14:case 15:Ro(4,h,h.return);break;case 1:Lr(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(x){Pe(r,n,x)}}break;case 5:Lr(h,h.return);break;case 22:if(h.memoizedState!==null){Ld(g);continue}}S!==null?(S.return=h,M=S):Ld(g)}m=m.sibling}e:for(m=null,g=e;;){if(g.tag===5){if(m===null){m=g;try{o=g.stateNode,d?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=g.stateNode,c=g.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=tp("display",s))}catch(x){Pe(e,e.return,x)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(x){Pe(e,e.return,x)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Wt(t,e),en(e),r&4&&jd(e);break;case 21:break;default:Wt(t,e),en(e)}}function en(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Cm(n)){var r=n;break e}n=n.return}throw Error(N(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Fo(o,""),r.flags&=-33);var i=bd(e);Ua(e,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,u=bd(e);Ba(e,u,s);break;default:throw Error(N(161))}}catch(c){Pe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Cy(e,t,n){M=e,Pm(e)}function Pm(e,t,n){for(var r=(e.mode&1)!==0;M!==null;){var o=M,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Oi;if(!s){var u=o.alternate,c=u!==null&&u.memoizedState!==null||qe;u=Oi;var d=qe;if(Oi=s,(qe=c)&&!d)for(M=o;M!==null;)s=M,c=s.child,s.tag===22&&s.memoizedState!==null?Dd(o):c!==null?(c.return=s,M=c):Dd(o);for(;i!==null;)M=i,Pm(i),i=i.sibling;M=o,Oi=u,qe=d}Od(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,M=i):Od(e)}}function Od(e){for(;M!==null;){var t=M;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qe||Hs(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!qe)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Vt(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Sd(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Sd(t,s,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Vo(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}qe||t.flags&512&&za(t)}catch(h){Pe(t,t.return,h)}}if(t===e){M=null;break}if(n=t.sibling,n!==null){n.return=t.return,M=n;break}M=t.return}}function Ld(e){for(;M!==null;){var t=M;if(t===e){M=null;break}var n=t.sibling;if(n!==null){n.return=t.return,M=n;break}M=t.return}}function Dd(e){for(;M!==null;){var t=M;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Hs(4,t)}catch(c){Pe(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){Pe(t,o,c)}}var i=t.return;try{za(t)}catch(c){Pe(t,i,c)}break;case 5:var s=t.return;try{za(t)}catch(c){Pe(t,s,c)}}}catch(c){Pe(t,t.return,c)}if(t===e){M=null;break}var u=t.sibling;if(u!==null){u.return=t.return,M=u;break}M=t.return}}var _y=Math.ceil,As=An.ReactCurrentDispatcher,Hu=An.ReactCurrentOwner,zt=An.ReactCurrentBatchConfig,oe=0,We=null,De=null,Ge=0,wt=0,Dr=Gn(0),Be=0,ni=null,mr=0,Gs=0,Gu=0,bo=null,dt=null,Qu=0,Zr=1/0,fn=null,ks=!1,Fa=null,Un=null,Li=!1,Rn=null,Ts=0,jo=0,$a=null,qi=-1,es=0;function st(){return oe&6?Oe():qi!==-1?qi:qi=Oe()}function Fn(e){return e.mode&1?oe&2&&Ge!==0?Ge&-Ge:dy.transition!==null?(es===0&&(es=mp()),es):(e=ue,e!==0||(e=window.event,e=e===void 0?16:wp(e.type)),e):1}function Yt(e,t,n,r){if(50<jo)throw jo=0,$a=null,Error(N(185));ci(e,n,r),(!(oe&2)||e!==We)&&(e===We&&(!(oe&2)&&(Gs|=n),Be===4&&_n(e,Ge)),gt(e,r),n===1&&oe===0&&!(t.mode&1)&&(Zr=Oe()+500,Ks&&Qn()))}function gt(e,t){var n=e.callbackNode;d0(e,t);var r=as(e,e===We?Ge:0);if(r===0)n!==null&&Vc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Vc(n),t===1)e.tag===0?cy(Md.bind(null,e)):Up(Md.bind(null,e)),sy(function(){!(oe&6)&&Qn()}),n=null;else{switch(hp(r)){case 1:n=xu;break;case 4:n=fp;break;case 16:n=ls;break;case 536870912:n=pp;break;default:n=ls}n=zm(n,Rm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Rm(e,t){if(qi=-1,es=0,oe&6)throw Error(N(327));var n=e.callbackNode;if(Wr()&&e.callbackNode!==n)return null;var r=as(e,e===We?Ge:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Is(e,r);else{t=r;var o=oe;oe|=2;var i=jm();(We!==e||Ge!==t)&&(fn=null,Zr=Oe()+500,ar(e,t));do try{Ry();break}catch(u){bm(e,u)}while(!0);ju(),As.current=i,oe=o,De!==null?t=0:(We=null,Ge=0,t=Be)}if(t!==0){if(t===2&&(o=ha(e),o!==0&&(r=o,t=Ka(e,o))),t===1)throw n=ni,ar(e,0),_n(e,r),gt(e,Oe()),n;if(t===6)_n(e,r);else{if(o=e.current.alternate,!(r&30)&&!Ny(o)&&(t=Is(e,r),t===2&&(i=ha(e),i!==0&&(r=i,t=Ka(e,i))),t===1))throw n=ni,ar(e,0),_n(e,r),gt(e,Oe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(N(345));case 2:nr(e,dt,fn);break;case 3:if(_n(e,r),(r&130023424)===r&&(t=Qu+500-Oe(),10<t)){if(as(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){st(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Aa(nr.bind(null,e,dt,fn),t);break}nr(e,dt,fn);break;case 4:if(_n(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-Xt(r);i=1<<s,s=t[s],s>o&&(o=s),r&=~i}if(r=o,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_y(r/1960))-r,10<r){e.timeoutHandle=Aa(nr.bind(null,e,dt,fn),r);break}nr(e,dt,fn);break;case 5:nr(e,dt,fn);break;default:throw Error(N(329))}}}return gt(e,Oe()),e.callbackNode===n?Rm.bind(null,e):null}function Ka(e,t){var n=bo;return e.current.memoizedState.isDehydrated&&(ar(e,t).flags|=256),e=Is(e,t),e!==2&&(t=dt,dt=n,t!==null&&Wa(t)),e}function Wa(e){dt===null?dt=e:dt.push.apply(dt,e)}function Ny(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Jt(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _n(e,t){for(t&=~Gu,t&=~Gs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Xt(t),r=1<<n;e[n]=-1,t&=~r}}function Md(e){if(oe&6)throw Error(N(327));Wr();var t=as(e,0);if(!(t&1))return gt(e,Oe()),null;var n=Is(e,t);if(e.tag!==0&&n===2){var r=ha(e);r!==0&&(t=r,n=Ka(e,r))}if(n===1)throw n=ni,ar(e,0),_n(e,t),gt(e,Oe()),n;if(n===6)throw Error(N(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,nr(e,dt,fn),gt(e,Oe()),null}function Xu(e,t){var n=oe;oe|=1;try{return e(t)}finally{oe=n,oe===0&&(Zr=Oe()+500,Ks&&Qn())}}function hr(e){Rn!==null&&Rn.tag===0&&!(oe&6)&&Wr();var t=oe;oe|=1;var n=zt.transition,r=ue;try{if(zt.transition=null,ue=1,e)return e()}finally{ue=r,zt.transition=n,oe=t,!(oe&6)&&Qn()}}function Yu(){wt=Dr.current,we(Dr)}function ar(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,iy(n)),De!==null)for(n=De.return;n!==null;){var r=n;switch(Pu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ps();break;case 3:Yr(),we(mt),we(nt),Bu();break;case 5:zu(r);break;case 4:Yr();break;case 13:we(Ie);break;case 19:we(Ie);break;case 10:Ou(r.type._context);break;case 22:case 23:Yu()}n=n.return}if(We=e,De=e=$n(e.current,null),Ge=wt=t,Be=0,ni=null,Gu=Gs=mr=0,dt=bo=null,or!==null){for(t=0;t<or.length;t++)if(n=or[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}or=null}return e}function bm(e,t){do{var n=De;try{if(ju(),Yi.current=Es,ws){for(var r=Ce.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}ws=!1}if(pr=0,Ke=ze=Ce=null,Po=!1,qo=0,Hu.current=null,n===null||n.return===null){Be=1,ni=t,De=null;break}e:{var i=e,s=n.return,u=n,c=t;if(t=Ge,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var h=m.alternate;h?(m.updateQueue=h.updateQueue,m.memoizedState=h.memoizedState,m.lanes=h.lanes):(m.updateQueue=null,m.memoizedState=null)}var S=kd(s);if(S!==null){S.flags&=-257,Td(S,s,u,i,t),S.mode&1&&Ad(i,d,t),t=S,c=d;var w=t.updateQueue;if(w===null){var x=new Set;x.add(c),t.updateQueue=x}else w.add(c);break e}else{if(!(t&1)){Ad(i,d,t),Ju();break e}c=Error(N(426))}}else if(ke&&u.mode&1){var E=kd(s);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Td(E,s,u,i,t),Ru(Jr(c,u));break e}}i=c=Jr(c,u),Be!==4&&(Be=2),bo===null?bo=[i]:bo.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var f=hm(i,c,t);yd(i,f);break e;case 1:u=c;var p=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Un===null||!Un.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=gm(i,u,t);yd(i,v);break e}}i=i.return}while(i!==null)}Lm(n)}catch(T){t=T,De===n&&n!==null&&(De=n=n.return);continue}break}while(!0)}function jm(){var e=As.current;return As.current=Es,e===null?Es:e}function Ju(){(Be===0||Be===3||Be===2)&&(Be=4),We===null||!(mr&268435455)&&!(Gs&268435455)||_n(We,Ge)}function Is(e,t){var n=oe;oe|=2;var r=jm();(We!==e||Ge!==t)&&(fn=null,ar(e,t));do try{Py();break}catch(o){bm(e,o)}while(!0);if(ju(),oe=n,As.current=r,De!==null)throw Error(N(261));return We=null,Ge=0,Be}function Py(){for(;De!==null;)Om(De)}function Ry(){for(;De!==null&&!n0();)Om(De)}function Om(e){var t=Mm(e.alternate,e,wt);e.memoizedProps=e.pendingProps,t===null?Lm(e):De=t,Hu.current=null}function Lm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ky(n,t),n!==null){n.flags&=32767,De=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Be=6,De=null;return}}else if(n=Ay(n,t,wt),n!==null){De=n;return}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);Be===0&&(Be=5)}function nr(e,t,n){var r=ue,o=zt.transition;try{zt.transition=null,ue=1,by(e,t,n,r)}finally{zt.transition=o,ue=r}return null}function by(e,t,n,r){do Wr();while(Rn!==null);if(oe&6)throw Error(N(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(N(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(f0(e,i),e===We&&(De=We=null,Ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Li||(Li=!0,zm(ls,function(){return Wr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=zt.transition,zt.transition=null;var s=ue;ue=1;var u=oe;oe|=4,Hu.current=null,Iy(e,n),Nm(n,e),Z0(wa),us=!!xa,wa=xa=null,e.current=n,Cy(n),r0(),oe=u,ue=s,zt.transition=i}else e.current=n;if(Li&&(Li=!1,Rn=e,Ts=o),i=e.pendingLanes,i===0&&(Un=null),s0(n.stateNode),gt(e,Oe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(ks)throw ks=!1,e=Fa,Fa=null,e;return Ts&1&&e.tag!==0&&Wr(),i=e.pendingLanes,i&1?e===$a?jo++:(jo=0,$a=e):jo=0,Qn(),null}function Wr(){if(Rn!==null){var e=hp(Ts),t=zt.transition,n=ue;try{if(zt.transition=null,ue=16>e?16:e,Rn===null)var r=!1;else{if(e=Rn,Rn=null,Ts=0,oe&6)throw Error(N(331));var o=oe;for(oe|=4,M=e.current;M!==null;){var i=M,s=i.child;if(M.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(M=d;M!==null;){var m=M;switch(m.tag){case 0:case 11:case 15:Ro(8,m,i)}var g=m.child;if(g!==null)g.return=m,M=g;else for(;M!==null;){m=M;var h=m.sibling,S=m.return;if(Im(m),m===d){M=null;break}if(h!==null){h.return=S,M=h;break}M=S}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var E=x.sibling;x.sibling=null,x=E}while(x!==null)}}M=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,M=s;else e:for(;M!==null;){if(i=M,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ro(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,M=f;break e}M=i.return}}var p=e.current;for(M=p;M!==null;){s=M;var y=s.child;if(s.subtreeFlags&2064&&y!==null)y.return=s,M=y;else e:for(s=p;M!==null;){if(u=M,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Hs(9,u)}}catch(T){Pe(u,u.return,T)}if(u===s){M=null;break e}var v=u.sibling;if(v!==null){v.return=u.return,M=v;break e}M=u.return}}if(oe=o,Qn(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(zs,e)}catch{}r=!0}return r}finally{ue=n,zt.transition=t}}return!1}function zd(e,t,n){t=Jr(n,t),t=hm(e,t,1),e=Bn(e,t,1),t=st(),e!==null&&(ci(e,1,t),gt(e,t))}function Pe(e,t,n){if(e.tag===3)zd(e,e,n);else for(;t!==null;){if(t.tag===3){zd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Un===null||!Un.has(r))){e=Jr(n,e),e=gm(t,e,1),t=Bn(t,e,1),e=st(),t!==null&&(ci(t,1,e),gt(t,e));break}}t=t.return}}function jy(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=st(),e.pingedLanes|=e.suspendedLanes&n,We===e&&(Ge&n)===n&&(Be===4||Be===3&&(Ge&130023424)===Ge&&500>Oe()-Qu?ar(e,0):Gu|=n),gt(e,t)}function Dm(e,t){t===0&&(e.mode&1?(t=Ti,Ti<<=1,!(Ti&130023424)&&(Ti=4194304)):t=1);var n=st();e=wn(e,t),e!==null&&(ci(e,t,n),gt(e,n))}function Oy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Dm(e,n)}function Ly(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(N(314))}r!==null&&r.delete(t),Dm(e,n)}var Mm;Mm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)ft=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ft=!1,Ey(e,t,n);ft=!!(e.flags&131072)}else ft=!1,ke&&t.flags&1048576&&Fp(t,gs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Zi(e,t),e=t.pendingProps;var o=Gr(t,nt.current);Kr(t,n),o=Fu(null,t,r,e,o,n);var i=$u();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ht(r)?(i=!0,ms(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Du(t),o.updater=Vs,t.stateNode=o,o._reactInternals=t,Pa(t,r,e,n),t=ja(null,t,r,!0,i,n)):(t.tag=0,ke&&i&&Nu(t),ot(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Zi(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=My(r),e=Vt(r,e),o){case 0:t=ba(null,t,r,e,n);break e;case 1:t=_d(null,t,r,e,n);break e;case 11:t=Id(null,t,r,e,n);break e;case 14:t=Cd(null,t,r,Vt(r.type,e),n);break e}throw Error(N(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Vt(r,o),ba(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Vt(r,o),_d(e,t,r,o,n);case 3:e:{if(xm(t),e===null)throw Error(N(387));r=t.pendingProps,i=t.memoizedState,o=i.element,Gp(e,t),vs(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=Jr(Error(N(423)),t),t=Nd(e,t,r,n,o);break e}else if(r!==o){o=Jr(Error(N(424)),t),t=Nd(e,t,r,n,o);break e}else for(At=zn(t.stateNode.containerInfo.firstChild),kt=t,ke=!0,Qt=null,n=Vp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qr(),r===o){t=En(e,t,n);break e}ot(e,t,r,n)}t=t.child}return t;case 5:return Qp(t),e===null&&Ca(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,Ea(r,o)?s=null:i!==null&&Ea(r,i)&&(t.flags|=32),vm(e,t),ot(e,t,s,n),t.child;case 6:return e===null&&Ca(t),null;case 13:return wm(e,t,n);case 4:return Mu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Xr(t,null,r,n):ot(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Vt(r,o),Id(e,t,r,o,n);case 7:return ot(e,t,t.pendingProps,n),t.child;case 8:return ot(e,t,t.pendingProps.children,n),t.child;case 12:return ot(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,ye(ys,r._currentValue),r._currentValue=s,i!==null)if(Jt(i.value,s)){if(i.children===o.children&&!mt.current){t=En(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var u=i.dependencies;if(u!==null){s=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=yn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),_a(i.return,n,t),u.lanes|=n;break}c=c.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(N(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),_a(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}ot(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Kr(t,n),o=Bt(o),r=r(o),t.flags|=1,ot(e,t,r,n),t.child;case 14:return r=t.type,o=Vt(r,t.pendingProps),o=Vt(r.type,o),Cd(e,t,r,o,n);case 15:return ym(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Vt(r,o),Zi(e,t),t.tag=1,ht(r)?(e=!0,ms(t)):e=!1,Kr(t,n),mm(t,r,o),Pa(t,r,o,n),ja(null,t,r,!0,e,n);case 19:return Em(e,t,n);case 22:return Sm(e,t,n)}throw Error(N(156,t.tag))};function zm(e,t){return dp(e,t)}function Dy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,n,r){return new Dy(e,t,n,r)}function Zu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function My(e){if(typeof e=="function")return Zu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===yu)return 11;if(e===Su)return 14}return 2}function $n(e,t){var n=e.alternate;return n===null?(n=Lt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ts(e,t,n,r,o,i){var s=2;if(r=e,typeof e=="function")Zu(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Ir:return ur(n.children,o,i,t);case gu:s=8,o|=8;break;case ea:return e=Lt(12,n,t,o|2),e.elementType=ea,e.lanes=i,e;case ta:return e=Lt(13,n,t,o),e.elementType=ta,e.lanes=i,e;case na:return e=Lt(19,n,t,o),e.elementType=na,e.lanes=i,e;case Qf:return Qs(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Hf:s=10;break e;case Gf:s=9;break e;case yu:s=11;break e;case Su:s=14;break e;case Tn:s=16,r=null;break e}throw Error(N(130,e==null?e:typeof e,""))}return t=Lt(s,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function ur(e,t,n,r){return e=Lt(7,e,r,t),e.lanes=n,e}function Qs(e,t,n,r){return e=Lt(22,e,r,t),e.elementType=Qf,e.lanes=n,e.stateNode={isHidden:!1},e}function bl(e,t,n){return e=Lt(6,e,null,t),e.lanes=n,e}function jl(e,t,n){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zy(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pl(0),this.expirationTimes=pl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function qu(e,t,n,r,o,i,s,u,c){return e=new zy(e,t,n,u,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Lt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Du(i),e}function By(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Bm(e){if(!e)return Wn;e=e._reactInternals;e:{if(Sr(e)!==e||e.tag!==1)throw Error(N(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ht(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(N(171))}if(e.tag===1){var n=e.type;if(ht(n))return Bp(e,n,t)}return t}function Um(e,t,n,r,o,i,s,u,c){return e=qu(n,r,!0,e,o,i,s,u,c),e.context=Bm(null),n=e.current,r=st(),o=Fn(n),i=yn(r,o),i.callback=t??null,Bn(n,i,o),e.current.lanes=o,ci(e,o,r),gt(e,r),e}function Xs(e,t,n,r){var o=t.current,i=st(),s=Fn(o);return n=Bm(n),t.context===null?t.context=n:t.pendingContext=n,t=yn(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Bn(o,t,s),e!==null&&(Yt(e,o,s,i),Xi(e,o,s)),s}function Cs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Bd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ec(e,t){Bd(e,t),(e=e.alternate)&&Bd(e,t)}function Uy(){return null}var Fm=typeof reportError=="function"?reportError:function(e){console.error(e)};function tc(e){this._internalRoot=e}Ys.prototype.render=tc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(N(409));Xs(e,t,null,null)};Ys.prototype.unmount=tc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hr(function(){Xs(null,e,null,null)}),t[xn]=null}};function Ys(e){this._internalRoot=e}Ys.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Cn.length&&t!==0&&t<Cn[n].priority;n++);Cn.splice(n,0,e),n===0&&xp(e)}};function nc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Js(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ud(){}function Fy(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var d=Cs(s);i.call(d)}}var s=Um(t,r,e,0,null,!1,!1,"",Ud);return e._reactRootContainer=s,e[xn]=s.current,Qo(e.nodeType===8?e.parentNode:e),hr(),s}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var u=r;r=function(){var d=Cs(c);u.call(d)}}var c=qu(e,0,!1,null,null,!1,!1,"",Ud);return e._reactRootContainer=c,e[xn]=c.current,Qo(e.nodeType===8?e.parentNode:e),hr(function(){Xs(t,c,n,r)}),c}function Zs(e,t,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var u=o;o=function(){var c=Cs(s);u.call(c)}}Xs(t,s,e,o)}else s=Fy(n,t,e,o,r);return Cs(s)}gp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ao(t.pendingLanes);n!==0&&(wu(t,n|1),gt(t,Oe()),!(oe&6)&&(Zr=Oe()+500,Qn()))}break;case 13:hr(function(){var r=wn(e,1);if(r!==null){var o=st();Yt(r,e,1,o)}}),ec(e,1)}};Eu=function(e){if(e.tag===13){var t=wn(e,134217728);if(t!==null){var n=st();Yt(t,e,134217728,n)}ec(e,134217728)}};yp=function(e){if(e.tag===13){var t=Fn(e),n=wn(e,t);if(n!==null){var r=st();Yt(n,e,t,r)}ec(e,t)}};Sp=function(){return ue};vp=function(e,t){var n=ue;try{return ue=e,t()}finally{ue=n}};fa=function(e,t,n){switch(t){case"input":if(ia(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=$s(r);if(!o)throw Error(N(90));Yf(r),ia(r,o)}}}break;case"textarea":Zf(e,n);break;case"select":t=n.value,t!=null&&Br(e,!!n.multiple,t,!1)}};ip=Xu;sp=hr;var $y={usingClientEntryPoint:!1,Events:[fi,Pr,$s,rp,op,Xu]},So={findFiberByHostInstance:rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ky={bundleType:So.bundleType,version:So.version,rendererPackageName:So.rendererPackageName,rendererConfig:So.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:An.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=up(e),e===null?null:e.stateNode},findFiberByHostInstance:So.findFiberByHostInstance||Uy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Di=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Di.isDisabled&&Di.supportsFiber)try{zs=Di.inject(Ky),ln=Di}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$y;It.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nc(t))throw Error(N(200));return By(e,t,null,n)};It.createRoot=function(e,t){if(!nc(e))throw Error(N(299));var n=!1,r="",o=Fm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=qu(e,1,!1,null,null,n,!1,r,o),e[xn]=t.current,Qo(e.nodeType===8?e.parentNode:e),new tc(t)};It.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(N(188)):(e=Object.keys(e).join(","),Error(N(268,e)));return e=up(t),e=e===null?null:e.stateNode,e};It.flushSync=function(e){return hr(e)};It.hydrate=function(e,t,n){if(!Js(t))throw Error(N(200));return Zs(null,e,t,!0,n)};It.hydrateRoot=function(e,t,n){if(!nc(e))throw Error(N(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=Fm;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=Um(t,null,e,1,n??null,o,!1,i,s),e[xn]=t.current,Qo(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Ys(t)};It.render=function(e,t,n){if(!Js(t))throw Error(N(200));return Zs(null,e,t,!1,n)};It.unmountComponentAtNode=function(e){if(!Js(e))throw Error(N(40));return e._reactRootContainer?(hr(function(){Zs(null,null,e,!1,function(){e._reactRootContainer=null,e[xn]=null})}),!0):!1};It.unstable_batchedUpdates=Xu;It.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Js(n))throw Error(N(200));if(e==null||e._reactInternals===void 0)throw Error(N(38));return Zs(e,t,n,!1,r)};It.version="18.3.1-next-f1338f8080-20240426";function $m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($m)}catch(e){console.error(e)}}$m(),$f.exports=It;var Wy=$f.exports,Km,Fd=Wy;Km=Fd.createRoot,Fd.hydrateRoot;const Vy="modulepreload",Hy=function(e){return"/"+e},$d={},Wm=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),u=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=Promise.allSettled(n.map(c=>{if(c=Hy(c),c in $d)return;$d[c]=!0;const d=c.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":Vy,d||(g.as="script"),g.crossOrigin="",g.href=c,u&&g.setAttribute("nonce",u),document.head.appendChild(g),d)return new Promise((h,S)=>{g.addEventListener("load",h),g.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(s){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=s,window.dispatchEvent(u),!u.defaultPrevented)throw s}return o.then(s=>{for(const u of s||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})},a={bg:"#05070A",border:"#213043",muted:"#32435A",accent:"#39DDB6",text:"#EAF1F8",dim:"#8FA0B5",danger:"#FF5D7A",dLow:"#311520",warn:"#F7B267",wLow:"#322515",ok:"#39DDB6",purple:"#8F7BFF"},j={fontFamily:"'IBM Plex Mono','SFMono-Regular',Menlo,Monaco,monospace"},Ot=(e,t=4)=>parseFloat(e||0).toFixed(t),mi=e=>e?`${e.slice(0,18)}...${e.slice(-6)}`:"",Gy=/^[qpzry9x8gf2tvdw0s3jn54khce6mua7l]+$/i,Vm=["kaspa","kaspatest","kaspadev","kaspasim"],ri=(e,t=Vm)=>{const n=String(e||"").trim().toLowerCase(),r=n.indexOf(":");if(r<=0||r===n.length-1)return!1;const o=n.slice(0,r),i=n.slice(r+1);return!t.map(s=>s.toLowerCase()).includes(o)||i.length<61||i.length>63?!1:Gy.test(i)},Qy=(e,t=Vm)=>{const n=String(e||"").trim();if(!ri(n,t))throw new Error(`Invalid Kaspa address for allowed prefixes: ${t.join(", ")}`);const r=n.toLowerCase(),o=r.indexOf(":"),i=r.slice(0,o),s=r.slice(o+1);return`${i}:${s}`},Xy=e=>{const t=String(e||"").toLowerCase();return t==="mainnet"?"kaspa":t.startsWith("testnet")?"kaspatest":t.startsWith("devnet")?"kaspadev":t.startsWith("simnet")?"kaspasim":"kaspa"},Oo=(e,t)=>{const n=Qy(e),r=n.indexOf(":"),o=n.slice(r+1);return`${Xy(t)}:${o}`},Yy={USD:1,EUR:.92,GBP:.79,JPY:150,CAD:1.36};function Jy(e,t){const n=Yy[t];return e*n}function Zy(e,t){const n=Jy(e,t),r=2;return new Intl.NumberFormat("en-US",{style:"currency",currency:t,maximumFractionDigits:r,minimumFractionDigits:r}).format(n)}const Ne={agents:"forgeos.session.agents.v2",activeAgent:"forgeos.session.activeAgent.v2",walletMeta:"forgeos.wallet.meta.v2",network:"forgeos.network",lastProvider:"forgeos.wallet.lastProvider.mainnet",autoLockMinutes:"forgeos.autolock.minutes.v1",persistUnlockSession:"forgeos.unlock.persist-session.v1",displayCurrency:"forgeos.display.currency.v1",hidePortfolioBalances:"forgeos.privacy.hide-balances.v1",kaspaRpcProviderPresetMap:"forgeos.kaspa.rpc-provider.v1",customKaspaRpcMap:"forgeos.kaspa.custom-rpc.v1"},qy=1,e1=24*60,Kd=-1,Va="official";function Hm(e){if(e===Kd)return Kd;if(typeof e!="number"||!Number.isFinite(e))return 15;const t=Math.floor(e);return Math.min(e1,Math.max(qy,t))}function ut(){return typeof chrome<"u"&&chrome.storage?chrome.storage.local:null}function Gm(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;try{const n=new URL(t);return n.protocol!=="https:"&&n.protocol!=="http:"?null:t.replace(/\/+$/,"")}catch{return null}}function t1(e){if(typeof e!="object"||e===null)return{};const t={};for(const[n,r]of Object.entries(e)){const o=String(n||"").trim();if(!o)continue;const i=Gm(r);i&&(t[o]=i)}return t}function Qm(e){return e==="igra"?"igra":e==="kasplex"?"kasplex":e==="custom"?"custom":Va}function n1(e){if(typeof e!="object"||e===null)return{};const t={};for(const[n,r]of Object.entries(e)){const o=String(n||"").trim();o&&(t[o]=Qm(r))}return t}async function r1(){const e=ut();return e?new Promise(t=>{e.get(Ne.agents,n=>{try{const r=n[Ne.agents];if(!r)return t([]);const o=typeof r=="string"?JSON.parse(r):r;t(Array.isArray(o)?o:[])}catch{t([])}})}):[]}async function Wd(){const e=ut();return e?new Promise(t=>{e.get(Ne.walletMeta,n=>{try{const r=n[Ne.walletMeta];if(!r)return t(null);const o=typeof r=="string"?JSON.parse(r):r;t(o!=null&&o.address?o:null)}catch{t(null)}})}):null}async function Ha(e){const t=ut();if(t)return new Promise(n=>{t.set({[Ne.walletMeta]:JSON.stringify(e)},n)})}async function _s(){const e=ut();return e?new Promise(t=>{e.get(Ne.network,n=>t(n[Ne.network]||"mainnet"))}):"mainnet"}async function o1(e){const t=ut();if(t)return new Promise(n=>{t.set({[Ne.network]:e},n)})}async function i1(){const e=ut();return e?new Promise(t=>{e.get(Ne.autoLockMinutes,n=>{t(Hm(n[Ne.autoLockMinutes]))})}):15}async function s1(e){const t=ut();if(t)return new Promise(n=>{t.set({[Ne.autoLockMinutes]:Hm(e)},n)})}async function l1(){const e=ut();return e?new Promise(t=>{e.get(Ne.persistUnlockSession,n=>{t(n[Ne.persistUnlockSession]===!0)})}):!1}async function a1(e){const t=ut();if(t)return new Promise(n=>{t.set({[Ne.persistUnlockSession]:e===!0},n)})}async function u1(){const e=ut();return e?new Promise(t=>{e.get(Ne.hidePortfolioBalances,n=>{t(n[Ne.hidePortfolioBalances]===!0)})}):!1}async function c1(e){const t=ut();if(t)return new Promise(n=>{t.set({[Ne.hidePortfolioBalances]:e===!0},n)})}async function Xm(){const e=ut();return e?new Promise(t=>{e.get(Ne.kaspaRpcProviderPresetMap,n=>{try{const r=n[Ne.kaspaRpcProviderPresetMap],o=typeof r=="string"?JSON.parse(r):r;t(n1(o))}catch{t({})}})}):{}}async function Ym(e){const t=String(e||"").trim();return t?(await Xm())[t]??Va:Va}async function Ol(e,t){const n=ut();if(!n)return;const r=String(e||"").trim();if(!r)return;const o=await Xm();return o[r]=Qm(t),new Promise(i=>{n.set({[Ne.kaspaRpcProviderPresetMap]:JSON.stringify(o)},i)})}async function Jm(){const e=ut();return e?new Promise(t=>{e.get(Ne.customKaspaRpcMap,n=>{try{const r=n[Ne.customKaspaRpcMap],o=typeof r=="string"?JSON.parse(r):r;t(t1(o))}catch{t({})}})}):{}}async function Zm(e){const t=String(e||"").trim();return t?(await Jm())[t]??null:null}async function Vd(e,t){const n=ut();if(!n)return;const r=String(e||"").trim();if(!r)return;const o=await Jm();if(t===null||t.trim()==="")delete o[r];else{const i=Gm(t);if(!i)throw new Error("INVALID_RPC_ENDPOINT");o[r]=i}return new Promise(i=>{n.set({[Ne.customKaspaRpcMap]:JSON.stringify(o)},i)})}const Mi={mainnet:["https://api.kaspa.org"],"testnet-10":["https://api-tn10.kaspa.org"],"testnet-11":["https://api-tn11.kaspa.org"],"testnet-12":["https://api-tn12.kaspa.org"]};function Dt(e,t){var o,i;const n=(i=(o=import.meta)==null?void 0:o.env)==null?void 0:i[e];if(typeof n!="string"||!n.trim())return t;const r=n.split(/[,\s]+/).map(s=>s.trim()).filter(Boolean).filter((s,u,c)=>c.indexOf(s)===u);return r.length?r:t}const bn={mainnet:Dt("VITE_KASPA_MAINNET_API_ENDPOINTS",Mi.mainnet),"testnet-10":Dt("VITE_KASPA_TN10_API_ENDPOINTS",Mi["testnet-10"]),"testnet-11":Dt("VITE_KASPA_TN11_API_ENDPOINTS",Mi["testnet-11"]),"testnet-12":Dt("VITE_KASPA_TN12_API_ENDPOINTS",Mi["testnet-12"])},d1={mainnet:Dt("VITE_KASPA_IGRA_MAINNET_API_ENDPOINTS",[]),"testnet-10":Dt("VITE_KASPA_IGRA_TN10_API_ENDPOINTS",[]),"testnet-11":Dt("VITE_KASPA_IGRA_TN11_API_ENDPOINTS",[]),"testnet-12":Dt("VITE_KASPA_IGRA_TN12_API_ENDPOINTS",[])},f1={mainnet:Dt("VITE_KASPA_KASPLEX_MAINNET_API_ENDPOINTS",[]),"testnet-10":Dt("VITE_KASPA_KASPLEX_TN10_API_ENDPOINTS",[]),"testnet-11":Dt("VITE_KASPA_KASPLEX_TN11_API_ENDPOINTS",[]),"testnet-12":Dt("VITE_KASPA_KASPLEX_TN12_API_ENDPOINTS",[])};bn.mainnet[0],bn["testnet-10"][0],bn["testnet-11"][0],bn["testnet-12"][0];const p1=12e3,m1=2,h1=600;function qm(e){return e===408||e===429||e>=500}const g1=4,y1=3e4,Lo={},Ll={};function oi(e){return Ll[e]||(Ll[e]={lastOkAt:0,lastFailAt:0,consecutiveFails:0,lastLatencyMs:0,lastStatus:0,lastError:""}),Ll[e]}function S1(e,t,n=200){const r=oi(e);r.lastOkAt=Date.now(),r.consecutiveFails=0,r.lastLatencyMs=t,r.lastStatus=n,r.lastError=""}function Hd(e,t,n=0){const r=oi(e);r.lastFailAt=Date.now(),r.consecutiveFails+=1,r.lastStatus=n,r.lastError=t}function Ns(e){Lo[e]||(Lo[e]={state:"closed",failures:0,openAt:0});const t=Lo[e];return t.state==="open"&&Date.now()-t.openAt>y1&&(t.state="half-open"),t}function v1(e){const t=Lo[e];t&&(t.failures=0,t.state="closed")}function x1(e){const t=Lo[e];t&&(t.failures++,t.failures>=g1&&(t.state="open",t.openAt=Date.now()))}function w1(e){const t=n=>(bn[n]??bn.mainnet).map(o=>{const i=Ns(o),s=oi(o);return{base:o,circuit:i.state,failures:i.failures,lastOkAt:s.lastOkAt,lastFailAt:s.lastFailAt,consecutiveFails:s.consecutiveFails,lastLatencyMs:s.lastLatencyMs,lastStatus:s.lastStatus,lastError:s.lastError}});return e?t(e):{mainnet:t("mainnet"),"testnet-10":t("testnet-10"),"testnet-11":t("testnet-11"),"testnet-12":t("testnet-12")}}function Dl(e){return[...e].sort((n,r)=>{const o=Ns(n),i=Ns(r);if(o.state==="open"&&i.state!=="open")return 1;if(i.state==="open"&&o.state!=="open")return-1;const s=oi(n),u=oi(r);return s.lastOkAt!==u.lastOkAt?u.lastOkAt-s.lastOkAt:s.consecutiveFails!==u.consecutiveFails?s.consecutiveFails-u.consecutiveFails:0})}function E1(e,t){const n=bn[e]??bn.mainnet;if(t==="igra"){const r=d1[e]??[];return r.length?r:n}if(t==="kasplex"){const r=f1[e]??[];return r.length?r:n}return n}async function A1(e){let t="official";try{t=await Ym(e)}catch{t="official"}const n=[...E1(e,t)];if(t!=="custom")return Dl(n);let r=null;try{r=await Zm(e)}catch{r=null}if(r){const o=n.filter(i=>i!==r);return Dl([r,...o])}return Dl(n)}async function k1(e,t,n){if(Ns(e).state==="open")throw new jn(`Circuit open for ${e}  backing off`,503);let o=null;for(let i=0;i<=m1;i++){i>0&&await new Promise(d=>setTimeout(d,h1*2**(i-1)));const s=new AbortController,u=setTimeout(()=>s.abort(),p1),c=Date.now();try{const d=await fetch(`${e}${t}`,{...n,signal:s.signal});if(clearTimeout(u),!d.ok){const g=await d.text().catch(()=>"");throw Hd(e,`HTTP ${d.status}`,d.status),new jn(`HTTP ${d.status}: ${g.slice(0,120)}`,d.status)}const m=await d.json();return v1(e),S1(e,Date.now()-c,d.status),m}catch(d){if(clearTimeout(u),d instanceof jn&&!qm(d.status))throw d;const m=d instanceof Error?d.message:String(d);Hd(e,m),o=d instanceof Error?d:new Error(String(d))}}throw x1(e),o??new jn("Unknown API error",0)}async function vr(e,t,n){const r=await A1(e);let o=null;for(const i of r)try{return await k1(i,t,n)}catch(s){if(s instanceof jn&&!qm(s.status))throw s;o=s instanceof Error?s:new Error(String(s))}throw o??new jn("Unknown API error",0)}class jn extends Error{constructor(t,n){super(t),this.status=n,this.name="KaspaApiError"}}const T1={mainnet:10,"testnet-10":10,"testnet-11":32,"testnet-12":10};async function I1(e,t="mainnet"){return vr(t,`/addresses/${encodeURIComponent(e)}/utxos`)}async function C1(e,t="mainnet"){const n=await vr(t,`/addresses/${encodeURIComponent(e)}/balance`);return BigInt((n==null?void 0:n.balance)??0)}async function _1(e="mainnet"){try{const t=await vr(e,"/info/price?stringOnly=false");return(t==null?void 0:t.price)??0}catch{return 0}}async function N1(e="mainnet"){var t;try{const n=await vr(e,"/info/fee-estimate");return((t=n==null?void 0:n.priorityBucket)==null?void 0:t.feerate)??1}catch{return 1}}async function Ga(e,t,n="mainnet"){const r=await N1(n),o=239+142*e+51*t;return BigInt(Math.max(Math.ceil(o*r),1e3))}async function P1(e,t="mainnet"){const n=await vr(t,"/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=(n==null?void 0:n.transactionId)??(n==null?void 0:n.txid)??"";if(!r)throw new jn("Broadcast succeeded but no txId returned",200);return r}async function eh(e,t="mainnet"){try{return await vr(t,`/transactions/${e}`)}catch(n){if(n instanceof jn&&n.status===404)return null;throw n}}async function R1(e="mainnet"){try{return await vr(e,"/info/blockdag")}catch{return null}}async function b1(e,t="mainnet"){const n=await C1(e,t);return Number(n)/1e8}async function j1(e="mainnet"){return _1(e)}const it=Object.freeze({path:"m/44'/111'",account:0,chain:0,index:0}),rc=Object.freeze(["m/44'/111'","m/44'/972'"]);function Gd(e,t){const n=typeof e=="number"?e:Number(e);return!Number.isFinite(n)||n<0?t:Math.floor(n)}function O1(e){const t=String(e??"").trim();return t?t.startsWith("m")?t:`m/${t}`:it.path}function pt(e){return{path:O1(e==null?void 0:e.path),account:Gd(e==null?void 0:e.account,it.account),chain:(e==null?void 0:e.chain)===1?1:0,index:Gd(e==null?void 0:e.index,it.index)}}function Ht(e){const t=pt(e);return`${t.path}/${t.account}'/${t.chain}/${t.index}`}function oc(e){return e===1?"change":"receive"}function L1(e){const n=String(e||"").trim().match(/^(m(?:\/\d+'?)*)\/(\d+)'\s*\/([01])\s*\/(\d+)$/i);if(!n)throw new Error("Invalid derivation path. Expected format like m/44'/111'/0'/0/0");return pt({path:n[1],account:Number(n[2]),chain:Number(n[3]),index:Number(n[4])})}const D1=6e5,M1=["encrypt","decrypt"];async function th(e,t){const n=new TextEncoder,r=await crypto.subtle.importKey("raw",n.encode(e),{name:"PBKDF2"},!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:D1,hash:"SHA-256"},r,{name:"AES-GCM",length:256},!1,M1)}function Qd(e){return crypto.getRandomValues(new Uint8Array(e))}function Ml(e){if(e.length%2!==0)throw new Error("Invalid hex string length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n>>1]=parseInt(e.slice(n,n+2),16);return t}function zl(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}async function z1(e,t,n){const r=await crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,n);return new Uint8Array(r)}async function B1(e,t,n){const r=await crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,n);return new Uint8Array(r)}const Qa="forgeos.vault.v1",Ps="forgeos.vault.session-cache.v1",ic=-1,sc=15;let yt=null;function nh(e){return!Number.isFinite(e)||e<=0?Number.POSITIVE_INFINITY:Date.now()+e*6e4}function U1(e){return Number.isFinite(e)?e:ic}function F1(e){return e===ic?Number.POSITIVE_INFINITY:typeof e!="number"||!Number.isFinite(e)?null:e}function Rs(e){try{if(!Number.isFinite(e)||e<=0){chrome.runtime.sendMessage({type:"CANCEL_AUTOLOCK"});return}chrome.runtime.sendMessage({type:"SCHEDULE_AUTOLOCK",minutes:e})}catch{}}function Vn(){return yt?Date.now()>yt.autoLockAt?(qs(),ao(),null):yt:null}function qs(){if(yt){try{yt.mnemonic=""}catch{}yt=null}}function lc(){return chrome.storage.local}function ac(){var t;return((t=chrome.storage)==null?void 0:t.session)??null}async function uc(){return new Promise(e=>{lc().get(Qa,t=>{try{const n=t[Qa];if(!n)return e(null);e(JSON.parse(n))}catch{e(null)}})})}async function $1(e){return new Promise(t=>{lc().set({[Qa]:JSON.stringify(e)},t)})}async function cc(e){const t=ac();if(t)return new Promise(n=>{t.set({[Ps]:{version:1,mnemonic:e.mnemonic,mnemonicPassphrase:e.mnemonicPassphrase,derivation:e.derivation,address:e.address,network:e.network,autoLockAt:U1(e.autoLockAt)}},n)})}async function ao(){const e=ac();if(e)return new Promise(t=>{e.remove(Ps,t)})}async function K1(){const e=ac();return e?new Promise(t=>{e.get(Ps,n=>{const r=n==null?void 0:n[Ps];if(!r||typeof r!="object"){t(null);return}const o=F1(r.autoLockAt);if(o===null){t(null);return}const i=typeof r.mnemonic=="string"?r.mnemonic:"",s=typeof r.address=="string"?r.address:"",u=typeof r.network=="string"?r.network:"";if(!i||!s||!u){t(null);return}t({mnemonic:i,mnemonicPassphrase:typeof r.mnemonicPassphrase=="string"?r.mnemonicPassphrase:void 0,derivation:pt(r.derivation??it),address:s,network:u,autoLockAt:o})})}):null}async function rh(){return await uc()!==null}async function bs(e,t,n,r,o={}){var S;const i=Qd(32),s=Qd(12),u=await th(t,i),c=pt(o.derivation??it),d={version:1,mnemonic:e,mnemonicPassphrase:o.mnemonicPassphrase||void 0,derivation:c,address:n,network:r,derivationPath:`${c.path}/${c.account}'`,addressIndex:c.index},m=new TextEncoder().encode(JSON.stringify(d)),g=await z1(u,s,m),h={version:1,kdf:"pbkdf2",salt:zl(i),iterations:6e5,hash:"SHA-256",iv:zl(s),ciphertext:zl(g),createdAt:((S=await uc())==null?void 0:S.createdAt)??Date.now(),updatedAt:Date.now()};await $1(h)}async function gr(e,t=sc,n={}){const r=await uc();if(!r)throw new Error("NO_VAULT");const o=Ml(r.salt),i=Ml(r.iv),s=Ml(r.ciphertext),u=await th(e,o);let c;try{c=await B1(u,i,s)}catch{throw new Error("INVALID_PASSWORD")}const d=JSON.parse(new TextDecoder().decode(c));return yt={mnemonic:d.mnemonic,mnemonicPassphrase:typeof d.mnemonicPassphrase=="string"?d.mnemonicPassphrase:void 0,derivation:pt(d.derivation??{path:"m/44'/111'",account:0,chain:0,index:typeof d.addressIndex=="number"?d.addressIndex:0}),address:d.address,network:d.network,autoLockAt:nh(t)},Rs(t),n.persistSession?await cc(yt):await ao(),yt}async function oh(){const e=await K1();if(!e)return null;if(Date.now()>e.autoLockAt)return await ao(),null;if(yt=e,Number.isFinite(e.autoLockAt)){const t=Math.max(0,(e.autoLockAt-Date.now())/6e4);Rs(t)}else Rs(ic);return yt}async function Xa(e){if(!e){await ao();return}const t=Vn();t&&await cc(t)}function ih(){qs(),ao();try{chrome.runtime.sendMessage({type:"CANCEL_AUTOLOCK"})}catch{}}async function sh(e,t){if(t.length<8)throw new Error("WEAK_PASSWORD");const n=await gr(e);await bs(n.mnemonic,t,n.address,n.network,{mnemonicPassphrase:n.mnemonicPassphrase,derivation:n.derivation}),qs(),await gr(t)}async function lh(){qs(),await ao(),await new Promise(e=>lc().clear(e))}function ns(e=sc,t={}){yt&&(yt.autoLockAt=nh(e),Rs(e),t.persistSession&&cc(yt))}const W1=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_AUTO_LOCK_MINUTES:sc,changePassword:sh,createVault:bs,extendSession:ns,getSession:Vn,lockWallet:ih,resetWallet:lh,restoreSessionFromCache:oh,setSessionPersistence:Xa,unlockVault:gr,vaultExists:rh},Symbol.toStringTag,{value:"Module"})),V1="/kaspa_wasm_bg.wasm";let zi=null,Bi=null;function H1(e){var t,n,r,o;return e!=null&&e.Mnemonic?e:(t=e==null?void 0:e.default)!=null&&t.Mnemonic?e.default:(n=e==null?void 0:e.k)!=null&&n.Mnemonic?e.k:(o=(r=e==null?void 0:e.k)==null?void 0:r.default)!=null&&o.Mnemonic?e.k.default:e}async function G1(){globalThis.__forgeosKaspaWasmBytes||(Bi||(Bi=(async()=>{const e=await fetch(V1);if(!e.ok)throw new Error(`WASM_FETCH_FAILED: ${e.status} ${e.statusText}`);const t=await e.arrayBuffer();globalThis.__forgeosKaspaWasmBytes=new Uint8Array(t)})().catch(e=>{throw Bi=null,e})),await Bi)}async function dc(){return zi||(zi=(async()=>{try{await G1();const e=await Wm(()=>import("../../kaspa_wasm.js").then(r=>r.k),[]),t=H1(e),n=t.default||t.init;if(typeof n=="function")try{await n()}catch{}return t}catch(e){const t=e instanceof Error?e.message:String(e);throw new Error(`KASPA_WASM_INIT_FAILED: ${t}`)}})().catch(e=>{throw zi=null,e})),zi}const Q1=new Set([12,15,18,21,24]),ah=dc;function fc(e){return e.trim().toLowerCase().split(/\s+/).join(" ")}function pc(e){const t=e.trim().split(/\s+/).filter(Boolean);if(!Q1.has(t.length))throw new Error(`Seed phrase must be a valid BIP39 length (12/15/18/21/24 words; got ${t.length}).`)}async function mc(e,t){const n=await ah(),{Mnemonic:r,XPrv:o}=n,s=new r(e).toSeed(t.mnemonicPassphrase||void 0),u=new o(s);return{kaspa:n,masterXPrv:u}}function X1(e,t){try{return e.derivePath(t)}catch(n){if(t.startsWith("m/"))try{return e.derivePath(t.slice(2))}catch{}const r=n instanceof Error?n.message:String(n);throw new Error(`DERIVATION_PATH_INVALID: ${t} (${r})`)}}function hc(e,t){const n=pt(t),{XPrivateKey:r}=e.kaspa,i=X1(e.masterXPrv,n.path).intoString("kprv"),s=new r(i,!1,BigInt(n.account));return{privKey:n.chain===1?s.changeKey(n.index):s.receiveKey(n.index),derivation:n}}function uh(e,t){return e.toKeypair().toAddress(t).toString()}async function ch(e,t,n={}){const r=await mc(e,n),{privKey:o,derivation:i}=hc(r,n.derivation);return{address:uh(o,t),derivation:i}}async function Y1(e,t=24){const{Mnemonic:n}=await ah();let r;try{r=n.random(t)}catch{r=n.random()}const o=r.phrase,{address:i,derivation:s}=await ch(o,e,{derivation:it});return{phrase:o,address:i,network:e,derivation:s}}async function Xd(e,t,n={}){pc(e);const r=fc(e),o=n.mnemonicPassphrase||void 0,{address:i,derivation:s}=await ch(r,t,n);return{phrase:r,address:i,network:t,mnemonicPassphrase:o,derivation:s}}async function J1(e,t,n={}){var w,x;pc(e);const r=fc(e),o=((w=n.basePaths)!=null&&w.length?n.basePaths:[...rc]).map(E=>String(E).trim()).filter(Boolean),[i,s]=n.accountRange??[0,4],[u,c]=n.indexRange??[0,9],d=((x=n.chains)!=null&&x.length?n.chains:[0,1]).filter(E=>E===0||E===1),m=Math.max(1,n.limit??60),g=await mc(r,n),h=[],S=new Set;e:for(let E=Math.max(0,i);E<=Math.max(i,s);E++)for(const f of d)for(let p=Math.max(0,u);p<=Math.max(u,c);p++)for(const y of o){const v=pt({path:y,account:E,chain:f,index:p});try{const{privKey:T}=hc(g,v),k=uh(T,t),C=k.toLowerCase();if(S.has(C))continue;if(S.add(C),h.push({address:k,derivation:v,derivationPath:Ht(v),chainLabel:oc(v.chain)}),h.length>=m)break e}catch{}}return h}async function Z1(e,t,n={}){var g;pc(e);const r=fc(e),o=await mc(r,n),{privKey:i}=hc(o,n.derivation),s=new TextEncoder().encode(t),{PrivateKey:u}=o.kaspa,c=i.toKeypair();let d;try{const h=c.privateKey??((g=c.toPrivateKey)==null?void 0:g.call(c));d=new u(h)}catch{d=i}const m=d.sign(s);return Array.from(m,h=>h.toString(16).padStart(2,"0")).join("")}var hi={},q1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},dh={},_t={};let gc;const eS=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];_t.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};_t.getSymbolTotalCodewords=function(t){return eS[t]};_t.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};_t.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');gc=t};_t.isKanjiModeEnabled=function(){return typeof gc<"u"};_t.toSJIS=function(t){return gc(t)};var el={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,o){if(e.isValid(r))return r;try{return t(r)}catch{return o}}})(el);function fh(){this.buffer=[],this.length=0}fh.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var tS=fh;function gi(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}gi.prototype.set=function(e,t,n,r){const o=e*this.size+t;this.data[o]=n,r&&(this.reservedBit[o]=!0)};gi.prototype.get=function(e,t){return this.data[e*this.size+t]};gi.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};gi.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var nS=gi,ph={};(function(e){const t=_t.getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const o=Math.floor(r/7)+2,i=t(r),s=i===145?26:Math.ceil((i-13)/(2*o-2))*2,u=[i-7];for(let c=1;c<o-1;c++)u[c]=u[c-1]-s;return u.push(6),u.reverse()},e.getPositions=function(r){const o=[],i=e.getRowColCoords(r),s=i.length;for(let u=0;u<s;u++)for(let c=0;c<s;c++)u===0&&c===0||u===0&&c===s-1||u===s-1&&c===0||o.push([i[u],i[c]]);return o}})(ph);var mh={};const rS=_t.getSymbolSize,Yd=7;mh.getPositions=function(t){const n=rS(t);return[[0,0],[n-Yd,0],[0,n-Yd]]};var hh={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},e.from=function(o){return e.isValid(o)?parseInt(o,10):void 0},e.getPenaltyN1=function(o){const i=o.size;let s=0,u=0,c=0,d=null,m=null;for(let g=0;g<i;g++){u=c=0,d=m=null;for(let h=0;h<i;h++){let S=o.get(g,h);S===d?u++:(u>=5&&(s+=t.N1+(u-5)),d=S,u=1),S=o.get(h,g),S===m?c++:(c>=5&&(s+=t.N1+(c-5)),m=S,c=1)}u>=5&&(s+=t.N1+(u-5)),c>=5&&(s+=t.N1+(c-5))}return s},e.getPenaltyN2=function(o){const i=o.size;let s=0;for(let u=0;u<i-1;u++)for(let c=0;c<i-1;c++){const d=o.get(u,c)+o.get(u,c+1)+o.get(u+1,c)+o.get(u+1,c+1);(d===4||d===0)&&s++}return s*t.N2},e.getPenaltyN3=function(o){const i=o.size;let s=0,u=0,c=0;for(let d=0;d<i;d++){u=c=0;for(let m=0;m<i;m++)u=u<<1&2047|o.get(d,m),m>=10&&(u===1488||u===93)&&s++,c=c<<1&2047|o.get(m,d),m>=10&&(c===1488||c===93)&&s++}return s*t.N3},e.getPenaltyN4=function(o){let i=0;const s=o.data.length;for(let c=0;c<s;c++)i+=o.data[c];return Math.abs(Math.ceil(i*100/s/5)-10)*t.N4};function n(r,o,i){switch(r){case e.Patterns.PATTERN000:return(o+i)%2===0;case e.Patterns.PATTERN001:return o%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(o+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return o*i%2+o*i%3===0;case e.Patterns.PATTERN110:return(o*i%2+o*i%3)%2===0;case e.Patterns.PATTERN111:return(o*i%3+(o+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(o,i){const s=i.size;for(let u=0;u<s;u++)for(let c=0;c<s;c++)i.isReserved(c,u)||i.xor(c,u,n(o,c,u))},e.getBestMask=function(o,i){const s=Object.keys(e.Patterns).length;let u=0,c=1/0;for(let d=0;d<s;d++){i(d),e.applyMask(d,o);const m=e.getPenaltyN1(o)+e.getPenaltyN2(o)+e.getPenaltyN3(o)+e.getPenaltyN4(o);e.applyMask(d,o),m<c&&(c=m,u=d)}return u}})(hh);var tl={};const On=el,Ui=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Fi=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];tl.getBlocksCount=function(t,n){switch(n){case On.L:return Ui[(t-1)*4+0];case On.M:return Ui[(t-1)*4+1];case On.Q:return Ui[(t-1)*4+2];case On.H:return Ui[(t-1)*4+3];default:return}};tl.getTotalCodewordsCount=function(t,n){switch(n){case On.L:return Fi[(t-1)*4+0];case On.M:return Fi[(t-1)*4+1];case On.Q:return Fi[(t-1)*4+2];case On.H:return Fi[(t-1)*4+3];default:return}};var gh={},nl={};const Do=new Uint8Array(512),js=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)Do[n]=t,js[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)Do[n]=Do[n-255]})();nl.log=function(t){if(t<1)throw new Error("log("+t+")");return js[t]};nl.exp=function(t){return Do[t]};nl.mul=function(t,n){return t===0||n===0?0:Do[js[t]+js[n]]};(function(e){const t=nl;e.mul=function(r,o){const i=new Uint8Array(r.length+o.length-1);for(let s=0;s<r.length;s++)for(let u=0;u<o.length;u++)i[s+u]^=t.mul(r[s],o[u]);return i},e.mod=function(r,o){let i=new Uint8Array(r);for(;i.length-o.length>=0;){const s=i[0];for(let c=0;c<o.length;c++)i[c]^=t.mul(o[c],s);let u=0;for(;u<i.length&&i[u]===0;)u++;i=i.slice(u)}return i},e.generateECPolynomial=function(r){let o=new Uint8Array([1]);for(let i=0;i<r;i++)o=e.mul(o,new Uint8Array([1,t.exp(i)]));return o}})(gh);const yh=gh;function yc(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}yc.prototype.initialize=function(t){this.degree=t,this.genPoly=yh.generateECPolynomial(this.degree)};yc.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const r=yh.mod(n,this.genPoly),o=this.degree-r.length;if(o>0){const i=new Uint8Array(this.degree);return i.set(r,o),i}return r};var oS=yc,Sh={},Xn={},Sc={};Sc.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var un={};const vh="[0-9]+",iS="[A-Z $%*+\\-./:]+";let ii="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ii=ii.replace(/u/g,"\\u");const sS="(?:(?![A-Z0-9 $%*+\\-./:]|"+ii+`)(?:.|[\r
]))+`;un.KANJI=new RegExp(ii,"g");un.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");un.BYTE=new RegExp(sS,"g");un.NUMERIC=new RegExp(vh,"g");un.ALPHANUMERIC=new RegExp(iS,"g");const lS=new RegExp("^"+ii+"$"),aS=new RegExp("^"+vh+"$"),uS=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");un.testKanji=function(t){return lS.test(t)};un.testNumeric=function(t){return aS.test(t)};un.testAlphanumeric=function(t){return uS.test(t)};(function(e){const t=Sc,n=un;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,s){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?i.ccBits[0]:s<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return n.testNumeric(i)?e.NUMERIC:n.testAlphanumeric(i)?e.ALPHANUMERIC:n.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function r(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+o)}}e.from=function(i,s){if(e.isValid(i))return i;try{return r(i)}catch{return s}}})(Xn);(function(e){const t=_t,n=tl,r=el,o=Xn,i=Sc,s=7973,u=t.getBCHDigit(s);function c(h,S,w){for(let x=1;x<=40;x++)if(S<=e.getCapacity(x,w,h))return x}function d(h,S){return o.getCharCountIndicator(h,S)+4}function m(h,S){let w=0;return h.forEach(function(x){const E=d(x.mode,S);w+=E+x.getBitsLength()}),w}function g(h,S){for(let w=1;w<=40;w++)if(m(h,w)<=e.getCapacity(w,S,o.MIXED))return w}e.from=function(S,w){return i.isValid(S)?parseInt(S,10):w},e.getCapacity=function(S,w,x){if(!i.isValid(S))throw new Error("Invalid QR Code version");typeof x>"u"&&(x=o.BYTE);const E=t.getSymbolTotalCodewords(S),f=n.getTotalCodewordsCount(S,w),p=(E-f)*8;if(x===o.MIXED)return p;const y=p-d(x,S);switch(x){case o.NUMERIC:return Math.floor(y/10*3);case o.ALPHANUMERIC:return Math.floor(y/11*2);case o.KANJI:return Math.floor(y/13);case o.BYTE:default:return Math.floor(y/8)}},e.getBestVersionForData=function(S,w){let x;const E=r.from(w,r.M);if(Array.isArray(S)){if(S.length>1)return g(S,E);if(S.length===0)return 1;x=S[0]}else x=S;return c(x.mode,x.getLength(),E)},e.getEncodedBits=function(S){if(!i.isValid(S)||S<7)throw new Error("Invalid QR Code version");let w=S<<12;for(;t.getBCHDigit(w)-u>=0;)w^=s<<t.getBCHDigit(w)-u;return S<<12|w}})(Sh);var xh={};const Ya=_t,wh=1335,cS=21522,Jd=Ya.getBCHDigit(wh);xh.getEncodedBits=function(t,n){const r=t.bit<<3|n;let o=r<<10;for(;Ya.getBCHDigit(o)-Jd>=0;)o^=wh<<Ya.getBCHDigit(o)-Jd;return(r<<10|o)^cS};var Eh={};const dS=Xn;function qr(e){this.mode=dS.NUMERIC,this.data=e.toString()}qr.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};qr.prototype.getLength=function(){return this.data.length};qr.prototype.getBitsLength=function(){return qr.getBitsLength(this.data.length)};qr.prototype.write=function(t){let n,r,o;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),o=parseInt(r,10),t.put(o,10);const i=this.data.length-n;i>0&&(r=this.data.substr(n),o=parseInt(r,10),t.put(o,i*3+1))};var fS=qr;const pS=Xn,Bl=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function eo(e){this.mode=pS.ALPHANUMERIC,this.data=e}eo.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};eo.prototype.getLength=function(){return this.data.length};eo.prototype.getBitsLength=function(){return eo.getBitsLength(this.data.length)};eo.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Bl.indexOf(this.data[n])*45;r+=Bl.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(Bl.indexOf(this.data[n]),6)};var mS=eo;const hS=Xn;function to(e){this.mode=hS.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}to.getBitsLength=function(t){return t*8};to.prototype.getLength=function(){return this.data.length};to.prototype.getBitsLength=function(){return to.getBitsLength(this.data.length)};to.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var gS=to;const yS=Xn,SS=_t;function no(e){this.mode=yS.KANJI,this.data=e}no.getBitsLength=function(t){return t*13};no.prototype.getLength=function(){return this.data.length};no.prototype.getBitsLength=function(){return no.getBitsLength(this.data.length)};no.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=SS.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var vS=no,Ah={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,r,o){var i={},s={};s[r]=0;var u=t.PriorityQueue.make();u.push(r,0);for(var c,d,m,g,h,S,w,x,E;!u.empty();){c=u.pop(),d=c.value,g=c.cost,h=n[d]||{};for(m in h)h.hasOwnProperty(m)&&(S=h[m],w=g+S,x=s[m],E=typeof s[m]>"u",(E||x>w)&&(s[m]=w,u.push(m,w),i[m]=d))}if(typeof o<"u"&&typeof s[o]>"u"){var f=["Could not find a path from ",r," to ",o,"."].join("");throw new Error(f)}return i},extract_shortest_path_from_predecessor_list:function(n,r){for(var o=[],i=r;i;)o.push(i),n[i],i=n[i];return o.reverse(),o},find_path:function(n,r,o){var i=t.single_source_shortest_paths(n,r,o);return t.extract_shortest_path_from_predecessor_list(i,o)},PriorityQueue:{make:function(n){var r=t.PriorityQueue,o={},i;n=n||{};for(i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);return o.queue=[],o.sorter=n.sorter||r.default_sorter,o},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var o={value:n,cost:r};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(Ah);var xS=Ah.exports;(function(e){const t=Xn,n=fS,r=mS,o=gS,i=vS,s=un,u=_t,c=xS;function d(f){return unescape(encodeURIComponent(f)).length}function m(f,p,y){const v=[];let T;for(;(T=f.exec(y))!==null;)v.push({data:T[0],index:T.index,mode:p,length:T[0].length});return v}function g(f){const p=m(s.NUMERIC,t.NUMERIC,f),y=m(s.ALPHANUMERIC,t.ALPHANUMERIC,f);let v,T;return u.isKanjiModeEnabled()?(v=m(s.BYTE,t.BYTE,f),T=m(s.KANJI,t.KANJI,f)):(v=m(s.BYTE_KANJI,t.BYTE,f),T=[]),p.concat(y,v,T).sort(function(C,P){return C.index-P.index}).map(function(C){return{data:C.data,mode:C.mode,length:C.length}})}function h(f,p){switch(p){case t.NUMERIC:return n.getBitsLength(f);case t.ALPHANUMERIC:return r.getBitsLength(f);case t.KANJI:return i.getBitsLength(f);case t.BYTE:return o.getBitsLength(f)}}function S(f){return f.reduce(function(p,y){const v=p.length-1>=0?p[p.length-1]:null;return v&&v.mode===y.mode?(p[p.length-1].data+=y.data,p):(p.push(y),p)},[])}function w(f){const p=[];for(let y=0;y<f.length;y++){const v=f[y];switch(v.mode){case t.NUMERIC:p.push([v,{data:v.data,mode:t.ALPHANUMERIC,length:v.length},{data:v.data,mode:t.BYTE,length:v.length}]);break;case t.ALPHANUMERIC:p.push([v,{data:v.data,mode:t.BYTE,length:v.length}]);break;case t.KANJI:p.push([v,{data:v.data,mode:t.BYTE,length:d(v.data)}]);break;case t.BYTE:p.push([{data:v.data,mode:t.BYTE,length:d(v.data)}])}}return p}function x(f,p){const y={},v={start:{}};let T=["start"];for(let k=0;k<f.length;k++){const C=f[k],P=[];for(let W=0;W<C.length;W++){const b=C[W],ee=""+k+W;P.push(ee),y[ee]={node:b,lastCount:0},v[ee]={};for(let ie=0;ie<T.length;ie++){const q=T[ie];y[q]&&y[q].node.mode===b.mode?(v[q][ee]=h(y[q].lastCount+b.length,b.mode)-h(y[q].lastCount,b.mode),y[q].lastCount+=b.length):(y[q]&&(y[q].lastCount=b.length),v[q][ee]=h(b.length,b.mode)+4+t.getCharCountIndicator(b.mode,p))}}T=P}for(let k=0;k<T.length;k++)v[T[k]].end=0;return{map:v,table:y}}function E(f,p){let y;const v=t.getBestModeForData(f);if(y=t.from(p,v),y!==t.BYTE&&y.bit<v.bit)throw new Error('"'+f+'" cannot be encoded with mode '+t.toString(y)+`.
 Suggested mode is: `+t.toString(v));switch(y===t.KANJI&&!u.isKanjiModeEnabled()&&(y=t.BYTE),y){case t.NUMERIC:return new n(f);case t.ALPHANUMERIC:return new r(f);case t.KANJI:return new i(f);case t.BYTE:return new o(f)}}e.fromArray=function(p){return p.reduce(function(y,v){return typeof v=="string"?y.push(E(v,null)):v.data&&y.push(E(v.data,v.mode)),y},[])},e.fromString=function(p,y){const v=g(p,u.isKanjiModeEnabled()),T=w(v),k=x(T,y),C=c.find_path(k.map,"start","end"),P=[];for(let W=1;W<C.length-1;W++)P.push(k.table[C[W]].node);return e.fromArray(S(P))},e.rawSplit=function(p){return e.fromArray(g(p,u.isKanjiModeEnabled()))}})(Eh);const rl=_t,Ul=el,wS=tS,ES=nS,AS=ph,kS=mh,Ja=hh,Za=tl,TS=oS,Os=Sh,IS=xh,CS=Xn,Fl=Eh;function _S(e,t){const n=e.size,r=kS.getPositions(t);for(let o=0;o<r.length;o++){const i=r[o][0],s=r[o][1];for(let u=-1;u<=7;u++)if(!(i+u<=-1||n<=i+u))for(let c=-1;c<=7;c++)s+c<=-1||n<=s+c||(u>=0&&u<=6&&(c===0||c===6)||c>=0&&c<=6&&(u===0||u===6)||u>=2&&u<=4&&c>=2&&c<=4?e.set(i+u,s+c,!0,!0):e.set(i+u,s+c,!1,!0))}}function NS(e){const t=e.size;for(let n=8;n<t-8;n++){const r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function PS(e,t){const n=AS.getPositions(t);for(let r=0;r<n.length;r++){const o=n[r][0],i=n[r][1];for(let s=-2;s<=2;s++)for(let u=-2;u<=2;u++)s===-2||s===2||u===-2||u===2||s===0&&u===0?e.set(o+s,i+u,!0,!0):e.set(o+s,i+u,!1,!0)}}function RS(e,t){const n=e.size,r=Os.getEncodedBits(t);let o,i,s;for(let u=0;u<18;u++)o=Math.floor(u/3),i=u%3+n-8-3,s=(r>>u&1)===1,e.set(o,i,s,!0),e.set(i,o,s,!0)}function $l(e,t,n){const r=e.size,o=IS.getEncodedBits(t,n);let i,s;for(i=0;i<15;i++)s=(o>>i&1)===1,i<6?e.set(i,8,s,!0):i<8?e.set(i+1,8,s,!0):e.set(r-15+i,8,s,!0),i<8?e.set(8,r-i-1,s,!0):i<9?e.set(8,15-i-1+1,s,!0):e.set(8,15-i-1,s,!0);e.set(r-8,8,1,!0)}function bS(e,t){const n=e.size;let r=-1,o=n-1,i=7,s=0;for(let u=n-1;u>0;u-=2)for(u===6&&u--;;){for(let c=0;c<2;c++)if(!e.isReserved(o,u-c)){let d=!1;s<t.length&&(d=(t[s]>>>i&1)===1),e.set(o,u-c,d),i--,i===-1&&(s++,i=7)}if(o+=r,o<0||n<=o){o-=r,r=-r;break}}}function jS(e,t,n){const r=new wS;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),CS.getCharCountIndicator(c.mode,e)),c.write(r)});const o=rl.getSymbolTotalCodewords(e),i=Za.getTotalCodewordsCount(e,t),s=(o-i)*8;for(r.getLengthInBits()+4<=s&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const u=(s-r.getLengthInBits())/8;for(let c=0;c<u;c++)r.put(c%2?17:236,8);return OS(r,e,t)}function OS(e,t,n){const r=rl.getSymbolTotalCodewords(t),o=Za.getTotalCodewordsCount(t,n),i=r-o,s=Za.getBlocksCount(t,n),u=r%s,c=s-u,d=Math.floor(r/s),m=Math.floor(i/s),g=m+1,h=d-m,S=new TS(h);let w=0;const x=new Array(s),E=new Array(s);let f=0;const p=new Uint8Array(e.buffer);for(let C=0;C<s;C++){const P=C<c?m:g;x[C]=p.slice(w,w+P),E[C]=S.encode(x[C]),w+=P,f=Math.max(f,P)}const y=new Uint8Array(r);let v=0,T,k;for(T=0;T<f;T++)for(k=0;k<s;k++)T<x[k].length&&(y[v++]=x[k][T]);for(T=0;T<h;T++)for(k=0;k<s;k++)y[v++]=E[k][T];return y}function LS(e,t,n,r){let o;if(Array.isArray(e))o=Fl.fromArray(e);else if(typeof e=="string"){let d=t;if(!d){const m=Fl.rawSplit(e);d=Os.getBestVersionForData(m,n)}o=Fl.fromString(e,d||40)}else throw new Error("Invalid data");const i=Os.getBestVersionForData(o,n);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const s=jS(t,n,o),u=rl.getSymbolSize(t),c=new ES(u);return _S(c,t),NS(c),PS(c,t),$l(c,n,0),t>=7&&RS(c,t),bS(c,s),isNaN(r)&&(r=Ja.getBestMask(c,$l.bind(null,c,n))),Ja.applyMask(r,c),$l(c,n,r),{modules:c,version:t,errorCorrectionLevel:n,maskPattern:r,segments:o}}dh.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=Ul.M,o,i;return typeof n<"u"&&(r=Ul.from(n.errorCorrectionLevel,Ul.M),o=Os.from(n.version),i=Ja.from(n.maskPattern),n.toSJISFunc&&rl.setToSJISFunction(n.toSJISFunc)),LS(t,o,r,i)};var kh={},vc={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const o=parseInt(r.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const o=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,s=r.scale||4;return{width:i,scale:i?4:s,margin:o,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,o){return o.width&&o.width>=r+o.margin*2?o.width/(r+o.margin*2):o.scale},e.getImageWidth=function(r,o){const i=e.getScale(r,o);return Math.floor((r+o.margin*2)*i)},e.qrToImageData=function(r,o,i){const s=o.modules.size,u=o.modules.data,c=e.getScale(s,i),d=Math.floor((s+i.margin*2)*c),m=i.margin*c,g=[i.color.light,i.color.dark];for(let h=0;h<d;h++)for(let S=0;S<d;S++){let w=(h*d+S)*4,x=i.color.light;if(h>=m&&S>=m&&h<d-m&&S<d-m){const E=Math.floor((h-m)/c),f=Math.floor((S-m)/c);x=g[u[E*s+f]?1:0]}r[w++]=x.r,r[w++]=x.g,r[w++]=x.b,r[w]=x.a}}})(vc);(function(e){const t=vc;function n(o,i,s){o.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=s,i.width=s,i.style.height=s+"px",i.style.width=s+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,s,u){let c=u,d=s;typeof c>"u"&&(!s||!s.getContext)&&(c=s,s=void 0),s||(d=r()),c=t.getOptions(c);const m=t.getImageWidth(i.modules.size,c),g=d.getContext("2d"),h=g.createImageData(m,m);return t.qrToImageData(h.data,i,c),n(g,d,m),g.putImageData(h,0,0),d},e.renderToDataURL=function(i,s,u){let c=u;typeof c>"u"&&(!s||!s.getContext)&&(c=s,s=void 0),c||(c={});const d=e.render(i,s,c),m=c.type||"image/png",g=c.rendererOpts||{};return d.toDataURL(m,g.quality)}})(kh);var Th={};const DS=vc;function Zd(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Kl(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function MS(e,t,n){let r="",o=0,i=!1,s=0;for(let u=0;u<e.length;u++){const c=Math.floor(u%t),d=Math.floor(u/t);!c&&!i&&(i=!0),e[u]?(s++,u>0&&c>0&&e[u-1]||(r+=i?Kl("M",c+n,.5+d+n):Kl("m",o,0),o=0,i=!1),c+1<t&&e[u+1]||(r+=Kl("h",s),s=0)):o++}return r}Th.render=function(t,n,r){const o=DS.getOptions(n),i=t.modules.size,s=t.modules.data,u=i+o.margin*2,c=o.color.light.a?"<path "+Zd(o.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",d="<path "+Zd(o.color.dark,"stroke")+' d="'+MS(s,i,o.margin)+'"/>',m='viewBox="0 0 '+u+" "+u+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+m+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof r=="function"&&r(null,h),h};const zS=q1,qa=dh,Ih=kh,BS=Th;function xc(e,t,n,r,o){const i=[].slice.call(arguments,1),s=i.length,u=typeof i[s-1]=="function";if(!u&&!zS())throw new Error("Callback required as last argument");if(u){if(s<2)throw new Error("Too few arguments provided");s===2?(o=n,n=t,t=r=void 0):s===3&&(t.getContext&&typeof o>"u"?(o=r,r=void 0):(o=r,r=n,n=t,t=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(n=t,t=r=void 0):s===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(c,d){try{const m=qa.create(n,r);c(e(m,t,r))}catch(m){d(m)}})}try{const c=qa.create(n,r);o(null,e(c,t,r))}catch(c){o(c)}}hi.create=qa.create;hi.toCanvas=xc.bind(null,Ih.render);hi.toDataURL=xc.bind(null,Ih.renderToDataURL);hi.toString=xc.bind(null,function(e,t,n){return BS.render(e,n)});const US=3e4,wc=new Map;function FS(e){return String(e||"").trim().toLowerCase()}function $S(e,t){if(e!==0)return!1;const n=FS(t);return/^20[0-9a-f]{64}ac$/.test(n)}function KS(e,t){return $S(e,t)?"standard":"covenant"}function WS(e){const t=wc.get(e.toLowerCase());return!t||Date.now()-t.lastSyncAt>US?null:t}function VS(e){wc.delete(e.toLowerCase())}function HS(e){const t=e.utxoEntry.scriptPublicKey.version,n=e.utxoEntry.scriptPublicKey.scriptPublicKey;return{txId:e.outpoint.transactionId,outputIndex:e.outpoint.index,address:e.address,amount:BigInt(e.utxoEntry.amount),scriptPublicKey:n,scriptVersion:t,scriptClass:KS(t,n),blockDaaScore:BigInt(e.utxoEntry.blockDaaScore),isCoinbase:e.utxoEntry.isCoinbase}}async function Ch(e,t,n=new Set,r=0n){const i=(await I1(e,t)).map(HS),s=i.reduce((c,d)=>c+d.amount,0n),u={address:e.toLowerCase(),utxos:i,confirmedBalance:s,pendingOutbound:r,lastSyncAt:Date.now()};return wc.set(e.toLowerCase(),u),u}async function Ec(e,t,n,r){const o=WS(e);return o||Ch(e,t,n,r)}function qd(e,t,n,r=new Set){const o=e.filter(d=>!r.has(`${d.txId}:${d.outputIndex}`)),i=o.filter(d=>(d.scriptClass??"standard")==="standard").sort((d,m)=>m.amount>d.amount?1:m.amount<d.amount?-1:0),s=t+n;let u=0n;const c=[];for(const d of i)if(c.push(d),u+=d.amount,u>=s)break;if(u<s)throw o.reduce((m,g)=>m+g.amount,0n)>=s?new Error("COVENANT_ONLY_FUNDS"):new Error("INSUFFICIENT_FUNDS");return{selected:c,total:u}}function sr(e){return Number(e)/1e8}function GS(e){return BigInt(Math.floor(e*1e8))}const eu="forgeos.pending.txs.v1",QS=7*24*60*60*1e3;let sn=[],ef=!1;function _h(e){return["CONFIRMED","FAILED","CANCELLED"].includes(e.state)}async function Nh(){return new Promise(e=>{const t=sn.map(JS);chrome.storage.local.set({[eu]:JSON.stringify(t)},e)})}async function Ac(){return ef?sn:(ef=!0,new Promise(e=>{chrome.storage.local.get(eu,t=>{try{const n=t[eu];if(!n){e([]);return}const r=JSON.parse(n).map(ZS),o=Date.now()-QS;sn=r.filter(i=>!(_h(i)&&i.builtAt<o))}catch{sn=[]}e(sn)})}))}async function Ph(e){await Ac(),sn.push(e),await Nh()}async function Et(e){await Ac();const t=sn.findIndex(n=>n.id===e.id);t>=0?sn[t]=e:sn.push(e),await Nh()}async function XS(e){return await Ac(),sn.filter(t=>t.fromAddress.toLowerCase()===e.toLowerCase()&&!_h(t))}async function YS(e){const t=await XS(e),n=new Set;for(const r of t)for(const o of r.inputs)n.add(`${o.txId}:${o.outputIndex}`);return n}function JS(e){return{...e,fee:e.fee.toString(),changeOutput:e.changeOutput?{...e.changeOutput,amount:e.changeOutput.amount.toString()}:null,outputs:e.outputs.map(t=>({...t,amount:t.amount.toString()})),inputs:e.inputs.map(t=>({...t,amount:t.amount.toString(),blockDaaScore:t.blockDaaScore.toString()}))}}function ZS(e){return{...e,fee:BigInt(e.fee),changeOutput:e.changeOutput?{...e.changeOutput,amount:BigInt(e.changeOutput.amount)}:null,outputs:e.outputs.map(t=>({...t,amount:BigInt(t.amount)})),inputs:e.inputs.map(t=>({...t,amount:BigInt(t.amount),blockDaaScore:BigInt(t.blockDaaScore),scriptClass:t.scriptClass==="covenant"?"covenant":"standard"}))}}var Cf;const Wl=((Cf=import.meta)==null?void 0:Cf.env)??{};function kc(e,t,n,r){const o=Number(Wl==null?void 0:Wl[e]);return Number.isFinite(o)?Math.min(r,Math.max(n,Math.floor(o))):t}const qS=kc("VITE_EXT_TX_FEE_SAFETY_BPS",11500,1e4,3e4),tf=BigInt(kc("VITE_EXT_TX_FEE_MIN_SOMPI",1e3,1,1e9)),nf=BigInt(kc("VITE_EXT_TX_FEE_MAX_SOMPI",2e8,1e3,5e9));function rf(e){const t=(e*BigInt(qS)+9999n)/10000n;return t<tf?tf:t>nf?nf:t}function ev(e){return null}const tv=dc;async function Rh(e,t,n,r){const o=GS(n);if(o<=0n)throw new Error("AMOUNT_TOO_SMALL");const i=ev(),s=o+(i??0n),u=i?3:2,c=await YS(e),d=await Ec(e,r),m=rf(await Ga(1,u,r)),{selected:g,total:h}=qd(d.utxos,s,m,c),S=rf(await Ga(g.length,u,r));let w=g,x=h;if(h<s+S){const v=qd(d.utxos,s,S,c);w=v.selected,x=v.total}const E=x-s-S,f=[{address:t,amount:o}],p=E>0n?{address:e,amount:E}:null;return{id:crypto.randomUUID(),state:"BUILDING",fromAddress:e,network:r,inputs:w,outputs:f,changeOutput:p,fee:S,platformFee:i??void 0,builtAt:Date.now()}}async function nv(e){const t=await tv(),n=t.UtxoEntry,r=e.inputs.map(d=>{const m={address:d.address,outpoint:{transactionId:d.txId,index:d.outputIndex},amount:d.amount,scriptPublicKey:{version:d.scriptVersion,scriptPublicKey:d.scriptPublicKey},blockDaaScore:d.blockDaaScore,isCoinbase:d.isCoinbase};if(n)try{return new n(m)}catch{return m}return m}),o=e.outputs.map(d=>({address:d.address,amount:d.amount})),i={entries:r,outputs:o,changeAddress:e.fromAddress,priorityFee:{sompi:e.fee},networkId:e.network},s=t.Generator;if(!s)throw new Error("WASM_GENERATOR_UNAVAILABLE: kaspa-wasm Generator class not found. Ensure kaspa-wasm  0.13.0 is installed.");const c=new s(i).next();if(!c)throw new Error("GENERATOR_EMPTY: Generator produced no transaction. Check UTXO availability.");return c}const rv={mainnet:"kaspa:","testnet-10":"kaspatest:","testnet-11":"kaspatest:","testnet-12":"kaspatest:"};async function bh(e){var c,d;const t=[];let n;try{const m=e.inputs.filter(h=>(h.scriptClass??"standard")==="covenant");m.length>0&&t.push(`COVENANT_INPUT_UNSUPPORTED: ${m.length} covenant UTXO(s) require covenant-aware spend logic`),n=await Ec(e.fromAddress,e.network);const g=new Set(n.utxos.map(h=>`${h.txId}:${h.outputIndex}`));for(const h of e.inputs){const S=`${h.txId}:${h.outputIndex}`;g.has(S)||t.push(`UTXO_SPENT: input ${S} no longer available`)}}catch{t.push("UTXO_FETCH_FAILED: could not verify input availability")}let r;try{r=await Ga(e.inputs.length,e.outputs.length+(e.changeOutput?1:0),e.network),e.fee<r&&t.push(`FEE_TOO_LOW: estimated ${e.fee.toString()} sompi, network requires ${r.toString()} sompi`)}catch{r=e.fee}const o=e.inputs.reduce((m,g)=>m+g.amount,0n),i=e.outputs.reduce((m,g)=>m+g.amount,0n),s=((c=e.changeOutput)==null?void 0:c.amount)??0n;o!==i+s+e.fee&&t.push(`BALANCE_MISMATCH: inputs=${o} != outputs=${i} + change=${s} + fee=${e.fee}`);for(const m of e.outputs)ri(m.address)||t.push(`INVALID_ADDRESS: "${m.address}" is not a valid Kaspa address`);e.changeOutput&&!ri(e.changeOutput.address)&&t.push(`INVALID_CHANGE_ADDRESS: "${e.changeOutput.address}"`);const u=rv[e.network];if(u){for(const m of e.outputs)m.address.toLowerCase().startsWith(u)||t.push(`NETWORK_MISMATCH: output address "${m.address}" does not match network "${e.network}"`);e.changeOutput&&!e.changeOutput.address.toLowerCase().startsWith(u)&&t.push(`NETWORK_MISMATCH: change address "${e.changeOutput.address}" does not match network "${e.network}"`)}return{valid:t.length===0,estimatedFee:r??e.fee,changeAmount:((d=e.changeOutput)==null?void 0:d.amount)??0n,errors:t}}const ov=dc;async function jh(e){const t=Vn();if(!t||!t.mnemonic)throw new Error("WALLET_LOCKED");const n=await ov(),{Mnemonic:r,XPrv:o,XPrivateKey:i}=n;let s=null;try{const u=pt(t.derivation??it),d=new r(t.mnemonic).toSeed(t.mnemonicPassphrase||void 0),m=new o(d);let g=m;try{g=m.derivePath(u.path)}catch(y){if(u.path.startsWith("m/"))g=m.derivePath(u.path.slice(2));else throw y}const h=g.intoString("kprv"),S=new i(h,!1,BigInt(u.account)),w=u.chain===1?S.changeKey(u.index):S.receiveKey(u.index),x=w.toKeypair();if(s=x.privateKey??(typeof x.toPrivateKey=="function"?x.toPrivateKey():null),!s){const y=n.PrivateKey,v=typeof w.toString=="function"?w.toString("hex"):null;y&&v&&(s=new y(v))}if(!s)throw new Error("PRIVKEY_UNAVAILABLE: Could not extract PrivateKey from keypair. Verify kaspa-wasm version compatibility.");const E=await nv(e);await E.sign([s]);let f;typeof E.serializeToObject=="function"?f=JSON.stringify({transaction:E.serializeToObject()}):typeof E.toJSON=="function"?f=E.toJSON():f=JSON.stringify({transaction:E});const p=E.id;return{...e,state:"SIGNED",signedTxPayload:f,txId:p,signedAt:Date.now()}}catch(u){const c=u instanceof Error?u.message:String(u);throw new Error(`SIGN_FAILED: ${c}`)}finally{s=null}}const iv=1e3,sv=5*6e4;async function Oh(e){if(e.txId)return console.info(`[broadcast] tx ${e.id} already has txId=${e.txId}; skipping re-broadcast`),{...e,state:"CONFIRMING"};if(!e.signedTxPayload)throw new Error("NOT_SIGNED");let t;try{t=JSON.parse(e.signedTxPayload)}catch{throw new Error("BROADCAST_FAILED: signedTxPayload is not valid JSON")}let n;try{n=await P1(t,e.network)}catch(o){const i=o instanceof Error?o.message:String(o),s={...e,state:"FAILED",error:`BROADCAST_FAILED: ${i}`};throw await Et(s),new Error(`BROADCAST_FAILED: ${i}`)}const r={...e,state:"BROADCASTING",txId:n,broadcastAt:Date.now(),signedTxPayload:void 0};return await Et(r),VS(e.fromAddress),{...r,state:"CONFIRMING"}}async function lv(e,t=()=>{}){if(!e.txId)throw new Error("NO_TXID: cannot poll without txId");const n=Date.now()+sv;let r={...e,state:"CONFIRMING"};for(;Date.now()<n;){await av(iv);try{const o=await eh(e.txId,e.network);if(o!=null&&o.acceptingBlockHash)return r={...r,state:"CONFIRMED",confirmations:1,confirmedAt:Date.now(),signedTxPayload:void 0},await Et(r),t(r),r}catch{}}throw r={...r,state:"FAILED",error:"CONFIRM_TIMEOUT: transaction not confirmed within 5 minutes"},await Et(r),t(r),new Error(r.error)}function av(e){return new Promise(t=>setTimeout(t,e))}async function uv(e,t){const n=await Oh(e);return t(n),lv(n,t).catch(()=>{}),n}const of=!0,cv=!0,Lh={tokens:{KAS:{id:"KAS",symbol:"KAS",name:"Kaspa",decimals:8,assetId:null,enabled:!0,disabledReason:null},USDT:{id:"USDT",symbol:"USDT",name:"Tether USD",decimals:6,assetId:null,enabled:of,disabledReason:null},USDC:{id:"USDC",symbol:"USDC",name:"USD Coin",decimals:6,assetId:null,enabled:of,disabledReason:null},ZRX:{id:"ZRX",symbol:"0x",name:"0x Protocol",decimals:18,assetId:null,enabled:cv,disabledReason:null}}};function sf(e){var t;return((t=Lh.tokens[e])==null?void 0:t.enabled)??!1}function Dh(){return Object.values(Lh.tokens)}const dv={default:a.border,accent:a.accent,warn:a.warn,danger:a.danger,purple:a.purple,success:a.ok},fv={default:"rgba(143,160,181,0.08)",accent:"rgba(57,221,182,0.12)",warn:"rgba(247,178,103,0.12)",danger:"rgba(255,93,122,0.12)",purple:"rgba(143,123,255,0.12)",success:"rgba(57,221,182,0.1)"},lr={padding:"13px 15px 15px",display:"flex",flexDirection:"column",gap:11,minWidth:0};function ro(){return{backgroundColor:a.bg,backgroundImage:["radial-gradient(120% 95% at 50% -8%, rgba(57,221,182,0.18) 0%, rgba(57,221,182,0.05) 40%, transparent 72%)","radial-gradient(88% 86% at 92% 100%, rgba(57,221,182,0.12) 0%, transparent 70%)","radial-gradient(80% 90% at 8% 88%, rgba(23,64,74,0.3) 0%, transparent 74%)","linear-gradient(165deg, #0b141f 0%, #070e16 52%, #05090f 100%)","repeating-linear-gradient(0deg, transparent 0px, transparent 31px, rgba(57,221,182,0.06) 32px)","repeating-linear-gradient(90deg, transparent 0px, transparent 31px, rgba(57,221,182,0.05) 32px)"].join(", "),backgroundSize:"auto, auto, auto, auto, 32px 32px, 32px 32px",backgroundPosition:"center, center, center, center, center, center"}}function et(e="default",t=!1){const n=dv[e],r=fv[e];return{background:"linear-gradient(155deg, rgba(11,17,24,0.92) 0%, rgba(8,13,20,0.86) 100%)",border:`1px solid ${e==="default"?a.border:`${n}32`}`,borderRadius:12,padding:t?"10px 12px":"12px 14px",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.04), 0 10px 22px rgba(0,0,0,0.22)",position:"relative",overflow:"hidden",minWidth:0,overflowWrap:"anywhere",backgroundImage:[`radial-gradient(circle at 100% 0%, ${r}, transparent 46%)`,"linear-gradient(155deg, rgba(11,17,24,0.92) 0%, rgba(8,13,20,0.86) 100%)"].join(", ")}}function Le(){return{background:"linear-gradient(180deg, rgba(5,7,10,0.62), rgba(7,11,16,0.72))",border:`1px solid ${a.border}`,borderRadius:10,padding:"10px 12px",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.02)",minWidth:0,overflowWrap:"anywhere"}}const Mt={fontSize:8,color:a.dim,letterSpacing:"0.14em",fontWeight:700,...j},cr={fontSize:10,color:a.text,fontWeight:700,letterSpacing:"0.08em",...j};function Mh(e=1){return{height:1,background:`rgba(33,48,67,${.9*e})`}}function xe(e=a.dim,t=!1){return{background:t?"linear-gradient(180deg, rgba(14,22,32,0.9), rgba(9,14,20,0.9))":"rgba(16,25,35,0.55)",border:`1px solid ${e===a.dim?a.border:`${e}40`}`,borderRadius:8,color:e,cursor:"pointer",fontSize:10,fontWeight:700,letterSpacing:"0.08em",...j,boxShadow:t?"0 6px 14px rgba(0,0,0,0.18)":void 0,whiteSpace:"normal",lineHeight:1.2,textAlign:"center"}}function Nn(e=!0){return{background:e?`linear-gradient(90deg, ${a.accent}, #7BE9CF)`:"rgba(33,48,67,0.55)",color:e?"#04110E":a.dim,border:"none",borderRadius:8,cursor:e?"pointer":"not-allowed",fontSize:10,fontWeight:700,letterSpacing:"0.08em",...j,boxShadow:e?"0 8px 18px rgba(57,221,182,0.16)":void 0,whiteSpace:"normal",lineHeight:1.2,textAlign:"center"}}function zh(e=!1){return{width:"100%",boxSizing:"border-box",background:"linear-gradient(180deg, rgba(8,13,20,0.82), rgba(9,14,21,0.9))",border:`1px solid ${e?a.danger:a.border}`,borderRadius:8,padding:"9px 11px",color:a.text,fontSize:10,...j,outline:"none",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.02)",minWidth:0}}const lf={mainnet:"https://explorer.kaspa.org","testnet-10":"https://explorer-tn10.kaspa.org","testnet-11":"https://explorer-tn11.kaspa.org","testnet-12":"https://explorer-tn12.kaspa.org"};function pv({address:e,balance:t,usdPrice:n,network:r,hideBalances:o=!1,mode:i,modeRequestId:s,onModeConsumed:u,onBalanceInvalidated:c}){const[d,m]=A.useState("idle"),[g,h]=A.useState(!1),[S,w]=A.useState(""),[x,E]=A.useState(""),[f,p]=A.useState(null),[y,v]=A.useState([]),[T,k]=A.useState(null),[C,P]=A.useState(null),[W,b]=A.useState(!1),[ee,ie]=A.useState(null),[q,Re]=A.useState(null),[ce,J]=A.useState([]),[te,O]=A.useState(!1),[z,U]=A.useState(null),[F,Q]=A.useState(null),[pe,de]=A.useState(0);A.useEffect(()=>{i&&(i==="send"?(h(!1),m("form"),p(null),v([]),P(null),k(null)):(h(!0),m("idle")),u==null||u())},[i,s,u]),A.useEffect(()=>{let L=!1;return(async()=>{if(!g||!e){ie(null),Re(null);return}Re(null);try{const me=await hi.toDataURL(e,{errorCorrectionLevel:"M",margin:1,width:220,color:{dark:"#39DDB6",light:"#0A1118"}});if(L)return;ie(me)}catch(me){if(L)return;ie(null),Re(me instanceof Error?me.message:"Failed to generate QR code.")}})().catch(()=>{}),()=>{L=!0}},[g,e]),A.useEffect(()=>{let L=!0;const V=async(Zt=!1)=>{if(!e){if(!L)return;J([]),U(null),Q(null),O(!1);return}if(L){O(!0),Zt&&U(null);try{const ct=Zt?await Ch(e,r):await Ec(e,r);if(!L)return;const Kt=[...ct.utxos].sort((_,D)=>_.amount===D.amount?0:_.amount>D.amount?-1:1);J(Kt),Q(Date.now()),U(null)}catch(ct){if(!L)return;U(ct instanceof Error?ct.message:"Failed to load UTXOs.")}finally{L&&O(!1)}}};V(!0).catch(()=>{});const me=window.setInterval(()=>{V(!1).catch(()=>{})},25e3);return()=>{L=!1,clearInterval(me)}},[e,r,pe]);const X=Vn(),ae=!!(X!=null&&X.mnemonic),B=r==="mainnet"?"kaspa:":"kaspatest:",se=ri(S)&&S.toLowerCase().startsWith(B),Se=parseFloat(x),le=Se>0&&(t===null||Se<=t),Ue=se&&le,Nt=async()=>{if(!e||!Ue)return;m("building"),v([]),P(null);let L;try{L=await Rh(e,S.trim(),Se,r),await Ph(L),p(L)}catch(V){const me=V instanceof Error?V.message:String(V);P(me==="INSUFFICIENT_FUNDS"?"Insufficient balance including fees.":me==="COVENANT_ONLY_FUNDS"?"Funds are currently locked in covenant outputs. Standard send only spends standard UTXOs.":`Build failed: ${me}`),m("error");return}m("dry_run");try{const V=await bh(L);if(!V.valid){v(V.errors),m("error"),await Et({...L,state:"DRY_RUN_FAIL",error:V.errors.join("; ")});return}const me={...L,state:"DRY_RUN_OK",fee:V.estimatedFee};p(me),await Et(me)}catch(V){P(`Validation failed: ${V instanceof Error?V.message:String(V)}`),m("error");return}m("confirm")},Ft=async()=>{if(!f||!ae)return;m("signing");let L;try{L=await jh(f),p(L),await Et(L)}catch(V){const me=V instanceof Error?V.message:String(V);P(me==="WALLET_LOCKED"?"Wallet locked  please unlock first.":`Signing failed: ${me}`),m("error");return}m("broadcast");try{await uv(L,async V=>{p(V),await Et(V),V.state==="CONFIRMED"&&(k(V.txId??null),m("done"),de(me=>me+1),c==null||c()),V.state==="FAILED"&&(P(V.error??"Transaction failed."),m("error"))})}catch(V){P(V instanceof Error?V.message:"Transaction timed out awaiting confirmation."),m("error")}},rt=async()=>{f&&await Et({...f,state:"CANCELLED"}),Xe()},Xe=()=>{m("idle"),p(null),v([]),P(null),k(null)},be=async()=>{if(e)try{await navigator.clipboard.writeText(e),b(!0),setTimeout(()=>b(!1),2e3)}catch{}},Ye=[...Dh()].sort((L,V)=>L.id==="KAS"?-1:V.id==="KAS"?1:0),Fe={KAS:"../icons/kaspa-logo.png",USDT:"../icons/usdt.png",USDC:"../icons/usdc.png"},St={KAS:t??0,USDT:0,USDC:0,ZRX:0},ge=lf[r]??lf.mainnet,$=e?`${ge}/addresses/${e}`:ge,ne=ce.reduce((L,V)=>L+V.amount,0n),I=sr(ne),K=ce.length?sr(ce[0].amount):0,G=ce.filter(L=>(L.scriptClass??"standard")==="covenant").length,Ee=ce.length-G,Ve=F?new Date(F).toLocaleTimeString([],{hour12:!1}):"",$t=!!(e&&!te&&!z&&F!==null),Yn=$t?`ON-CHAIN VERIFIED  ${r.toUpperCase()}  ${Ve}`:te?"VERIFYING ON-CHAIN STATE":"ON-CHAIN VERIFICATION PENDING",Jn=L=>o?"":L,vt=(L,V)=>o?" KAS":`${Ot(L,V)} KAS`,fe=(L,V)=>o?"$":`$${Ot(L,V)}`,Ae=d!=="idle"||g,cn=d==="form"||d==="error"||d==="done",Pt=g||cn,Zn=()=>{g&&h(!1),d!=="idle"&&cn&&Xe()},xr=l.jsxs(l.Fragment,{children:[d==="form"&&l.jsxs("div",{style:Mr(),children:[l.jsxs("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-between",marginBottom:6},children:[l.jsx("div",{style:cr,children:"SEND KAS"}),l.jsxs("div",{style:{display:"flex",gap:8},children:[t!==null&&l.jsxs("div",{style:{fontSize:8,color:a.dim},children:["Bal: ",vt(t,2),n>0?`  ${fe(t*n,2)}`:""]}),l.jsx("button",{onClick:()=>m("idle"),style:{background:"none",border:"none",color:a.dim,fontSize:8,cursor:"pointer",...j},children:""})]})]}),!ae&&l.jsx("div",{style:{...Le(),fontSize:8,color:a.dim,marginBottom:6,lineHeight:1.4},children:"External wallet: signing opens in Forge-OS."}),l.jsx("input",{value:S,onChange:L=>w(L.target.value),placeholder:`Recipient ${B}qp`,style:af(!!(S&&!se))}),S&&!se&&l.jsx("div",{style:{fontSize:8,color:a.danger},children:S.toLowerCase().startsWith(B)?"Invalid Kaspa address":`Must start with "${B}" on ${r}`}),l.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[l.jsx("input",{value:x,onChange:L=>E(L.target.value),placeholder:"Amount (KAS)",type:"number",min:"0",style:{...af(!1),paddingRight:48}}),t!==null&&t>0&&l.jsx("button",{onClick:()=>{const L=Math.max(0,t-.01);E(L>0?String(parseFloat(L.toFixed(4))):"")},style:{position:"absolute",right:6,background:`${a.accent}20`,border:`1px solid ${a.accent}50`,borderRadius:4,padding:"2px 6px",color:a.accent,fontSize:8,fontWeight:700,cursor:"pointer",...j,letterSpacing:"0.06em"},children:"MAX"})]}),Se>0&&n>0&&l.jsxs("div",{style:{fontSize:8,color:a.dim},children:[" ",fe(Se*n,2)]}),l.jsx("button",{onClick:ae?Nt:()=>chrome.tabs.create({url:`https://forge-os.xyz?send=1&to=${encodeURIComponent(S)}&amount=${encodeURIComponent(x)}`}),disabled:!Ue,style:Vl(Ue),children:ae?"PREVIEW SEND ":"OPEN IN FORGE-OS "})]}),(d==="building"||d==="dry_run")&&l.jsx(Hl,{icon:"",title:d==="building"?"SELECTING INPUTS":"VALIDATING",sub:d==="building"?"Fetching UTXOs and estimating network fee.":"Running 5 security checks.",color:a.accent}),d==="confirm"&&f&&l.jsx(gv,{tx:f,usdPrice:n,onConfirm:Ft,onCancel:rt}),d==="signing"&&l.jsx(Hl,{icon:"",title:"SIGNING",sub:"Deriving key and signing inputs with kaspa-wasm.",color:a.warn}),d==="broadcast"&&l.jsx(Hl,{icon:"",title:"BROADCASTING",sub:`Polling for confirmation. TxID: ${f!=null&&f.txId?f.txId.slice(0,20)+"":"pending"}`,color:a.accent}),d==="done"&&l.jsxs("div",{style:{...Mr(),background:`${a.ok}0A`,borderColor:`${a.ok}30`},children:[l.jsx("div",{style:{fontSize:10,color:a.ok,fontWeight:700,marginBottom:6},children:" TRANSACTION CONFIRMED"}),T&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:3},children:"Transaction ID"}),l.jsx("div",{style:{fontSize:8,color:a.text,wordBreak:"break-all",marginBottom:8},children:T}),l.jsx("button",{onClick:()=>chrome.tabs.create({url:`${ge}/txs/${T}`}),style:{background:"none",border:"none",color:a.accent,fontSize:8,cursor:"pointer",...j},children:"View on Explorer "})]}),l.jsx("button",{onClick:Xe,style:{...Vl(!0),marginTop:10,background:`${a.ok}20`,color:a.ok},children:"DONE"})]}),d==="error"&&l.jsxs("div",{style:{...Mr(),background:a.dLow,borderColor:`${a.danger}40`},children:[l.jsx("div",{style:{fontSize:9,color:a.danger,fontWeight:700,marginBottom:6},children:"TRANSACTION FAILED"}),C&&l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:6,lineHeight:1.5},children:C}),y.map((L,V)=>l.jsxs("div",{style:{fontSize:8,color:a.danger,marginBottom:2},children:[" ",L]},V)),l.jsx("button",{onClick:Xe,style:{...Vl(!0),marginTop:8,background:a.dLow,border:`1px solid ${a.danger}50`,color:a.danger},children:"TRY AGAIN"})]}),g&&e&&l.jsxs("div",{style:Mr(),children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[l.jsx("div",{style:cr,children:"RECEIVE KAS"}),l.jsx("button",{onClick:()=>h(!1),style:{background:"none",border:"none",color:a.dim,fontSize:8,cursor:"pointer",...j},children:""})]}),l.jsxs("div",{style:{...Le(),display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,marginBottom:6},children:[l.jsx("div",{style:{fontSize:8,color:$t?a.ok:a.warn,fontWeight:700,letterSpacing:"0.06em"},children:Yn}),l.jsx("button",{onClick:()=>chrome.tabs.create({url:$}),style:{...xe(a.accent,!0),padding:"4px 7px",fontSize:8,color:a.accent,flexShrink:0},children:"EXPLORER "})]}),l.jsx("div",{style:{...Le(),display:"flex",justifyContent:"center",alignItems:"center",minHeight:140,marginBottom:6},children:ee?l.jsx("img",{src:ee,alt:"Wallet receive QR",style:{width:138,height:138,borderRadius:8,border:`1px solid ${a.border}`}}):l.jsx("div",{style:{fontSize:8,color:q?a.danger:a.dim},children:q?"QR ERROR":"GENERATING QR"})}),l.jsx("div",{style:{fontSize:8,color:a.muted,letterSpacing:"0.08em"},children:"CONNECTED WALLET ADDRESS"}),l.jsx("div",{style:{...Le(),fontSize:8,color:a.dim,lineHeight:1.6,wordBreak:"break-all",marginBottom:6},children:e}),l.jsx("button",{onClick:be,style:{...xe(W?a.ok:a.dim,!0),padding:"7px 8px",color:W?a.ok:a.dim,width:"100%"},children:W?" COPIED":"COPY ADDRESS"}),l.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5,marginTop:4},children:"Send KAS to this address from any Kaspa wallet. Funds and UTXO state are verified against live on-chain data."})]})]});return l.jsxs("div",{style:{...lr,position:"relative"},children:[Ae&&l.jsx("div",{style:mv,onClick:L=>{L.target===L.currentTarget&&Pt&&Zn()},children:l.jsx("div",{style:hv,children:xr})}),l.jsxs("div",{style:{...et("purple"),background:"linear-gradient(165deg, rgba(10,18,28,0.96) 0%, rgba(7,13,22,0.93) 52%, rgba(5,10,18,0.94) 100%)",border:`1px solid ${a.accent}3A`,boxShadow:"inset 0 1px 0 rgba(255,255,255,0.06), 0 12px 26px rgba(0,0,0,0.28), 0 0 24px rgba(57,221,182,0.09)"},children:[l.jsx("div",{style:{position:"absolute",top:-32,right:-26,width:130,height:130,borderRadius:"50%",background:"radial-gradient(circle, rgba(57,221,182,0.26) 0%, rgba(57,221,182,0.05) 48%, transparent 75%)",pointerEvents:"none"}}),l.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",backgroundImage:"repeating-linear-gradient(0deg, transparent 0px, transparent 23px, rgba(57,221,182,0.05) 24px), repeating-linear-gradient(90deg, transparent 0px, transparent 23px, rgba(57,221,182,0.04) 24px)",opacity:.45}}),l.jsx("div",{style:{marginBottom:11,display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,position:"relative"},children:l.jsx("div",{style:Mt,children:"TOKEN BALANCES"})}),Ye.map((L,V)=>{const me=Fe[L.id]??Fe.KAS,Zt=L.id==="KAS",ct=Zt?48:30,Kt=Zt?40:20,_=St[L.id]??0,D=L.id==="KAS"?Ot(_,4):Ot(_,2),Z=Jn(D);return l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"linear-gradient(160deg, rgba(15,24,36,0.86), rgba(8,14,22,0.88))",border:`1px solid ${a.border}`,borderRadius:12,padding:"10px 11px",marginTop:V>0?8:0,opacity:Zt||L.enabled?1:.58,position:"relative",zIndex:1},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[l.jsx("div",{style:{width:ct,height:ct,borderRadius:"50%",flexShrink:0,background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",border:"none",boxShadow:"none",overflow:"hidden"},children:l.jsx("img",{src:me,alt:`${L.symbol} logo`,style:{width:Kt,height:Kt,objectFit:"contain",borderRadius:"50%",filter:"none"}})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:11,fontWeight:700,color:a.text,letterSpacing:"0.05em",...j},children:L.symbol}),l.jsx("div",{style:{fontSize:9,color:a.dim,letterSpacing:"0.03em"},children:L.name})]})]}),l.jsxs("div",{style:{textAlign:"right"},children:[l.jsx("div",{style:{fontSize:18,fontWeight:700,color:a.text},children:Z}),!L.enabled&&L.disabledReason&&l.jsx("div",{style:{fontSize:8,color:a.dim,maxWidth:140,lineHeight:1.35,marginTop:3},children:L.disabledReason})]})]},L.id)}),e&&l.jsx("div",{style:{marginTop:11,textAlign:"right",position:"relative",zIndex:1},children:l.jsx("button",{onClick:()=>chrome.tabs.create({url:$}),style:{...xe(a.accent,!0),padding:"6px 9px",fontSize:9,color:a.accent},children:"EXPLORER "})})]}),l.jsxs("div",{style:et("default"),children:[l.jsxs("div",{style:{marginBottom:9,display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[l.jsx("div",{style:Mt,children:"UTXO SET"}),l.jsx("button",{onClick:()=>de(L=>L+1),disabled:te,style:{...xe(a.accent,!0),padding:"5px 8px",fontSize:8,color:a.accent},children:te?"SYNC":"REFRESH"})]}),l.jsxs("div",{style:{display:"flex",gap:6,marginBottom:9},children:[l.jsxs("div",{style:{...Le(),flex:1,padding:"6px 7px"},children:[l.jsx("div",{style:{fontSize:8,color:a.muted,letterSpacing:"0.08em"},children:"COUNT"}),l.jsx("div",{style:{fontSize:11,color:a.text,fontWeight:700,...j},children:ce.length})]}),l.jsxs("div",{style:{...Le(),flex:1,padding:"6px 7px"},children:[l.jsx("div",{style:{fontSize:8,color:a.muted,letterSpacing:"0.08em"},children:"TOTAL"}),l.jsx("div",{style:{fontSize:11,color:a.text,fontWeight:700,...j},children:vt(I,4)})]}),l.jsxs("div",{style:{...Le(),flex:1,padding:"6px 7px"},children:[l.jsx("div",{style:{fontSize:8,color:a.muted,letterSpacing:"0.08em"},children:"LARGEST"}),l.jsx("div",{style:{fontSize:11,color:a.text,fontWeight:700,...j},children:vt(K,4)})]})]}),G>0&&l.jsxs("div",{style:{...Le(),fontSize:8,color:a.warn,padding:"8px 10px",marginBottom:8,lineHeight:1.45},children:["Covenant outputs detected: ",G,". Standard send currently uses spendable UTXOs only (",Ee," available)."]}),te&&ce.length===0&&l.jsxs("div",{style:{...Le(),fontSize:8,color:a.dim,padding:"9px 10px"},children:["Fetching UTXOs from ",r,""]}),!te&&ce.length===0&&!z&&l.jsxs("div",{style:{...Le(),fontSize:8,color:a.dim,padding:"9px 10px"},children:["No UTXOs found for this wallet on ",r,"."]}),z&&l.jsx("div",{style:{...Le(),fontSize:8,color:a.danger,padding:"9px 10px",marginBottom:ce.length?8:0},children:z}),ce.length>0&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[ce.slice(0,6).map((L,V)=>{const me=sr(L.amount);return l.jsx("div",{style:{...Le(),padding:"8px 9px"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[l.jsxs("div",{style:{minWidth:0},children:[l.jsxs("div",{style:{fontSize:8,color:a.dim,...j,letterSpacing:"0.04em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:["#",V+1," ",L.txId.slice(0,16),":",L.outputIndex]}),l.jsxs("div",{style:{fontSize:8,color:a.muted,marginTop:2},children:["DAA ",L.blockDaaScore.toString()," ",L.isCoinbase?" COINBASE":""," ",(L.scriptClass??"standard")==="covenant"?" COVENANT":""]})]}),l.jsx("div",{style:{fontSize:11,color:a.accent,fontWeight:700,...j},children:vt(me,4)})]})},`${L.txId}:${L.outputIndex}`)}),ce.length>6&&l.jsxs("div",{style:{fontSize:8,color:a.dim,textAlign:"right",paddingTop:1},children:["+",ce.length-6," more UTXOs"]})]}),l.jsx("div",{style:{...Mh(),margin:"9px 0 6px"}}),l.jsxs("div",{style:{fontSize:8,color:a.muted,letterSpacing:"0.06em",textAlign:"right"},children:["UPDATED ",Ve]})]})]})}const Mr=()=>({...et("default"),display:"flex",flexDirection:"column",gap:7}),af=e=>({...zh(e)}),Vl=e=>({...Nn(e),padding:"9px",width:"100%"}),mv={position:"fixed",inset:0,zIndex:50,background:"rgba(3, 7, 12, 0.78)",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"12px 10px 14px",backdropFilter:"blur(1px)"},hv={width:"100%",maxWidth:420,display:"flex",flexDirection:"column",gap:8,maxHeight:"calc(100vh - 26px)",overflowY:"auto"};function Hl({icon:e,title:t,sub:n,color:r}){return l.jsxs("div",{style:{...Mr(),textAlign:"center"},children:[l.jsx("div",{style:{fontSize:20},children:e}),l.jsx("div",{style:{fontSize:9,color:r,fontWeight:700,letterSpacing:"0.1em"},children:t}),l.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5},children:n})]})}function gv({tx:e,usdPrice:t,onConfirm:n,onCancel:r}){var g;const o=e.outputs[0],i=o?sr(o.amount):0,s=sr(e.fee),u=e.platformFee?sr(e.platformFee):0,c=e.changeOutput?sr(e.changeOutput.amount):0,d=i+s+u,m=(h,S,w=a.text,x)=>l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:5},children:[l.jsxs("span",{style:{fontSize:8,color:a.dim},children:[h,x&&l.jsx("span",{style:{fontSize:8,color:a.muted,marginLeft:4},children:x})]}),l.jsx("span",{style:{fontSize:9,color:w,fontWeight:700},children:S})]});return l.jsxs("div",{style:{...Mr(),borderColor:`${a.accent}30`},children:[l.jsx("div",{style:{...cr,color:a.accent},children:"CONFIRM TRANSACTION"}),l.jsxs("div",{style:Le(),children:[m("TO",(g=e.outputs[0])!=null&&g.address?e.outputs[0].address.slice(0,22)+"":""),m("AMOUNT",`${Ot(i,4)} KAS${t>0?`  $${Ot(i*t,2)}`:""}`),m("NETWORK FEE",`${Ot(s,8)} KAS`,a.warn," miners"),u>0&&m("PLATFORM FEE",`${Ot(u,6)} KAS`,a.dim," treasury"),c>0&&m("CHANGE",`${Ot(c,4)} KAS`,a.dim),l.jsx("div",{style:{...Mh(),margin:"6px 0"}}),m("TOTAL COST",`${Ot(d,4)} KAS`,a.accent)]}),l.jsx("div",{style:{fontSize:8,color:a.warn,lineHeight:1.5},children:" Kaspa transactions are irreversible once confirmed."}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{onClick:r,style:{...xe(a.dim,!0),flex:1,padding:"8px 0"},children:"CANCEL"}),l.jsx("button",{onClick:n,style:{...Nn(!0),flex:2,padding:"8px 0"},children:"SIGN & SEND "})]})]})}function Mo(e){return e&&typeof e=="object"?e:{}}function pn(...e){for(const t of e)if(typeof t=="string"&&t.trim())return t.trim();return""}function uf(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=e.replace(/[$,\s]/g,""),n=Number(t);if(Number.isFinite(n))return n}return 0}function Er(e){if(typeof e=="number"&&Number.isFinite(e)&&e>0)return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t)&&t>0)return t}return 0}function yv(e){if(typeof e!="string")return null;const t=e.trim().toLowerCase();return t.startsWith("kaspa:")?"mainnet":t.startsWith("kaspatest:")?"testnet":null}function zo(e,t="unknown"){const n=String(e??"").trim().toLowerCase().replace(/_/g,"-");if(n.includes("mainnet")||n==="main"||n==="livenet")return"mainnet";if(n.includes("testnet-12")||n==="tn12")return"testnet-12";if(n.includes("testnet-11")||n==="tn11")return"testnet-11";if(n.includes("testnet-10")||n==="tn10")return"testnet-10";if(n==="testnet"||n.startsWith("tn")||n.startsWith("testnet"))return"testnet";if(n==="kaspa")return"mainnet";if(n==="kaspatest")return"testnet";const r=String(t??"").trim().toLowerCase().replace(/_/g,"-");return r==="mainnet"?"mainnet":r==="testnet-12"||r==="tn12"?"testnet-12":r==="testnet-10"||r==="tn10"?"testnet-10":r==="testnet-11"||r==="tn11"?"testnet-11":r.startsWith("testnet")||r.startsWith("tn")?"testnet":"unknown"}function Sv(e,t){const n=Mo(e.wallet),r=Mo(e.deployTx),o=Mo(e.meta),i=pn(e.network,n.network,r.network,o.network);if(i)return zo(i,"unknown");const s=pn(n.address,e.address,r.from,r.to),u=yv(s);return zo(u||t,"unknown")}function vv(e){const t=e.toLowerCase();return t==="autonomous"||t==="auto"||t==="bot"}function xv(e){const t=e.toLowerCase();return t==="active"||t==="running"||t==="live"}function wv(e,t){const n=Mo(e),r=Mo(n.wallet),o=Date.now(),i=pn(n.agentId,n.id,n.name)||`agent_${o}_${Math.random().toString(36).slice(2,8)}`,s=pn(n.name,n.agentName)||"Agent",u=pn(n.strategyLabel,n.strategy,n.strategyTemplate)||"",c=pn(n.risk)||"",m=pn(n.capitalLimit,n.capital_limit)||null,g=pn(n.execMode,n.mode)||"manual",h=pn(n.status)||"idle",S=Sv(n,t),w=uf(n.pnlUsd)||uf(n.pnl),x=Math.max(Er(n.updatedAt),Er(n.lastActionTime),Er(n.lastDecisionTs),Er(n.lastSeenAt),Er(n.deployedAt),Er(r.updatedAt)),E=x>0&&o-x<=5*60*1e3,f=vv(g),p=xv(h)||f||E;return{id:i,name:s,strategy:u,risk:c,capitalLimitKas:m,execMode:g,status:h,isBot:f,isActive:p,pnlUsd:w,network:S,updatedAt:x,raw:n}}function Ev(e,t){const n=[];for(const r of e){const o=wv(r,t);if(o&&n.push(o),n.length>=64)break}return n.sort((r,o)=>r.isActive!==o.isActive?r.isActive?-1:1:o.updatedAt-r.updatedAt),n}function Av(e,t,n){if(t==="all")return!0;if(t==="mainnet")return e==="mainnet";if(t==="testnet-12")return e==="testnet-12"||e==="testnet";if(t==="testnet-10")return e==="testnet-10"||e==="testnet";if(t==="testnet-11")return e==="testnet-11"||e==="testnet";const r=zo(n,"unknown");return r==="mainnet"?e==="mainnet":r==="testnet-12"?e==="testnet-12"||e==="testnet":r==="testnet-10"?e==="testnet-10"||e==="testnet":r==="testnet-11"?e==="testnet-11"||e==="testnet":r==="testnet"?e==="testnet"||e==="testnet-10"||e==="testnet-11"||e==="testnet-12":!0}function kv(e,t,n,r){return e.filter(o=>!(!Av(o.network,t,r)||n==="bots"&&!o.isBot||n==="manual"&&o.isBot))}function Bh(e){return e==="mainnet"?"MAINNET":e==="testnet-12"?"TN12":e==="testnet-10"?"TN10":e==="testnet-11"?"TN11":e==="testnet"?"TESTNET":"UNKNOWN"}const Tv="forgeos.session.agents.v2";function Gl(e,t){if(!e||e<=0)return"No recent heartbeat";const n=Math.max(0,t-e);return n<1e3?"just now":n<6e4?`${Math.floor(n/1e3)}s ago`:n<36e5?`${Math.floor(n/6e4)}m ago`:n<864e5?`${Math.floor(n/36e5)}h ago`:`${Math.floor(n/864e5)}d ago`}function cf(e,t){if(e==="current"){const n=zo(t,"unknown");return`CURRENT (${Bh(n)})`}return e==="mainnet"?"MAINNET":e==="testnet-12"?"TN12":e==="testnet-10"?"TN10":e==="testnet-11"?"TN11":"ALL"}function df(e){return e==="all"?"ALL MODES":e==="bots"?"BOTS":"MANUAL"}function Iv({network:e}){const[t,n]=A.useState([]),[r,o]=A.useState(!0),[i,s]=A.useState("current"),[u,c]=A.useState("all"),[d,m]=A.useState(0),[g,h]=A.useState(Date.now()),S=A.useCallback(async()=>{const E=await r1();n(Ev(E,e)),m(Date.now()),o(!1)},[e]);A.useEffect(()=>{S().catch(()=>o(!1))},[S]),A.useEffect(()=>{const E=setInterval(()=>{S().catch(()=>{}),h(Date.now())},5e3);return()=>clearInterval(E)},[S]),A.useEffect(()=>{const E=(f,p)=>{p==="local"&&Tv in f&&S().catch(()=>{})};return chrome.storage.onChanged.addListener(E),()=>chrome.storage.onChanged.removeListener(E)},[S]),A.useEffect(()=>{const E=f=>{(f==null?void 0:f.type)==="FORGEOS_AGENTS_UPDATED"&&S().catch(()=>{})};return chrome.runtime.onMessage.addListener(E),()=>chrome.runtime.onMessage.removeListener(E)},[S]);const w=A.useMemo(()=>kv(t,i,u,e),[t,u,e,i]),x=A.useMemo(()=>{const E=w.length,f=w.filter(v=>v.isBot).length,p=w.filter(v=>v.isActive).length,y=w.reduce((v,T)=>v+T.pnlUsd,0);return{total:E,bots:f,active:p,pnlUsd:y}},[w]);return r?l.jsx("div",{style:{...lr,paddingTop:20,fontSize:9,color:a.dim,textAlign:"center"},children:"Loading agents"}):w.length===0?l.jsxs("div",{style:{...lr,gap:10},children:[l.jsxs("div",{style:et("default",!0),children:[l.jsx("div",{style:{...Mt,marginBottom:7},children:"LIVE AGENT FEED  TESTNET/MAINNET FILTERS"}),l.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:7},children:["current","mainnet","testnet-10","testnet-11","testnet-12","all"].map(E=>{const f=E===i;return l.jsx("button",{onClick:()=>s(E),style:{...xe(f?a.accent:a.dim),padding:"5px 7px",fontSize:8,background:f?`${a.accent}20`:"rgba(16,25,35,0.45)",borderColor:f?`${a.accent}55`:a.border},children:cf(E,e)},E)})}),l.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:["all","bots","manual"].map(E=>{const f=E===u;return l.jsx("button",{onClick:()=>c(E),style:{...xe(f?a.ok:a.dim),padding:"5px 7px",fontSize:8,background:f?`${a.ok}20`:"rgba(16,25,35,0.45)",borderColor:f?`${a.ok}55`:a.border},children:df(E)},E)})})]}),l.jsxs("div",{style:{...lr,...et("accent"),padding:"20px 18px",textAlign:"center",gap:14,alignItems:"center"},children:[l.jsx("div",{style:{width:52,height:52,borderRadius:"50%",background:`${a.accent}14`,border:`1px solid ${a.accent}35`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:22,boxShadow:"0 8px 18px rgba(57,221,182,0.12)"},children:""}),l.jsxs("div",{children:[l.jsx("div",{style:{...cr,fontSize:11,marginBottom:6},children:"No Agents In This Filter"}),l.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.6,maxWidth:220},children:"Live refresh runs every 5 seconds. Switch filters or deploy a new bot on Forge-OS."}),l.jsxs("div",{style:{fontSize:8,color:a.muted,marginTop:7},children:["Last sync ",d>0?Gl(d,g):"never"]})]}),l.jsx("button",{onClick:()=>chrome.tabs.create({url:`https://forge-os.xyz?network=${encodeURIComponent(e)}`}),style:{background:`linear-gradient(90deg, ${a.accent}, #7BE9CF)`,border:"none",borderRadius:10,padding:"10px 20px",color:"#04110E",fontSize:9,fontWeight:700,cursor:"pointer",...j,letterSpacing:"0.1em",boxShadow:"0 8px 18px rgba(57,221,182,0.16)"},children:"OPEN FORGE-OS "})]})]}):l.jsxs("div",{style:{...lr,paddingTop:10,gap:8},children:[l.jsxs("div",{style:et("default",!0),children:[l.jsx("div",{style:{...Mt,marginBottom:7},children:"LIVE AGENT FEED  TESTNET/MAINNET OPTIONS"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",gap:6,marginBottom:8},children:[l.jsxs("div",{style:{background:"rgba(16,25,35,0.45)",border:`1px solid ${a.border}`,borderRadius:7,padding:"6px 7px"},children:[l.jsx("div",{style:{fontSize:8,color:a.dim},children:"VISIBLE"}),l.jsx("div",{style:{fontSize:10,color:a.text,fontWeight:700},children:x.total})]}),l.jsxs("div",{style:{background:"rgba(16,25,35,0.45)",border:`1px solid ${a.border}`,borderRadius:7,padding:"6px 7px"},children:[l.jsx("div",{style:{fontSize:8,color:a.dim},children:"BOTS"}),l.jsx("div",{style:{fontSize:10,color:a.accent,fontWeight:700},children:x.bots})]}),l.jsxs("div",{style:{background:"rgba(16,25,35,0.45)",border:`1px solid ${a.border}`,borderRadius:7,padding:"6px 7px"},children:[l.jsx("div",{style:{fontSize:8,color:a.dim},children:"ACTIVE"}),l.jsx("div",{style:{fontSize:10,color:a.ok,fontWeight:700},children:x.active})]}),l.jsxs("div",{style:{background:"rgba(16,25,35,0.45)",border:`1px solid ${a.border}`,borderRadius:7,padding:"6px 7px"},children:[l.jsx("div",{style:{fontSize:8,color:a.dim},children:"P&L USD"}),l.jsxs("div",{style:{fontSize:10,color:x.pnlUsd>=0?a.ok:a.danger,fontWeight:700},children:[x.pnlUsd>=0?"+":"-","$",Ot(Math.abs(x.pnlUsd),2)]})]})]}),l.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:7},children:["current","mainnet","testnet-10","testnet-11","testnet-12","all"].map(E=>{const f=E===i;return l.jsx("button",{onClick:()=>s(E),style:{...xe(f?a.accent:a.dim),padding:"5px 7px",fontSize:8,background:f?`${a.accent}20`:"rgba(16,25,35,0.45)",borderColor:f?`${a.accent}55`:a.border},children:cf(E,e)},E)})}),l.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:["all","bots","manual"].map(E=>{const f=E===u;return l.jsx("button",{onClick:()=>c(E),style:{...xe(f?a.ok:a.dim),padding:"5px 7px",fontSize:8,background:f?`${a.ok}20`:"rgba(16,25,35,0.45)",borderColor:f?`${a.ok}55`:a.border},children:df(E)},E)})})]}),l.jsxs("div",{style:{...Mt,marginBottom:2},children:["LIVE UPDATE  LAST SYNC ",d>0?Gl(d,g).toUpperCase():"NEVER"]}),w.map(E=>{const f=E.pnlUsd>=0,p=String(E.execMode||"manual").toUpperCase(),y=E.isActive?a.ok:a.warn;return l.jsxs("div",{style:{...et(E.isActive?"accent":"default",!0),borderColor:E.isActive?`${a.accent}40`:a.border,padding:"10px 12px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6,gap:8},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,minWidth:0},children:[l.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:y,flexShrink:0}}),l.jsx("span",{style:{fontSize:10,fontWeight:700,color:a.text,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:E.name})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,flexWrap:"wrap",justifyContent:"flex-end"},children:[l.jsx("span",{style:{fontSize:8,color:a.dim,...j,background:"rgba(16,25,35,0.65)",border:`1px solid ${a.border}`,borderRadius:3,padding:"2px 5px"},children:Bh(E.network)}),l.jsx("span",{style:{fontSize:8,color:E.isBot?a.accent:a.dim,...j,background:E.isBot?`${a.accent}18`:"rgba(16,25,35,0.65)",border:`1px solid ${E.isBot?`${a.accent}50`:a.border}`,borderRadius:3,padding:"2px 5px"},children:E.isBot?"BOT":"MANUAL"}),l.jsx("span",{style:{fontSize:8,color:E.isActive?a.ok:a.warn,fontWeight:700,...j,background:E.isActive?`${a.ok}15`:`${a.warn}15`,border:`1px solid ${E.isActive?a.ok:a.warn}30`,borderRadius:3,padding:"2px 5px"},children:p})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:6},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:1},children:"STRATEGY"}),l.jsx("div",{style:{fontSize:8,color:a.text,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:E.strategy})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:1},children:"P&L (USD)"}),l.jsxs("div",{style:{fontSize:8,color:f?a.ok:a.danger,fontWeight:700},children:[f?"+":"","$",Ot(Math.abs(E.pnlUsd),2)]})]}),E.capitalLimitKas&&l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:1},children:"CAPITAL"}),l.jsxs("div",{style:{fontSize:8,color:a.text},children:[E.capitalLimitKas," KAS"]})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:1},children:"LAST HEARTBEAT"}),l.jsx("div",{style:{fontSize:8,color:a.text},children:Gl(E.updatedAt,g)})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:1},children:"RISK"}),l.jsx("div",{style:{fontSize:8,color:a.text},children:String(E.risk||"").toUpperCase()})]})]})]},E.id)}),l.jsx("button",{onClick:()=>chrome.tabs.create({url:`https://forge-os.xyz?network=${encodeURIComponent(e)}`}),style:{...xe(a.dim,!0),padding:"8px 10px",marginTop:2},children:"MANAGE LIVE ON FORGE-OS "})]})}function Cv({address:e,network:t,isManagedWallet:n,autoLockMinutes:r,persistUnlockSessionEnabled:o,onAutoLockMinutesChange:i,onPersistUnlockSessionChange:s,onLock:u}){const[c,d]=A.useState("none"),[m,g]=A.useState([]),[h,S]=A.useState(""),[w,x]=A.useState(null),[E,f]=A.useState(!1),[p,y]=A.useState(""),[v,T]=A.useState(""),[k,C]=A.useState(""),[P,W]=A.useState(null),[b,ee]=A.useState(!1),[ie,q]=A.useState(!1),[Re,ce]=A.useState(!1),[J,te]=A.useState(!1),[O,z]=A.useState("official"),[U,F]=A.useState(""),[Q,pe]=A.useState(!1),[de,X]=A.useState(null),[ae,B]=A.useState(!1),se={official:"OFFICIAL",igra:"IGRA",kasplex:"KASPLEX",custom:"CUSTOM"},Se=n?"managed":e?"watch-only":"none",le=[{label:"1m",value:1},{label:"15m",value:15},{label:"1h",value:60},{label:"4h",value:240},{label:"Never",value:-1}];A.useEffect(()=>{let $=!0;return pe(!0),X(null),B(!1),Promise.all([Zm(t),Ym(t)]).then(([ne,I])=>{$&&(F(ne??""),z(I))}).catch(()=>{$&&X("Failed to load RPC settings.")}).finally(()=>{$&&pe(!1)}),()=>{$=!1}},[t]);const Ue=async $=>{$.preventDefault(),x(null),f(!0);try{const ne=await gr(h,r,{persistSession:o});g(ne.mnemonic.split(" ")),S("")}catch(ne){const I=ne instanceof Error?ne.message:String(ne);x(I==="INVALID_PASSWORD"?"Incorrect password.":"Authentication failed."),S("")}finally{f(!1)}},Nt=()=>{g([]),S(""),x(null),d("none")},Ft=async $=>{if($.preventDefault(),W(null),v.length<8){W("New password must be at least 8 characters.");return}if(v!==k){W("New passwords do not match.");return}if(v===p){W("New password must differ from current password.");return}q(!0);try{await sh(p,v),ee(!0),y(""),T(""),C("")}catch(ne){const I=ne instanceof Error?ne.message:String(ne);W(I==="INVALID_PASSWORD"?"Current password is incorrect.":I==="WEAK_PASSWORD"?"New password is too short (min 8 chars).":"Failed to change password. Try again.")}finally{q(!1)}},rt=async()=>{if(!Re){ce(!0);return}await lh(),u()},Xe=($=!1)=>({...zh($)}),be=()=>{d("none"),g([]),S(""),x(null),y(""),T(""),C(""),W(null),ee(!1),ce(!1)},Ye=async $=>{te(!0);try{await i($)}finally{te(!1)}},Fe=async $=>{pe(!0),X(null),B(!1);try{await Ol(t,$),z($),B(!0)}catch{X("Failed to save RPC provider preset.")}finally{pe(!1)}},St=async()=>{pe(!0),X(null),B(!1);try{await Vd(t,U.trim()||null),await Ol(t,"custom"),z("custom"),B(!0),U.trim()||F("")}catch($){const ne=$ instanceof Error?$.message:String($);X(ne==="INVALID_RPC_ENDPOINT"?"Invalid endpoint URL. Use http(s)://...":"Failed to save custom RPC endpoint.")}finally{pe(!1)}},ge=async()=>{pe(!0),X(null),B(!1);try{await Vd(t,null),await Ol(t,"official"),z("official"),F(""),B(!0)}catch{X("Failed to clear custom RPC endpoint.")}finally{pe(!1)}};return l.jsxs("div",{style:lr,children:[l.jsxs("div",{style:et("default"),children:[l.jsx("div",{style:{...Mt,marginBottom:8},children:"CONNECTION STATUS"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:3},children:"PROVIDER"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:5},children:[l.jsx("div",{style:{width:5,height:5,borderRadius:"50%",background:e?a.ok:a.warn}}),l.jsx("span",{style:{fontSize:9,color:a.text,fontWeight:700},children:Se.toUpperCase()})]})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:3},children:"NETWORK"}),l.jsx("span",{style:{fontSize:8,color:t==="mainnet"?a.warn:a.ok,fontWeight:700,background:t==="mainnet"?`${a.warn}15`:`${a.ok}15`,border:`1px solid ${t==="mainnet"?a.warn:a.ok}30`,borderRadius:3,padding:"2px 6px"},children:t.toUpperCase()})]}),e&&l.jsxs("div",{style:{gridColumn:"1 / -1"},children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:3},children:"ADDRESS"}),l.jsx("div",{style:{...Le(),fontSize:8,color:a.text,padding:"7px 9px"},children:mi(e)})]})]})]}),l.jsxs("div",{style:et("default"),children:[l.jsx("div",{style:{...Mt,marginBottom:8},children:"KASPA RPC ENDPOINT"}),l.jsxs("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5,marginBottom:7},children:["Active network: ",l.jsx("span",{style:{color:a.text,fontWeight:700},children:t.toUpperCase()})]}),l.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:8},children:Object.keys(se).map($=>{const ne=O===$;return l.jsx("button",{onClick:()=>{Fe($)},disabled:Q,style:{...xe(ne?a.accent:a.dim,!0),padding:"6px 8px",fontSize:8,color:ne?a.accent:a.dim,opacity:Q?.7:1},children:se[$]},$)})}),l.jsx("input",{value:U,onChange:$=>{F($.target.value),B(!1),X(null)},placeholder:t==="mainnet"?"https://your-mainnet-kaspa-rpc.example":"https://your-kaspa-rpc.example",disabled:Q||O!=="custom",style:{...Xe(!!de),marginBottom:7}}),l.jsxs("div",{style:{display:"flex",gap:6},children:[l.jsx("button",{onClick:()=>{St()},disabled:Q||O!=="custom",style:{...xe(a.accent,!0),flex:1,padding:"7px 8px",color:a.accent,opacity:Q?.7:1},children:Q?"SAVING":"SAVE RPC"}),l.jsx("button",{onClick:()=>{ge()},disabled:Q,style:{...xe(a.dim,!0),flex:1,padding:"7px 8px",color:a.dim,opacity:Q?.7:1},children:"CLEAR"})]}),de&&l.jsx("div",{style:{fontSize:8,color:a.danger,marginTop:6},children:de}),!de&&ae&&l.jsx("div",{style:{fontSize:8,color:a.ok,marginTop:6},children:"Saved RPC settings for this network."}),l.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5,marginTop:6},children:"Presets are stored per network. Igra/Kasplex pools read from env (`VITE_KASPA_IGRA_*` / `VITE_KASPA_KASPLEX_*`) and fall back to Official if unset."})]}),n&&l.jsxs("div",{style:et("default"),children:[l.jsx("div",{style:{...Mt,marginBottom:8},children:"SESSION SETTINGS"}),l.jsxs("div",{style:{marginBottom:10},children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:5,letterSpacing:"0.08em"},children:"AUTO-LOCK"}),l.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:le.map($=>l.jsx("button",{disabled:J,onClick:()=>{Ye($.value)},style:{...xe(r===$.value?a.accent:a.dim,!0),padding:"6px 8px",fontSize:8,color:r===$.value?a.accent:a.dim,opacity:J?.7:1},children:$.label},$.value))})]})]}),n&&l.jsxs(l.Fragment,{children:[c==="none"&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:7},children:[l.jsx("button",{onClick:()=>d("reveal"),style:Ql(a.accent),children:" REVEAL SEED PHRASE"}),l.jsx("button",{onClick:()=>d("change_pw"),style:Ql(a.dim),children:" CHANGE PASSWORD"}),l.jsx("button",{onClick:()=>d("reset"),style:Ql(a.danger),children:" RESET WALLET"})]}),c==="reveal"&&l.jsxs("div",{style:{...et("warn")},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[l.jsx("span",{style:{...cr,color:a.warn},children:"SEED PHRASE"}),l.jsx("button",{onClick:Nt,style:{background:"none",border:"none",color:a.dim,fontSize:8,cursor:"pointer",...j},children:" close"})]}),m.length===0?l.jsxs("form",{onSubmit:Ue,children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:6,lineHeight:1.5},children:"Enter your password to view your seed phrase. Never share it  anyone with this phrase controls your wallet."}),l.jsx("input",{type:"password",value:h,onChange:$=>S($.target.value),placeholder:"Your password",disabled:E,style:{...Xe(!!w),marginBottom:6}}),w&&l.jsx("div",{style:{fontSize:8,color:a.danger,marginBottom:6},children:w}),l.jsx("button",{type:"submit",disabled:!h||E,style:{...xe(h&&!E?a.warn:a.dim,!0),width:"100%",padding:"7px 0",color:h&&!E?a.warn:a.dim,cursor:h&&!E?"pointer":"not-allowed"},children:E?"AUTHENTICATING":"SHOW SEED PHRASE"})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{...Le(),display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:4,marginBottom:8},children:m.map(($,ne)=>l.jsxs("div",{style:{background:"rgba(5,7,10,0.9)",border:`1px solid ${a.border}`,borderRadius:4,padding:"5px 4px",display:"flex",alignItems:"center",gap:3},children:[l.jsxs("span",{style:{fontSize:8,color:a.dim,flexShrink:0},children:[ne+1,"."]}),l.jsx("span",{style:{fontSize:8,color:a.text,fontWeight:600},children:$})]},ne))}),l.jsx("div",{style:{fontSize:8,color:a.warn,lineHeight:1.4},children:" Store offline. Never photograph or share digitally."})]})]}),c==="change_pw"&&l.jsxs("div",{style:et("default"),children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[l.jsx("span",{style:cr,children:"CHANGE PASSWORD"}),l.jsx("button",{onClick:be,style:{background:"none",border:"none",color:a.dim,fontSize:8,cursor:"pointer",...j},children:" close"})]}),b?l.jsx("div",{style:{fontSize:8,color:a.ok,textAlign:"center",padding:"8px 0"},children:" Password updated successfully."}):l.jsxs("form",{onSubmit:Ft,style:{display:"flex",flexDirection:"column",gap:7},children:[l.jsx("input",{type:"password",value:p,onChange:$=>y($.target.value),placeholder:"Current password",disabled:ie,style:Xe()}),l.jsx("input",{type:"password",value:v,onChange:$=>T($.target.value),placeholder:"New password (min 8 chars)",disabled:ie,style:Xe()}),l.jsx("input",{type:"password",value:k,onChange:$=>C($.target.value),placeholder:"Confirm new password",disabled:ie,style:Xe()}),P&&l.jsx("div",{style:{fontSize:8,color:a.danger},children:P}),l.jsx("button",{type:"submit",disabled:!p||!v||!k||ie,style:{...Nn(p&&v&&k&&!ie),padding:"8px 0",cursor:p&&v&&k&&!ie?"pointer":"not-allowed"},children:ie?"RE-ENCRYPTING":"UPDATE PASSWORD"})]})]}),c==="reset"&&l.jsxs("div",{style:{...et("danger"),backgroundColor:a.dLow},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[l.jsx("span",{style:{...cr,color:a.danger},children:" RESET WALLET"}),l.jsx("button",{onClick:be,style:{background:"none",border:"none",color:a.dim,fontSize:8,cursor:"pointer",...j},children:" cancel"})]}),l.jsxs("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5,marginBottom:10},children:["This will permanently delete your encrypted vault from this extension. Your on-chain funds are NOT affected. You can re-import using your seed phrase.",l.jsx("strong",{style:{color:a.warn},children:" Make sure your seed phrase is backed up before proceeding."})]}),l.jsx("button",{onClick:rt,style:{...xe(a.danger,!0),width:"100%",padding:"8px 0",background:Re?a.danger:"rgba(49,21,32,0.65)",border:`1px solid ${a.danger}${Re?"90":"50"}`,color:Re?"#fff":a.danger},children:Re?" CONFIRM  PERMANENTLY DELETE VAULT":"RESET WALLET"}),Re&&l.jsx("div",{style:{fontSize:8,color:a.danger,marginTop:5,textAlign:"center"},children:"This cannot be undone. Your seed phrase is your only recovery option."})]})]}),l.jsxs("div",{style:{...Le(),padding:"10px 12px"},children:[l.jsx("div",{style:{...Mt,marginBottom:6},children:"SECURITY NOTES"}),["Seed phrase encrypted with AES-256-GCM before storage.","Password derived with PBKDF2-SHA256 (600,000 iterations).","Plaintext secrets never touch chrome.storage.","All signing happens locally  nothing is transmitted to servers."].map(($,ne,I)=>l.jsxs("div",{style:{display:"flex",gap:6,marginBottom:ne<I.length-1?4:0},children:[l.jsx("span",{style:{color:a.ok,fontSize:8,flexShrink:0},children:""}),l.jsx("span",{style:{fontSize:8,color:a.dim,lineHeight:1.5},children:$})]},ne))]}),n&&c==="none"&&l.jsx("button",{onClick:u,style:{...xe(a.dim,!0),padding:"8px 0"},children:" LOCK WALLET"})]})}function Ql(e){return{...xe(e,!0),padding:"10px 12px",color:e,textAlign:"left",letterSpacing:"0.08em"}}var _f;const he=((_f=import.meta)==null?void 0:_f.env)??{};function ff(e,t){const n=he==null?void 0:he[e];return typeof n!="string"?t:n.trim().toLowerCase()==="true"?!0:n.trim().toLowerCase()==="false"?!1:t}function vo(e,t,n,r){const o=he==null?void 0:he[e],i=Number(o);return Number.isFinite(i)?Math.min(r,Math.max(n,Math.floor(i))):t}function _v(e,t){const n=String((he==null?void 0:he[e])??"").trim();if(!n)return t;const r=n.split(/[,\s]+/).map(i=>Number(i)).filter(i=>Number.isInteger(i)&&i>0),o=[...new Set(r)];return o.length?o:t}function Nv(e,t){const n=String((he==null?void 0:he[e])??"").trim().toLowerCase();return n==="kaspa_native"||n==="evm_0x"||n==="blocked"?n:t}const re={enabled:ff("VITE_SWAP_ENABLED",!0),routeSource:Nv("VITE_SWAP_ROUTE_SOURCE","kaspa_native"),maxSlippageBps:vo("VITE_SWAP_MAX_SLIPPAGE_BPS",500,1,2e3),defaultSlippageBps:vo("VITE_SWAP_DEFAULT_SLIPPAGE_BPS",50,1,2e3),dexEndpoint:String((he==null?void 0:he.VITE_SWAP_DEX_ENDPOINT)??"").trim()||null,evmChainIdAllowlist:_v("VITE_SWAP_EVM_CHAIN_IDS",[1]),requireExternalEvmSigner:ff("VITE_SWAP_REQUIRE_EXTERNAL_EVM_SIGNER",!0),zeroExQuoteEndpoint:String((he==null?void 0:he.VITE_SWAP_ZEROX_QUOTE_ENDPOINT)??"https://api.0x.org/swap/allowance-holder/quote").trim()||null,zeroExApiKey:String((he==null?void 0:he.VITE_SWAP_ZEROX_API_KEY)??"").trim(),zeroExExpectedSettlerTo:String((he==null?void 0:he.VITE_SWAP_ZEROX_EXPECTED_SETTLER_TO)??"").trim(),zeroExExpectedAllowanceSpender:String((he==null?void 0:he.VITE_SWAP_ZEROX_EXPECTED_ALLOWANCE_SPENDER)??"").trim(),settlementRequiredConfirmations:vo("VITE_SWAP_SETTLEMENT_CONFIRMATIONS",2,1,128),settlementPollIntervalMs:vo("VITE_SWAP_SETTLEMENT_POLL_MS",4e3,500,6e4),settlementTimeoutMs:vo("VITE_SWAP_SETTLEMENT_TIMEOUT_MS",24e4,15e3,36e5)};function Ar(e){switch(e){case"kaspa_native":return"Kaspa Native";case"evm_0x":return"0x EVM";case"blocked":default:return"Blocked"}}function pf(e,t){return e==="KAS"||t==="KAS"}function Pv(e,t){return e==="ZRX"||t==="ZRX"}function Tc(e,t,n=re.routeSource,r={}){const o=r.allowHybridAuto!==!1;return n==="blocked"?{source:n,label:Ar(n),allowed:!1,reason:"Swap routes are currently disabled on Kaspa.",requiresEvmSigner:!1}:n==="kaspa_native"?o&&!pf(e,t)?{source:"evm_0x",label:Ar("evm_0x"),allowed:!0,reason:null,requiresEvmSigner:!0}:Pv(e,t)?{source:n,label:Ar(n),allowed:!1,reason:"0x routes are EVM-domain only and cannot bridge directly with native KAS.",requiresEvmSigner:!1}:{source:n,label:Ar(n),allowed:!0,reason:null,requiresEvmSigner:!1}:pf(e,t)?{source:n,label:Ar(n),allowed:!1,reason:"0x routes are EVM-domain only and cannot use native Kaspa balances directly.",requiresEvmSigner:!0}:{source:n,label:Ar(n),allowed:!0,reason:null,requiresEvmSigner:!0}}function mf(e){return e.trim().toLowerCase()}function Rv(e,t){return!e||!t?!1:mf(e)===mf(t)}const Ic="forgeos.swap.evm.sidecar.v1";function bv(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function Uh(e){if(typeof e!="string")return"";const t=e.trim();return/^0x[a-fA-F0-9]{40}$/.test(t)?t:""}function ol(e){if(typeof e=="number"&&Number.isInteger(e)&&e>0)return e;if(typeof e=="string"){const t=e.trim().toLowerCase();if(!t)return 0;if(t.startsWith("0x")){const r=Number.parseInt(t.slice(2),16);return Number.isInteger(r)&&r>0?r:0}const n=Number(t);return Number.isInteger(n)&&n>0?n:0}return 0}function Cc(){return typeof window<"u"&&typeof window.localStorage<"u"}function Fh(e){const t=e;if(!t)return null;const n=Uh(t.address),r=ol(t.chainId),o=t.walletType==="metamask"?"metamask":null,i=typeof t.connectedAt=="number"&&Number.isFinite(t.connectedAt)?t.connectedAt:0,s=typeof t.updatedAt=="number"&&Number.isFinite(t.updatedAt)?t.updatedAt:i;return!o||!n||r<=0?null:{walletType:o,address:n,chainId:r,connectedAt:i||Date.now(),updatedAt:s||Date.now()}}function tu(){if(!Cc())return null;const e=bv(window.localStorage.getItem(Ic));return Fh(e)}function jv(e){const t=Date.now(),n=Fh({...e,connectedAt:e.connectedAt??t,updatedAt:e.updatedAt??t});if(!n)throw new Error("EVM_SIDECAR_INVALID_SESSION");return Cc()&&window.localStorage.setItem(Ic,JSON.stringify(n)),n}function Ov(){Cc()&&window.localStorage.removeItem(Ic)}function $h(e){return re.evmChainIdAllowlist.includes(e)}function il(){const e=globalThis==null?void 0:globalThis.ethereum;return e&&typeof e.request=="function"?e:null}async function Lv(){const e=il();if(!e)throw new Error("EVM_SIDECAR_UNAVAILABLE: No injected EVM provider found.");const t=await e.request({method:"eth_requestAccounts"}),n=Array.isArray(t)?t:[],r=Uh(n[0]);if(!r)throw new Error("EVM_SIDECAR_CONNECT_FAILED: No EVM account returned.");const o=await e.request({method:"eth_chainId"}),i=ol(o);if(i<=0)throw new Error("EVM_SIDECAR_CHAIN_INVALID: Could not determine chain ID.");if(!$h(i))throw new Error(`EVM_SIDECAR_CHAIN_NOT_ALLOWED: chainId ${i} not allowed.`);return jv({walletType:"metamask",address:r,chainId:i})}async function Dv(e){const t=il();if(!t)throw new Error("EVM_SIDECAR_UNAVAILABLE: No injected EVM provider found.");const n=await t.request({method:"eth_sendTransaction",params:[e]});if(typeof n!="string"||!n.startsWith("0x"))throw new Error("EVM_TX_HASH_INVALID");return n}async function Mv(e){const t=il();if(!t)return null;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]});return!n||typeof n!="object"?null:n}async function zv(){const e=il();if(!e)return null;const t=await e.request({method:"eth_blockNumber"}),n=ol(t);return n>0?n:null}function Bv(e){const t=e.status;if(typeof t=="number")return t===1?"success":"revert";if(typeof t=="string"){const n=t.trim().toLowerCase();if(n==="0x1"||n==="1")return"success";if(n==="0x0"||n==="0")return"revert"}return"unknown"}function Uv(e){return ol(e.blockNumber)}function $i(e){return e.trim().toLowerCase()}const Fv={1:{USDC:"0xA0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",USDT:"0xdAC17F958D2ee523a2206206994597C13D831ec7",ZRX:"0xE41d2489571d322189246DaFA5ebDe1F4699F498"}};function hf(e,t){if(e==="KAS")return null;const r=(Fv[t]??{})[e];return typeof r=="string"&&r?r:null}function $v(e,t,n){const r=hf(e.tokenIn,t.chainId),o=hf(e.tokenOut,t.chainId);if(!r||!o)throw new Error("ZEROX_TOKEN_UNSUPPORTED: token pair is not mapped for selected EVM chain.");return{endpoint:n.endpoint,apiKey:n.apiKey,expectedSettlerTo:n.expectedSettlerTo,expectedAllowanceSpender:n.expectedAllowanceSpender,slippageBps:e.slippageBps,sellTokenAddress:r,buyTokenAddress:o,sellAmount:e.amountIn.toString()}}async function Kv(e,t,n){var d;const r=new URLSearchParams({sellToken:e.sellTokenAddress,buyToken:e.buyTokenAddress,sellAmount:e.sellAmount,slippageBps:String(e.slippageBps)}),o=`${e.endpoint}?${r.toString()}`,i={Accept:"application/json","Content-Type":"application/json"};e.apiKey&&(i["0x-api-key"]=e.apiKey);const s=await fetch(o,{method:"GET",headers:i}),u=await s.json().catch(()=>({}));if(!s.ok){const m=typeof(u==null?void 0:u.reason)=="string"?u.reason:`HTTP ${s.status}`;throw new Error(`ZEROX_QUOTE_FAILED: ${m}`)}const c=Wv(u,{allowedChainIds:t,expectedChainId:n,expectedSettlerTo:e.expectedSettlerTo,expectedAllowanceSpender:e.expectedAllowanceSpender});if((d=u.issues)!=null&&d.simulationIncomplete&&c.push("ZEROX_SIMULATION_INCOMPLETE"),c.length>0)throw new Error(`ZEROX_POLICY_REJECTED: ${c.join(", ")}`);return u}function Wv(e,t){var i,s,u;const n=[],r=Number(e.chainId??0);(!Number.isFinite(r)||!t.allowedChainIds.includes(r))&&n.push("ZEROX_CHAIN_NOT_ALLOWED"),t.expectedChainId&&r!==t.expectedChainId&&n.push("ZEROX_CHAIN_SESSION_MISMATCH"),e.liquidityAvailable||n.push("ZEROX_NO_LIQUIDITY");const o=typeof((i=e.transaction)==null?void 0:i.to)=="string"?e.transaction.to:"";if((!o||$i(o)!==$i(t.expectedSettlerTo))&&n.push("ZEROX_SETTLER_MISMATCH"),t.expectedAllowanceSpender){const c=typeof((u=(s=e.issues)==null?void 0:s.allowance)==null?void 0:u.spender)=="string"?e.issues.allowance.spender:"";(!c||$i(c)!==$i(t.expectedAllowanceSpender))&&n.push("ZEROX_ALLOWANCE_SPENDER_MISMATCH")}return(!e.minBuyAmount||!/^\d+$/.test(String(e.minBuyAmount)))&&n.push("ZEROX_MIN_BUY_AMOUNT_INVALID"),n}var Nf;const Vr=((Nf=import.meta)==null?void 0:Nf.env)??{},Vv=12e3,Hv="/quote",Gv="/execute",Qv="/status";function Xv(e,t,n,r){const o=Number(Vr==null?void 0:Vr[e]);return Number.isFinite(o)?Math.min(r,Math.max(n,Math.floor(o))):t}function _c(e,t){return String((Vr==null?void 0:Vr[e])??"").trim()||t}const Yv=Xv("VITE_SWAP_KASPA_NATIVE_TIMEOUT_MS",Vv,1e3,6e4),Jv=_c("VITE_SWAP_KASPA_NATIVE_QUOTE_PATH",Hv),Zv=_c("VITE_SWAP_KASPA_NATIVE_EXECUTE_PATH",Gv),qv=_c("VITE_SWAP_KASPA_NATIVE_STATUS_PATH",Qv);function Kh(e){return String(e||"").trim().replace(/\/+$/,"")}function ex(e){const t=String(e||"").trim();return t?t.startsWith("/")?t:`/${t}`:"/"}function Nc(e,t){const n=Kh(e);if(!n)throw new Error("KASPA_NATIVE_ENDPOINT_MISSING");return`${n}${ex(t)}`}async function Pc(e,t){const n=new AbortController,r=setTimeout(()=>n.abort(),t.timeoutMs??Yv);try{const o=await fetch(e,{method:t.method,headers:{"Content-Type":"application/json"},...t.body?{body:JSON.stringify(t.body)}:{},signal:n.signal}),i=await o.text().catch(()=>"");let s=null;if(i)try{s=JSON.parse(i)}catch{throw new Error(`KASPA_NATIVE_HTTP_${o.status}: invalid JSON response`)}if(!o.ok){const u=typeof(s==null?void 0:s.error)=="string"?s.error:`HTTP ${o.status}`;throw new Error(`KASPA_NATIVE_HTTP_${o.status}: ${u}`)}return{status:o.status,data:s}}catch(o){throw(o==null?void 0:o.name)==="AbortError"?new Error("KASPA_NATIVE_TIMEOUT: request timed out"):o instanceof Error?o:new Error(String(o))}finally{clearTimeout(r)}}function tx(e){return typeof e=="bigint"?e.toString():typeof e=="number"&&Number.isFinite(e)&&e>=0?String(Math.floor(e)):typeof e=="string"&&/^\d+$/.test(e.trim())?e.trim():""}function gf(e,t){const n=tx(e);if(!n)throw new Error(`KASPA_NATIVE_QUOTE_INVALID: "${t}" must be an integer string`);const r=BigInt(n);if(r<0n)throw new Error(`KASPA_NATIVE_QUOTE_INVALID: "${t}" must be >= 0`);return r}function Ls(e){const t=typeof e=="number"?e:Number(e);return Number.isFinite(t)?t:null}function nx(e){const t=Ls(e.priceImpactBps);if(t!==null&&t>=0)return t/1e4;const n=Ls(e.priceImpact);if(n!==null&&n>=0&&n<=1)return n;throw new Error("KASPA_NATIVE_QUOTE_INVALID: missing price impact")}function rx(e){if(!Array.isArray(e))return[];const t=e.map(n=>String(n||"").trim()).filter(Boolean);return t.length?t:[]}function ox(e){return e==="mainnet"?"kaspa:":"kaspatest:"}function ix(e,t){const n=String(e||"").trim().toLowerCase();if(!ri(n))throw new Error("KASPA_NATIVE_QUOTE_INVALID: settlement address is invalid");const r=ox(t);if(!n.startsWith(r))throw new Error("KASPA_NATIVE_QUOTE_INVALID: settlement address network mismatch")}function sx(e,t,n,r){const o=e??{},i=typeof o.quoteId=="string"?o.quoteId.trim():"";if(!i)throw new Error("KASPA_NATIVE_QUOTE_INVALID: missing quoteId");const s=typeof o.settlementAddress=="string"?o.settlementAddress.trim():"";if(!s)throw new Error("KASPA_NATIVE_QUOTE_INVALID: missing settlementAddress");ix(s,r);const u=gf(o.minAmountOut??o.amountOut,"amountOut"),c=gf(o.feeAmount??o.fee??"0","feeAmount"),d=nx(o),m=rx(o.route),g=Ls(o.validUntil);if(g===null||g<=Date.now())throw new Error("KASPA_NATIVE_QUOTE_INVALID: quote is missing or expired");if(m.length===0)throw new Error("KASPA_NATIVE_QUOTE_INVALID: missing route");return{tokenIn:t.tokenIn,tokenOut:t.tokenOut,amountIn:t.amountIn,amountOut:u,priceImpact:d,fee:c,route:m,validUntil:g,dexEndpoint:n,routeSource:"kaspa_native",rawQuote:{...o,quoteId:i,settlementAddress:s,network:r}}}function lx(e){const t=e.rawQuote??{},n=typeof t.quoteId=="string"?t.quoteId.trim():"",r=typeof t.settlementAddress=="string"?t.settlementAddress.trim():"";if(!n||!r)throw new Error("KASPA_NATIVE_QUOTE_META_INVALID");return{quoteId:n,settlementAddress:r}}async function ax(e,t){const n=Nc(t.endpoint,Jv),r={tokenIn:e.tokenIn,tokenOut:e.tokenOut,amountIn:e.amountIn.toString(),slippageBps:e.slippageBps,network:t.network,walletAddress:t.walletAddress};e.customTokenOut&&(r.tokenOutAddress=e.customTokenOut.address,r.tokenOutStandard=e.customTokenOut.standard,r.tokenOutSymbol=e.customTokenOut.symbol,r.tokenOutName=e.customTokenOut.name,r.tokenOutDecimals=e.customTokenOut.decimals);const{data:o}=await Pc(n,{method:"POST",body:r});return sx(o,e,Kh(t.endpoint),t.network)}async function ux(e){const t=Nc(e.endpoint,Zv),n={quoteId:e.quoteId,network:e.network,depositTxId:e.depositTxId,walletAddress:e.walletAddress,amountIn:e.amountIn.toString()},{data:r}=await Pc(t,{method:"POST",body:n}),o=r??{};if(o.accepted===!1)throw new Error(typeof o.error=="string"?o.error:"KASPA_NATIVE_EXECUTION_REJECTED");const i=typeof o.state=="string"?o.state.toLowerCase().trim():"";if(["failed","rejected","error"].includes(i))throw new Error(typeof o.error=="string"?o.error:`KASPA_NATIVE_EXECUTION_${i.toUpperCase()}`)}function cx(e){const t=e.toLowerCase().trim();return["confirmed","completed","success","settled"].includes(t)?"confirmed":["failed","reverted","rejected","expired","error"].includes(t)?"failed":"pending"}async function dx(e){const t=Nc(e.endpoint,qv),n=new URLSearchParams({quoteId:e.quoteId,depositTxId:e.depositTxId,network:e.network}),r=`${t}?${n.toString()}`;try{const{status:o,data:i}=await Pc(r,{method:"GET"});if(o===404)return{state:"pending",confirmations:0,error:null,settlementTxId:null};const s=i??{},u=String(s.state??s.status??"pending"),c=cx(u),d=Math.max(0,Math.floor(Ls(s.confirmations)??0)),m=typeof s.error=="string"?s.error:null,g=typeof s.settlementTxId=="string"?s.settlementTxId:typeof s.txId=="string"?s.txId:null;return{state:c,confirmations:d,error:m,settlementTxId:g}}catch(o){if(String((o==null?void 0:o.message)||"").includes("HTTP 404"))return{state:"pending",confirmations:0,error:null,settlementTxId:null};throw o}}const fx={REQUESTED:["QUOTED","FAILED_TIMEOUT"],QUOTED:["SIGNED","FAILED_TIMEOUT","FAILED_BRIDGE"],SIGNED:["SUBMITTED","FAILED_TIMEOUT","FAILED_BRIDGE"],SUBMITTED:["SUBMITTED","PENDING_CONFIRMATION","CONFIRMED","FAILED_REVERT","FAILED_TIMEOUT"],PENDING_CONFIRMATION:["PENDING_CONFIRMATION","CONFIRMED","FAILED_REVERT","FAILED_TIMEOUT","FAILED_BRIDGE"],CONFIRMED:[],FAILED_REVERT:[],FAILED_TIMEOUT:[],FAILED_BRIDGE:[]};function Wh(e,t,n=Date.now()){return{id:e,routeSource:t,state:"REQUESTED",createdAt:n,updatedAt:n,txHash:null,bridgeTransferId:null,confirmations:0,error:null}}function tt(e,t,n={},r=Date.now()){if(!fx[e.state].includes(t))throw new Error(`INVALID_SETTLEMENT_TRANSITION: ${e.state} -> ${t}`);return{...e,...n,state:t,updatedAt:r}}const nu="forgeos.swap.settlements.v1",Vh=200;function Hh(){return chrome.storage.local}async function px(){return new Promise(e=>{Hh().get(nu,t=>e((t==null?void 0:t[nu])??null))})}async function mx(e){return new Promise(t=>{Hh().set({[nu]:e},t)})}function hx(e){return["REQUESTED","QUOTED","SIGNED","SUBMITTED","PENDING_CONFIRMATION","CONFIRMED","FAILED_REVERT","FAILED_TIMEOUT","FAILED_BRIDGE"].includes(String(e))}function gx(e){const t=e;if(!t)return null;const n=typeof t.id=="string"?t.id:"",r=typeof t.routeSource=="string"?t.routeSource:"",o=t.state;return!n||!hx(o)||r!=="blocked"&&r!=="kaspa_native"&&r!=="evm_0x"?null:{id:n,routeSource:r,state:o,createdAt:typeof t.createdAt=="number"&&Number.isFinite(t.createdAt)?t.createdAt:Date.now(),updatedAt:typeof t.updatedAt=="number"&&Number.isFinite(t.updatedAt)?t.updatedAt:Date.now(),txHash:typeof t.txHash=="string"?t.txHash:null,bridgeTransferId:typeof t.bridgeTransferId=="string"?t.bridgeTransferId:null,confirmations:typeof t.confirmations=="number"&&Number.isFinite(t.confirmations)?t.confirmations:0,error:typeof t.error=="string"?t.error:null}}function yx(e){if(!Array.isArray(e))return[];const t=[];for(const n of e){const r=gx(n);r&&t.push(r)}return t.sort((n,r)=>r.updatedAt-n.updatedAt),t.slice(0,Vh)}async function Bo(){const e=await px();return yx(e)}async function je(e){const t=await Bo(),n=[e,...t.filter(r=>r.id!==e.id)].sort((r,o)=>o.updatedAt-r.updatedAt).slice(0,Vh);await mx(n)}function Rc(e){return e.state==="SUBMITTED"||e.state==="PENDING_CONFIRMATION"}function Gh(e){return`${e}_${Date.now()}_${Math.random().toString(36).slice(2,8)}`}function Qh(){const e=tu();return e&&$h(e.chainId)?e:null}const Sx=["mainnet","testnet-10","testnet-11","testnet-12"],vx=1e8;function xx(e){const t=Number(e)/vx;if(!Number.isFinite(t)||t<=0)throw new Error("KASPA_NATIVE_EXECUTION_INVALID_AMOUNT");return t}async function bc(){const e=await _s().catch(()=>"mainnet");return e==="mainnet"||e==="testnet-10"||e==="testnet-11"||e==="testnet-12"?e:"mainnet"}function zr(e,t,n="FAILED_BRIDGE"){return tt(e,n,{error:t})}async function wx(e){for(const t of Sx){const n=await eh(e,t).catch(()=>null);if(n!=null&&n.acceptingBlockHash)return!0}return!1}function Xh(){return re.zeroExQuoteEndpoint?re.zeroExExpectedSettlerTo?{ok:!0,reason:null}:{ok:!1,reason:"0x settler target is not configured."}:{ok:!1,reason:"0x quote endpoint is not configured."}}function Yh(){if(!re.enabled)return{enabled:!1,reason:"Swap functionality not yet active on Kaspa."};if(re.routeSource==="blocked")return{enabled:!1,reason:"Swap routes are currently disabled on Kaspa."};if(re.routeSource==="kaspa_native")return{enabled:!0,reason:null};const e=Xh();return e.ok?{enabled:!0,reason:null}:{enabled:!1,reason:e.reason}}function Ex(e,t={}){const n=[],r=e.customTokenOut??null,o=!!r,i=o?"USDC":e.tokenOut,s=t.routeSource??re.routeSource,u=t.allowHybridAuto!==!1;!o&&e.tokenIn===e.tokenOut&&n.push("Token in and token out must be different.");const c=Tc(e.tokenIn,i,s,{allowHybridAuto:u});if(!c.allowed&&c.reason&&n.push(c.reason),sf(e.tokenIn)||n.push(`${e.tokenIn} is not currently available.`),!o&&!sf(e.tokenOut)&&n.push(`${e.tokenOut} is not currently available.`),o&&(String((r==null?void 0:r.address)??"").trim()||n.push("Custom token address is required."),(r==null?void 0:r.standard)!=="krc20"&&(r==null?void 0:r.standard)!=="krc721"&&n.push("Custom token standard must be KRC20 or KRC721.")),e.amountIn<=0n&&n.push("Amount must be greater than zero."),(e.slippageBps<0||e.slippageBps>re.maxSlippageBps)&&n.push(`Slippage must be between 0 and ${re.maxSlippageBps} bps (${re.maxSlippageBps/100}%).`),c.source==="evm_0x"){const d=Xh();!d.ok&&d.reason&&n.push(d.reason)}return c.source==="kaspa_native"?(re.dexEndpoint||n.push("Kaspa-native DEX endpoint is not configured."),e.tokenIn!=="KAS"&&n.push("Kaspa-native swap currently supports KAS as the input token.")):o&&n.push("Custom KRC token output requires kaspa-native swap route."),n}async function Ax(e,t={}){var c,d,m,g,h,S,w;if(!Yh().enabled)return null;const r=t.routeSource??re.routeSource,o=t.allowHybridAuto!==!1,i=Ex(e,{routeSource:r,allowHybridAuto:o});if(i.length>0)throw new Error(`SWAP_VALIDATION: ${i.join("; ")}`);const s=e.customTokenOut?"USDC":e.tokenOut,u=Tc(e.tokenIn,s,r,{allowHybridAuto:o});if(u.source==="kaspa_native"){const x=re.dexEndpoint;if(!x)throw new Error("KASPA_NATIVE_ROUTE_UNAVAILABLE: dex endpoint is not configured.");const E=Vn();if(!(E!=null&&E.mnemonic))throw new Error("KASPA_NATIVE_SIGNER_REQUIRED: unlock managed Kaspa wallet.");const f=await bc(),p=Oo(E.address,f);return{...await ax(e,{endpoint:x,network:f,walletAddress:p}),customTokenOut:e.customTokenOut??null}}if(u.source==="evm_0x"){const x=Qh();if(!x)throw new Error("EVM_SIDECAR_REQUIRED: connect external EVM signer first.");const E=$v(e,x,{endpoint:re.zeroExQuoteEndpoint||"",apiKey:re.zeroExApiKey||void 0,expectedSettlerTo:re.zeroExExpectedSettlerTo,expectedAllowanceSpender:re.zeroExExpectedAllowanceSpender||void 0}),f=await Kv(E,re.evmChainIdAllowlist,x.chainId),p=BigInt(f.minBuyAmount||f.buyAmount||"0"),y=typeof((c=f.transaction)==null?void 0:c.to)=="string"?f.transaction.to:"",v=typeof((d=f.transaction)==null?void 0:d.data)=="string"?f.transaction.data:"";if(!y||!v)throw new Error("ZEROX_QUOTE_INVALID: missing transaction payload.");return{tokenIn:e.tokenIn,tokenOut:e.tokenOut,amountIn:e.amountIn,amountOut:p,priceImpact:0,fee:0n,route:((g=(m=f.route)==null?void 0:m.fills)==null?void 0:g.map(T=>String((T==null?void 0:T.source)||"0x")))||["0x"],validUntil:Date.now()+3e4,dexEndpoint:re.zeroExQuoteEndpoint||"https://api.0x.org",routeSource:"evm_0x",transaction:{to:y,data:v,value:typeof((h=f.transaction)==null?void 0:h.value)=="string"?f.transaction.value:"0x0"},allowanceSpender:(w=(S=f.issues)==null?void 0:S.allowance)==null?void 0:w.spender,rawQuote:f,customTokenOut:e.customTokenOut??null}}throw new Error(`SWAP_ROUTE_UNSUPPORTED: ${u.source}`)}async function kx(e){if(!e.txHash||e.routeSource!=="evm_0x"||!Rc(e))return e;if(e.createdAt+re.settlementTimeoutMs<=Date.now()){const u=tt(e,"FAILED_TIMEOUT",{error:"Swap timed out waiting for confirmations."});return await je(u),u}const t=await Mv(e.txHash).catch(()=>null);if(!t)return e;if(Bv(t)==="revert"){const u=tt(e,"FAILED_REVERT",{error:"EVM transaction reverted."});return await je(u),u}const r=Uv(t),o=await zv().catch(()=>null),i=r&&o&&o>=r?o-r+1:e.confirmations||1;if(i>=re.settlementRequiredConfirmations){const u=tt(e,"CONFIRMED",{confirmations:i,error:null});return await je(u),u}const s=tt(e,"PENDING_CONFIRMATION",{confirmations:i});return await je(s),s}async function Jh(e){if(!e.txHash||e.routeSource!=="kaspa_native"||!Rc(e))return e;if(e.createdAt+re.settlementTimeoutMs<=Date.now()){const s=tt(e,"FAILED_TIMEOUT",{error:"Swap timed out waiting for confirmations."});return await je(s),s}const t=e.bridgeTransferId||"";if(!t){const s=zr(e,"KASPA_NATIVE_SETTLEMENT_MISSING_QUOTE_ID");return await je(s),s}const n=re.dexEndpoint;if(!n)return e;let r;try{const s=await bc();r=await dx({endpoint:n,network:s,quoteId:t,depositTxId:e.txHash})}catch{return e}if(r.state==="failed"){const s=zr(e,r.error||"KASPA_NATIVE_EXECUTION_FAILED");return await je(s),s}const o=await wx(e.txHash);if(o&&r.state==="confirmed"){const s=tt(e,"CONFIRMED",{confirmations:Math.max(1,r.confirmations||1),error:null});return await je(s),s}const i=tt(e,"PENDING_CONFIRMATION",{confirmations:o?1:0});return await je(i),i}async function Zh(e){return e.routeSource==="evm_0x"?kx(e):e.routeSource==="kaspa_native"?Jh(e):e}async function yf(){const t=(await Bo()).filter(r=>Rc(r)&&(r.routeSource==="evm_0x"||r.routeSource==="kaspa_native")),n=[];for(const r of t)n.push(await Zh(r));return n}async function Tx(){return Lv()}async function Ix(e){if(!e.transaction)throw new Error("SWAP_EXECUTION_UNSUPPORTED: missing EVM transaction payload.");const t=Qh();if(!t)throw new Error("EVM_SIDECAR_REQUIRED: connect external EVM signer first.");if(!Rv(e.transaction.to,re.zeroExExpectedSettlerTo))throw new Error("ZEROX_SETTLER_MISMATCH: refusing to execute unexpected transaction target.");const n=Gh("swap");let r=Wh(n,"evm_0x");r=tt(r,"QUOTED"),await je(r),r=tt(r,"SIGNED"),await je(r);let o="";try{o=await Dv({from:t.address,to:e.transaction.to,data:e.transaction.data,value:e.transaction.value||"0x0"})}catch(u){const c=tt(r,"FAILED_BRIDGE",{error:u instanceof Error?u.message:String(u)});return await je(c),c}r=tt(r,"SUBMITTED",{txHash:o,confirmations:0,error:null}),await je(r);const i=Date.now()+re.settlementTimeoutMs;for(;Date.now()<i;){if(r=await Zh(r),r.state==="CONFIRMED"||r.state==="FAILED_REVERT"||r.state==="FAILED_BRIDGE")return r;await new Promise(c=>setTimeout(c,re.settlementPollIntervalMs))}const s=tt(r,"FAILED_TIMEOUT",{error:"Swap timed out waiting for confirmations."});return await je(s),s}async function Cx(e){if(e.routeSource!=="kaspa_native")throw new Error("KASPA_NATIVE_ROUTE_REQUIRED");if(e.tokenIn!=="KAS")throw new Error("KASPA_NATIVE_INPUT_UNSUPPORTED: only KAS input is supported.");if(Date.now()>e.validUntil)throw new Error("KASPA_NATIVE_QUOTE_EXPIRED");const t=re.dexEndpoint;if(!t)throw new Error("KASPA_NATIVE_ENDPOINT_MISSING");const n=Vn();if(!(n!=null&&n.mnemonic))throw new Error("KASPA_NATIVE_SIGNER_REQUIRED: unlock managed Kaspa wallet.");const r=await bc(),o=Oo(n.address,r),i=lx(e),s=xx(e.amountIn),u=Gh("swap");let c=Wh(u,"kaspa_native");c=tt(c,"QUOTED"),await je(c),c=tt(c,"SIGNED"),await je(c);let d="";try{let h=await Rh(o,i.settlementAddress,s,r);await Ph(h);const S=await bh(h);if(!S.valid){const E=S.errors.join("; ");await Et({...h,state:"DRY_RUN_FAIL",error:E});const f=zr(c,`KASPA_NATIVE_DRY_RUN_FAILED: ${E}`);return await je(f),f}h={...h,state:"DRY_RUN_OK",fee:S.estimatedFee},await Et(h);const w=await jh(h);await Et(w);const x=await Oh(w);await Et(x),d=x.txId||w.txId||""}catch(h){const S=zr(c,h instanceof Error?h.message:String(h));return await je(S),S}if(!d){const h=zr(c,"KASPA_NATIVE_EXECUTION_NO_TXID");return await je(h),h}c=tt(c,"SUBMITTED",{txHash:d,bridgeTransferId:i.quoteId,confirmations:0,error:null}),await je(c);try{await ux({endpoint:t,network:r,quoteId:i.quoteId,depositTxId:d,walletAddress:o,amountIn:e.amountIn})}catch{}const m=Date.now()+re.settlementTimeoutMs;for(;Date.now()<m;){if(c=await Jh(c),c.state==="CONFIRMED"||c.state==="FAILED_REVERT"||c.state==="FAILED_BRIDGE"||c.state==="FAILED_TIMEOUT")return c;await new Promise(h=>setTimeout(h,re.settlementPollIntervalMs))}const g=zr(c,"Swap timed out waiting for confirmations.","FAILED_TIMEOUT");return await je(g),g}async function _x(e){if(e.routeSource==="kaspa_native")return Cx(e);if(e.routeSource==="evm_0x")return Ix(e);throw new Error(`SWAP_EXECUTION_UNSUPPORTED: ${e.routeSource||"unknown route"}`)}var Pf;const Sn=((Pf=import.meta)==null?void 0:Pf.env)??{},Nx=3500,Px=2e4,Rx=512,nn=new Map,Sf=100,bx=0,jx=200,Ox=12,Lx=35,Dx=55,Mx=8,zx=2,Bx=12e4,Ux=1500,Fx=3e4,vf=new Map;function Xl(e){const t=String((Sn==null?void 0:Sn[e])??"").trim();if(!t)return[];const n=t.split(/[,\s]+/).map(r=>r.trim().replace(/\/+$/,"")).filter(Boolean);return[...new Set(n)]}function yi(e,t){const n=String((Sn==null?void 0:Sn[e])??"").trim();if(!n)return t;const r=Number(n);return Number.isFinite(r)?Math.max(0,Math.floor(r)):t}function Si(e,t){const n=String((Sn==null?void 0:Sn[e])??"").trim();if(!n)return t;const r=Number(n);return Number.isFinite(r)?Math.max(0,r):t}function $x(){return yi("VITE_SWAP_KRC_TOKEN_METADATA_CACHE_TTL_MS",Px)}function Kx(){return Math.max(1,yi("VITE_SWAP_KRC_TOKEN_METADATA_CACHE_MAX_ENTRIES",Rx))}function Wx(){return Si("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_SUCCESS_REWARD",Ox)}function Vx(){return Si("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_FAILURE_PENALTY",Lx)}function Hx(){return Si("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_TIMEOUT_PENALTY",Dx)}function Gx(){return Si("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_MISS_PENALTY",Mx)}function Qx(){return Si("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_LATENCY_PENALTY_PER_100MS",zx)}function Xx(){return yi("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_DECAY_TAU_MS",Bx)}function Yx(){return yi("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_BACKOFF_BASE_MS",Ux)}function Jx(){return yi("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_BACKOFF_MAX_MS",Fx)}function Zx(e){return e==="testnet-10"?"TN10":e==="testnet-11"?"TN11":e==="testnet-12"?"TN12":"MAINNET"}function qh(e){const t=Zx(e),n=Xl("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINTS"),r=Xl(`VITE_KASPA_KASPLEX_${t}_API_ENDPOINTS`),o=Xl("VITE_KASPA_KASPLEX_API_ENDPOINTS");return[...new Set([...n,...r,...o])]}function eg(e,t={},n=Nx){const r=new AbortController,o=setTimeout(()=>r.abort(),n);return fetch(e,{...t,signal:r.signal}).finally(()=>clearTimeout(o))}function ru(e){return e&&typeof e=="object"&&!Array.isArray(e)?e:null}function qx(e){const t=["token","data","result","item","collection","metadata"];for(const n of t){const r=ru(e[n]);if(r)return r}return null}function on(e,t){for(const n of t){const r=e[n];if(typeof r=="string"&&r.trim())return r.trim()}return""}function ew(e,t){for(const n of t){const r=e[n],o=typeof r=="number"?r:Number(r);if(Number.isFinite(o))return o}return null}function Ds(e){return String(e||"").trim().toLowerCase()}function tg(e,t,n){return`${n}|${t}|${Ds(e)}`}function si(e){return{...e}}function tw(e){const t=nn.get(e);return t?t.expiresAt<=Date.now()?(nn.delete(e),null):(nn.delete(e),nn.set(e,t),si(t.token)):null}function ou(e,t){const n=$x();if(n<=0)return;nn.has(e)&&nn.delete(e),nn.set(e,{token:si(t),expiresAt:Date.now()+n});const r=Kx();for(;nn.size>r;){const o=nn.keys().next().value;if(typeof o!="string")break;nn.delete(o)}}function rs(e){return Math.max(bx,Math.min(jx,e))}function ng(e,t=Date.now()){let n=vf.get(e);if(!n)return n={score:Sf,consecutiveFailures:0,backoffUntil:0,lastUpdatedAt:t},vf.set(e,n),n;const r=Math.max(0,t-n.lastUpdatedAt),o=Xx();if(o>0&&r>0){const i=1-Math.exp(-r/o);n.score=rs(n.score+(Sf-n.score)*i)}return n.lastUpdatedAt=t,n}function nw(e){const t=Qx();return t<=0?0:Math.max(0,e)/100*t}function rg(e,t,n,r=Date.now()){const o=ng(e,r),i=nw(n);if(t==="success"){o.consecutiveFailures=0,o.backoffUntil=0,o.score=rs(o.score+Wx()-i);return}if(t==="miss"){o.score=rs(o.score-Gx()-i*.5),o.consecutiveFailures=Math.max(0,o.consecutiveFailures-1);return}const s=t==="timeout"?Hx():Vx();o.consecutiveFailures+=1,o.score=rs(o.score-s-i);const u=Yx(),c=Jx(),d=Math.min(c,u*Math.pow(2,Math.max(0,o.consecutiveFailures-1)));o.backoffUntil=r+d}function og(e,t=Date.now()){const n=[],r=[];for(const o of e){const i=ng(o,t);i.backoffUntil>t?r.push({endpoint:o,score:i.score,backoffUntil:i.backoffUntil}):n.push({endpoint:o,score:i.score})}return n.sort((o,i)=>i.score-o.score),n.length>0?n.map(o=>o.endpoint):(r.sort((o,i)=>o.backoffUntil-i.backoffUntil||i.score-o.score),r.length>0?[r[0].endpoint]:[])}function rw(e,t){const n=t==="krc721"?0:8;return Number.isFinite(e)?Math.max(0,Math.min(18,Math.floor(e))):n}function ow(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return t>>>0}function xf(e,t=64,n=52){return`hsl(${e%360} ${t}% ${n}%)`}function ig(e,t){const n=Ds(e),r=ow(`${t}:${n}`),o=xf(r),i=xf(r>>3),s=t==="krc721"?"721":"20",u=n.slice(0,6).toUpperCase(),c=`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'><defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop offset='0%' stop-color='${o}'/><stop offset='100%' stop-color='${i}'/></linearGradient></defs><rect width='120' height='120' rx='24' fill='url(#g)'/><text x='60' y='56' text-anchor='middle' font-family='IBM Plex Mono, monospace' font-size='18' fill='white'>${s}</text><text x='60' y='78' text-anchor='middle' font-family='IBM Plex Mono, monospace' font-size='10' fill='white'>${u}</text></svg>`;return`data:image/svg+xml;utf8,${encodeURIComponent(c)}`}function iw(e,t){const n=String(e??"").trim().toLowerCase();return n.includes("721")?"krc721":n.includes("20")?"krc20":n==="nft"?"krc721":n==="ft"?"krc20":t}function sg(e,t,n){const o=on(e,["address","tokenAddress","contractAddress","contract","id","assetId"])||t,i=iw(on(e,["standard","type","tokenType","protocol"]),n),s=on(e,["symbol","ticker","tick","tokenSymbol"])||o.slice(0,6).toUpperCase(),u=on(e,["name","collectionName","tokenName","title"])||s,c=ew(e,["decimals","decimal","precision"]),d=rw(c??(i==="krc721"?0:8),i),m=on(e,["logo","logoUrl","image","imageUrl","icon","iconUrl"])||ig(o,i);return{address:o,standard:i,symbol:s,name:u,decimals:d,logoUri:m}}function lg(e){const t=[],n=ru(e);if(!n)return t;t.push(n);const r=qx(n);r&&t.push(r);for(const o of["tokens","items","results","data"]){const i=n[o];if(Array.isArray(i))for(const s of i){const u=ru(s);u&&t.push(u)}}return t}function sw(e,t){const n=Ds(t);if(!n)return e[0]??null;for(const r of e){const o=Ds(on(r,["address","tokenAddress","contractAddress","contract","id","assetId"]));if(o&&o===n)return r}return e[0]??null}function lw(e,t){const n=encodeURIComponent(e);return t==="krc721"?[`/krc721/tokens/${n}`,`/krc721/collections/${n}`,`/krc721/${n}`,`/tokens/${n}`,`/token/${n}`,`/v1/krc721/${n}`]:[`/krc20/tokens/${n}`,`/krc20/token/${n}`,`/krc20/${n}`,`/tokens/${n}`,`/token/${n}`,`/v1/krc20/${n}`]}function aw(e,t){const n=encodeURIComponent(e);return t==="krc721"?[`/krc721/tokens?search=${n}`,`/krc721/tokens?q=${n}`,`/krc721/collections?search=${n}`,`/krc721/search?query=${n}`,`/tokens?search=${n}`,`/token/search?query=${n}`,`/v1/krc721/tokens?search=${n}`]:[`/krc20/tokens?search=${n}`,`/krc20/tokens?q=${n}`,`/krc20/search?query=${n}`,`/tokens?search=${n}`,`/token/search?query=${n}`,`/v1/krc20/tokens?search=${n}`]}function uw(e,t){const n=on(e,["symbol","ticker","tick","tokenSymbol"]).toLowerCase(),r=on(e,["name","collectionName","tokenName","title"]).toLowerCase(),o=on(e,["address","tokenAddress","contractAddress","contract","id","assetId"]).toLowerCase();return o?n===t?0:r===t?1:o===t?2:n.startsWith(t)?3:r.startsWith(t)?4:n.includes(t)?5:r.includes(t)?6:Number.POSITIVE_INFINITY:Number.POSITIVE_INFINITY}function cw(e,t){const n=String(t||"").trim().toLowerCase();if(!n)return null;let r=null,o=Number.POSITIVE_INFINITY;for(const i of e){const s=uw(i,n);s<o&&(r=i,o=s)}return Number.isFinite(o)?r:null}async function dw(e,t,n){const r=Date.now(),o=e.replace(/\/+$/,""),i=lw(t,n);let s=!1,u=!1;for(const c of i)try{const d=await eg(`${o}${c}`,{method:"GET"});if(!d.ok){(d.status>=500||d.status===429)&&(s=!0);continue}const m=await d.json().catch(()=>null);if(!m){s=!0;continue}const g=lg(m);if(g.length===0)continue;const h=sw(g,t);if(!h)continue;return{token:sg(h,t,n),outcome:"success",elapsedMs:Math.max(0,Date.now()-r)}}catch(d){d instanceof Error&&d.name==="AbortError"?u=!0:s=!0}return{token:null,outcome:u?"timeout":s?"failure":"miss",elapsedMs:Math.max(0,Date.now()-r)}}async function fw(e,t,n){const r=Date.now(),o=e.replace(/\/+$/,""),i=aw(t,n);let s=!1,u=!1;for(const c of i)try{const d=await eg(`${o}${c}`,{method:"GET"});if(!d.ok){(d.status>=500||d.status===429)&&(s=!0);continue}const m=await d.json().catch(()=>null);if(!m){s=!0;continue}const g=lg(m);if(g.length===0)continue;const h=cw(g,t);if(!h)continue;const S=on(h,["address","tokenAddress","contractAddress","contract","id","assetId"]);if(!S)continue;return{token:sg(h,S,n),outcome:"success",elapsedMs:Math.max(0,Date.now()-r)}}catch(d){d instanceof Error&&d.name==="AbortError"?u=!0:s=!0}return{token:null,outcome:u?"timeout":s?"failure":"miss",elapsedMs:Math.max(0,Date.now()-r)}}async function ag(e,t,n){const r=String(e||"").trim();if(!r)throw new Error("Token address is required.");const o=tg(r,t,n),i=tw(o);if(i)return i;const s=og(qh(n));for(const c of s){const d=await dw(c,r,t);if(rg(c,d.outcome,d.elapsedMs),d.token)return ou(o,d.token),si(d.token)}const u={address:r,standard:t,symbol:r.slice(0,6).toUpperCase(),name:t==="krc721"?"KRC721 Token":"KRC20 Token",decimals:t==="krc721"?0:8,logoUri:ig(r,t)};return ou(o,u),si(u)}function pw(e){const t=String(e||"").trim();return t?t.includes(":")||/^0x[a-fA-F0-9]{40}$/.test(t)?!0:/^[a-zA-Z0-9_-]{24,}$/.test(t):!1}async function mw(e,t,n){const r=String(e||"").trim();if(!r)return null;if(pw(r))return ag(r,t,n);const o=og(qh(n));for(const i of o){const s=await fw(i,r,t);if(rg(i,s.outcome,s.elapsedMs),s.token)return ou(tg(s.token.address,s.token.standard,n),s.token),si(s.token)}return null}const hw={KAS:"../icons/kaspa-logo.png",USDC:"../icons/usdc.png",USDT:"../icons/usdt.png"};function Ki({symbol:e,logoUri:t,size:n=22}){const r=t??hw[e];return r?l.jsx("img",{src:r,alt:e,style:{width:n,height:n,borderRadius:"50%",objectFit:"contain",flexShrink:0,background:"rgba(57,221,182,0.08)"},onError:o=>{o.currentTarget.style.display="none"}}):l.jsx("div",{style:{width:n,height:n,borderRadius:"50%",background:"rgba(57,221,182,0.18)",border:"1px solid rgba(57,221,182,0.35)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:l.jsx("span",{style:{color:"#39DDB6",fontSize:n*.45,fontWeight:800},children:e.slice(0,1)})})}function wf(e){return 36}function gw(e,t){const n=String(e||"").trim();if(!n||!/^\d+(\.\d+)?$/.test(n))return null;const[r,o=""]=n.split("."),i=r.replace(/^0+(?=\d)/,"")||"0",s=o.slice(0,t).padEnd(t,"0"),u=`${i}${s}`.replace(/^0+(?=\d)/,"")||"0";try{return BigInt(u)}catch{return null}}function Yl(e,t,n=6){const r=e<0n,o=r?-e:e,i=10n**BigInt(Math.max(0,t)),s=o/i,u=o%i;let c=s.toString();if(c.length>15&&(c=`${c.slice(0,6)}${c.slice(-4)}`),u===0n||t<=0)return`${r?"-":""}${c}`;let d=u.toString().padStart(t,"0").slice(0,n);return d=d.replace(/0+$/,""),d?`${r?"-":""}${c}.${d}`:`${r?"-":""}${c}`}function yw(){const[e,t]=A.useState(()=>tu()),[n,r]=A.useState(null),[o,i]=A.useState([]),[s,u]=A.useState(null),[c,d]=A.useState(!1),[m,g]=A.useState(!1),[h,S]=A.useState(!1),[w,x]=A.useState(!1),[E,f]=A.useState(!1),p=Yh(),y=Dh(),[v,T]=A.useState("KAS"),[k,C]=A.useState("USDC"),[P,W]=A.useState(""),[b,ee]=A.useState(re.defaultSlippageBps),[ie,q]=A.useState(""),[Re,ce]=A.useState("krc20"),[J,te]=A.useState(null),[O,z]=A.useState(!1),[U,F]=A.useState(null),[Q,pe]=A.useState(!1),[de,X]=A.useState(!1),[ae,B]=A.useState(null),[se,Se]=A.useState(!0),[le,Ue]=A.useState(""),[Nt,Ft]=A.useState("20"),[rt,Xe]=A.useState("auto"),be=!p.enabled,Ye=ie.trim().toLowerCase();Ye&&y.filter(_=>`${_.symbol} ${_.name} ${_.id}`.toLowerCase().includes(Ye)).slice(0,8);const Fe=y.find(_=>_.id===k)??null;A.useEffect(()=>{t(tu()),yf().catch(()=>{}),Bo().then(i).catch(()=>{})},[]),A.useEffect(()=>{const _=setInterval(()=>{yf().then(()=>Bo().then(D=>i(D.slice(0,4)))).catch(()=>{})},re.settlementPollIntervalMs);return()=>clearInterval(_)},[]);const St=async()=>{const _=await Bo();i(_.slice(0,4))},ge=()=>{r(null),u(null),f(!1)},$=async()=>{u(null);const _=y.find(Z=>Z.id===v),D=gw(P,(_==null?void 0:_.decimals)??8);if(!D||D<=0n){u("Enter a valid amount.");return}g(!0);try{const Z=await Ax({tokenIn:v,tokenOut:k,amountIn:D,slippageBps:b,customTokenOut:J},{routeSource:cn,allowHybridAuto:rt==="auto"});if(!Z){u(p.reason??"Swap is currently unavailable.");return}r(Z)}catch(Z){u(Z instanceof Error?Z.message:String(Z))}finally{g(!1)}},ne=async _=>{F(null),u(null);const D=String(_||"").trim();if(!D){F("Paste a token address first.");return}z(!0);try{const Z=await _s().catch(()=>"mainnet"),qt=await ag(D,Re,Z);q(D),te(qt),C("USDC"),X(!1),ge()}catch(Z){te(null),F(Z instanceof Error?Z.message:String(Z))}finally{z(!1)}},I=()=>{te(null),F(null),X(!1),ge()},K=async()=>{var _;if(F(null),u(null),!((_=navigator==null?void 0:navigator.clipboard)!=null&&_.readText)){F("Clipboard read is unavailable in this browser.");return}pe(!0);try{const Z=(await navigator.clipboard.readText()).trim();if(!Z){F("Clipboard is empty.");return}q(Z),te(null),X(!1),ge(),await Ee(Z)}catch(D){F(D instanceof Error?D.message:"Failed to read clipboard.")}finally{pe(!1)}},G=_=>{C(_),te(null),F(null),X(!1),q(""),ge()},Ee=async _=>{F(null),u(null);const D=String(_??ie).trim();if(!D){F("Type a token name/symbol or paste a token address.");return}const Z=D.toLowerCase(),qt=y.find(dn=>dn.id.toLowerCase()===Z||dn.symbol.toLowerCase()===Z||dn.name.toLowerCase()===Z);if(qt){if(!qt.enabled){F(qt.disabledReason??`${qt.symbol} is not currently available.`);return}G(qt.id);return}const qn=y.find(dn=>`${dn.symbol} ${dn.name} ${dn.id}`.toLowerCase().includes(Z));if(qn){if(!qn.enabled){F(qn.disabledReason??`${qn.symbol} is not currently available.`);return}G(qn.id);return}const sl=await _s().catch(()=>"mainnet"),uo=await mw(D,Re,sl);if(uo){te(uo),C("USDC"),X(!1),ge();return}await ne(D)},Ve=async()=>{var _;if(J!=null&&J.address&&(_=navigator==null?void 0:navigator.clipboard)!=null&&_.writeText)try{await navigator.clipboard.writeText(J.address),X(!0),setTimeout(()=>X(!1),1400)}catch{}},$t=async()=>{u(null),d(!0);try{const _=await Tx();t(_),x(!1)}catch(_){u(_ instanceof Error?_.message:String(_))}finally{d(!1)}},Yn=()=>{Ov(),t(null)},Jn=async()=>{if(n){u(null),S(!0);try{await _x(n),f(!1),await St()}catch(_){u(_ instanceof Error?_.message:String(_))}finally{S(!1)}}},vt=()=>{if(!new Set(y.filter(D=>D.enabled).map(D=>D.id)).has(k)){u(`Cannot flip while ${k} is disabled for input.`);return}T(k),C(v),I(),ge()},fe=y.find(_=>_.id===v),Ae=J?{symbol:J.symbol,name:J.name,logoUri:J.logoUri}:Fe?{symbol:Fe.symbol,name:Fe.name,logoUri:void 0}:null,cn=rt==="auto"?re.routeSource:rt,Pt=Tc(v,J?"USDC":k,cn,{allowHybridAuto:rt==="auto"});fe==null||fe.decimals;const Zn=(J==null?void 0:J.decimals)??(Fe==null?void 0:Fe.decimals)??8,xr=n?Yl(n.amountOut,Zn,6):"0.00",L=rt==="auto"?"AUTO":rt==="kaspa_native"?"KASPA":"0x EVM",V=Ye?y.filter(_=>`${_.symbol} ${_.name} ${_.id}`.toLowerCase().includes(Ye)):y,me=()=>{B(null),q(""),F(null)},Zt=_=>{ae==="from"?(T(_),ge()):G(_),me()},ct={background:"linear-gradient(155deg, rgba(14,20,29,0.97) 0%, rgba(10,15,22,0.94) 100%)",border:"1px solid rgba(28,42,58,0.9)",borderRadius:18,padding:"16px 16px 14px",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.05), 0 10px 28px rgba(0,0,0,0.32)"},Kt=_=>({display:"flex",alignItems:"center",gap:7,background:_?"rgba(24,34,48,0.95)":"linear-gradient(90deg, rgba(57,221,182,0.12), rgba(57,221,182,0.06))",border:`1px solid ${_?"rgba(28,42,58,0.9)":"rgba(57,221,182,0.3)"}`,borderRadius:999,padding:_?"8px 12px 8px 9px":"8px 14px",color:_?a.text:a.accent,fontSize:13,fontWeight:700,cursor:be?"not-allowed":"pointer",flexShrink:0,whiteSpace:"nowrap",...j});if(ae!==null){const _=Q||O;return l.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",minHeight:440},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"14px 15px 12px",borderBottom:`1px solid ${a.border}`},children:[l.jsx("button",{onClick:me,style:{background:"none",border:"none",color:a.dim,cursor:"pointer",fontSize:18,display:"flex",alignItems:"center",padding:"0 4px 0 0"},children:""}),l.jsx("span",{style:{fontSize:13,fontWeight:700,color:a.text,letterSpacing:"0.04em"},children:"Select a Token"}),l.jsx("span",{style:{marginLeft:"auto",fontSize:9,fontWeight:700,letterSpacing:"0.1em",color:ae==="from"?a.accent:a.dim,background:ae==="from"?`${a.accent}15`:"rgba(28,42,58,0.5)",border:`1px solid ${ae==="from"?`${a.accent}30`:a.border}`,borderRadius:4,padding:"2px 7px"},children:ae==="from"?"FROM":"TO"})]}),l.jsxs("div",{style:{padding:"12px 15px 0"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,background:"rgba(10,15,22,0.9)",border:`1px solid ${a.border}`,borderRadius:12,overflow:"hidden"},children:[l.jsx("span",{style:{padding:"0 10px",color:a.dim,fontSize:14,flexShrink:0},children:""}),l.jsx("input",{autoFocus:!0,value:ie,onChange:D=>{q(D.target.value),J&&(te(null),X(!1)),F(null),ge()},onKeyDown:D=>{D.key==="Enter"&&(D.preventDefault(),_||Ee().catch(()=>{}))},placeholder:"Search name or symbol",style:{flex:1,background:"none",border:"none",outline:"none",color:a.text,fontSize:11,padding:"11px 0",...j}}),l.jsx("button",{onClick:K,disabled:_,style:{marginRight:6,background:_?"rgba(22,32,45,0.8)":"rgba(57,221,182,0.12)",border:`1px solid ${_?a.border:`${a.accent}35`}`,borderRadius:8,color:_?a.dim:a.accent,fontSize:9,fontWeight:700,letterSpacing:"0.08em",padding:"6px 9px",cursor:_?"wait":"pointer",...j},children:_?"":"PASTE"}),l.jsx("button",{onClick:()=>{_||Ee().catch(()=>{})},disabled:_,style:{marginRight:6,background:"rgba(22,32,45,0.8)",border:`1px solid ${a.border}`,borderRadius:8,color:a.text,fontSize:9,fontWeight:700,letterSpacing:"0.08em",padding:"6px 9px",cursor:_?"wait":"pointer",...j},children:"GO"})]}),l.jsx("div",{style:{fontSize:8,color:a.muted,marginTop:7,paddingLeft:2},children:"Paste token address, then press GO (or Enter) to resolve."}),l.jsx("div",{style:{display:"flex",gap:6,marginTop:10},children:["krc20","krc721"].map(D=>{const Z=Re===D;return l.jsx("button",{onClick:()=>ce(D),style:{flex:1,padding:"5px 0",fontSize:9,fontWeight:700,letterSpacing:"0.08em",borderRadius:8,cursor:"pointer",background:Z?`${a.accent}18`:"rgba(16,25,35,0.5)",border:`1px solid ${Z?`${a.accent}45`:a.border}`,color:Z?a.accent:a.dim,...j},children:D.toUpperCase()},D)})})]}),U&&l.jsx("div",{style:{margin:"8px 15px 0",fontSize:9,color:a.danger,padding:"6px 10px",background:`${a.danger}0D`,borderRadius:8,border:`1px solid ${a.danger}30`},children:U}),J&&l.jsxs("div",{style:{margin:"10px 15px 0",background:`${a.accent}0A`,border:`1px solid ${a.accent}30`,borderRadius:12,padding:"10px 12px"},children:[l.jsx("div",{style:{fontSize:8,color:a.accent,letterSpacing:"0.1em",marginBottom:8},children:"RESOLVED TOKEN"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[l.jsx(Ki,{symbol:J.symbol,logoUri:J.logoUri,size:34}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{style:{fontSize:12,color:a.text,fontWeight:700},children:J.symbol}),l.jsx("div",{style:{fontSize:9,color:a.dim,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:J.address})]}),l.jsx("button",{onClick:Ve,style:{...xe(de?a.ok:a.dim),padding:"4px 8px",fontSize:8},children:de?"":"COPY ADDR"})]}),l.jsxs("button",{onClick:()=>{ae==="to"&&(B(null),q(""),F(null))},style:{...Nn(!0),width:"100%",padding:"9px 0",marginTop:10,fontSize:10},children:["SELECT ",J.symbol," "]})]}),l.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"10px 15px 16px"},children:[!Ye&&l.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.1em",marginBottom:8},children:"POPULAR TOKENS"}),V.map((D,Z)=>l.jsxs("button",{onClick:()=>Zt(D.id),disabled:!D.enabled,style:{width:"100%",background:"none",border:"none",display:"flex",alignItems:"center",gap:12,padding:"9px 4px",borderBottom:Z<V.length-1?"1px solid rgba(28,42,58,0.6)":"none",cursor:D.enabled?"pointer":"not-allowed",borderRadius:0},children:[l.jsx(Ki,{symbol:D.symbol,size:36}),l.jsxs("div",{style:{flex:1,textAlign:"left"},children:[l.jsx("div",{style:{fontSize:13,color:D.enabled?a.text:a.dim,fontWeight:700,...j},children:D.symbol}),l.jsx("div",{style:{fontSize:10,color:a.dim,marginTop:1},children:D.name})]}),!D.enabled&&l.jsx("span",{style:{fontSize:8,fontWeight:700,letterSpacing:"0.08em",color:a.warn,background:`${a.warn}12`,border:`1px solid ${a.warn}30`,borderRadius:4,padding:"2px 7px",...j},children:"SOON"}),D.enabled&&(v===D.id&&ae==="from"||k===D.id&&ae==="to")&&l.jsx("span",{style:{fontSize:12,color:a.accent},children:""})]},D.id)),Ye&&V.length===0&&!O&&!J&&l.jsxs("div",{style:{textAlign:"center",padding:"24px 0",color:a.dim,fontSize:10},children:[l.jsx("div",{style:{marginBottom:6},children:"No token found."}),l.jsx("div",{style:{fontSize:9,color:a.muted},children:"Paste a KRC20 contract address to add it."})]})]})]})}return l.jsxs("div",{style:{...lr,gap:8},children:[be&&l.jsxs("div",{style:{...et("purple"),display:"flex",alignItems:"flex-start",gap:10},children:[l.jsx("span",{style:{fontSize:16,flexShrink:0},children:""}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:9,color:a.purple,fontWeight:700,letterSpacing:"0.1em",marginBottom:3},children:"SWAP UNAVAILABLE"}),l.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5},children:p.reason??"Swap coming soon to Kaspa."})]})]}),Pt.requiresEvmSigner&&l.jsxs("div",{style:et("default",!0),children:[l.jsx("div",{style:{...Mt,marginBottom:6},children:"EVM SIDECAR"}),e?l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{fontSize:8,color:a.text,marginBottom:6},children:[e.address.slice(0,8),"",e.address.slice(-6)," (chain ",e.chainId,")"]}),l.jsx("button",{onClick:Yn,style:{...xe(a.warn),width:"100%",padding:"7px 0"},children:"DISCONNECT"})]}):w?l.jsxs("div",{style:{...Le(),padding:"8px 10px"},children:[l.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5,marginBottom:6},children:"Forge-OS Kaspa keys are not shared with this signer."}),l.jsxs("div",{style:{display:"flex",gap:6},children:[l.jsx("button",{onClick:$t,style:{...Nn(!0),flex:1,padding:"7px 0"},disabled:c,children:c?"CONNECTING":"CONNECT"}),l.jsx("button",{onClick:()=>x(!1),style:{...xe(a.dim),flex:1,padding:"7px 0"},children:"CANCEL"})]})]}):l.jsx("button",{onClick:()=>x(!0),style:{...xe(a.accent),width:"100%",padding:"7px 0"},disabled:c,children:"CONNECT METAMASK SIDECAR"})]}),l.jsxs("div",{style:ct,children:[l.jsx("div",{style:{fontSize:11,color:a.dim,marginBottom:12,letterSpacing:"0.04em"},children:"from"}),l.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,minWidth:0},children:l.jsxs("button",{onClick:()=>!be&&B("from"),style:Kt(!0),children:[l.jsx(Ki,{symbol:(fe==null?void 0:fe.symbol)??"KAS",size:wf(fe==null?void 0:fe.symbol)}),l.jsx("span",{children:(fe==null?void 0:fe.symbol)??"KAS"}),l.jsx("span",{style:{color:a.dim,fontSize:11},children:""})]})}),l.jsx("input",{type:"number",min:"0",value:P,onChange:_=>W(_.target.value),placeholder:"0.00",disabled:be,style:{width:"100%",minWidth:0,marginTop:12,background:"none",border:"none",outline:"none",color:be?a.dim:a.text,fontSize:20,fontWeight:600,textAlign:"center",cursor:be?"not-allowed":"text",lineHeight:1.1,...j}}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10},children:[l.jsxs("div",{style:{fontSize:10,color:a.dim},children:["Available: 0 ",(fe==null?void 0:fe.symbol)??"KAS"]}),l.jsx("button",{onClick:()=>{},style:{background:`${a.accent}12`,border:`1px solid ${a.accent}30`,borderRadius:6,color:a.accent,fontSize:9,fontWeight:700,padding:"2px 8px",cursor:"pointer",letterSpacing:"0.06em",...j},children:"MAX"})]})]}),l.jsx("div",{style:{display:"flex",justifyContent:"center",margin:"-4px 0",zIndex:1},children:l.jsx("button",{disabled:be,onClick:vt,style:{background:"rgba(14,20,29,0.98)",border:"1px solid rgba(28,42,58,0.9)",borderRadius:"50%",width:34,height:34,color:be?a.muted:a.text,fontSize:16,cursor:be?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 16px rgba(0,0,0,0.4)"},children:""})}),l.jsxs("div",{style:ct,children:[l.jsx("div",{style:{fontSize:11,color:a.dim,marginBottom:12,letterSpacing:"0.04em"},children:"to"}),l.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,minWidth:0},children:Ae?l.jsxs("button",{onClick:()=>!be&&B("to"),style:Kt(!0),children:[l.jsx(Ki,{symbol:Ae.symbol,logoUri:Ae.logoUri,size:wf(Ae.symbol)}),l.jsx("span",{children:Ae.symbol}),l.jsx("span",{style:{color:a.dim,fontSize:11},children:""})]}):l.jsxs("button",{onClick:()=>!be&&B("to"),style:Kt(!1),children:[l.jsx("span",{children:"Select Token"}),l.jsx("span",{style:{fontSize:11},children:""})]})}),l.jsx("div",{style:{width:"100%",minWidth:0,marginTop:12,textAlign:"center",color:n?a.text:a.dim,fontSize:20,fontWeight:600,...j,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:1.1},children:xr}),l.jsxs("div",{style:{fontSize:10,color:a.dim,marginTop:10},children:["Available: 0 ",(Ae==null?void 0:Ae.symbol)??""]})]}),l.jsxs("div",{style:{padding:"2px 4px"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{style:{fontSize:10,color:a.dim},children:["Rate: ",l.jsxs("span",{style:{color:a.text},children:["1 ",(fe==null?void 0:fe.symbol)??"KAS","  ",n?`~${Yl(n.amountOut,Zn,4)}`:""," ",(Ae==null?void 0:Ae.symbol)??""]})]}),l.jsx("button",{onClick:()=>Se(!se),style:{background:se?`${a.accent}12`:"none",border:`1px solid ${se?`${a.accent}35`:a.border}`,borderRadius:8,padding:"4px 10px",color:se?a.accent:a.dim,fontSize:9,fontWeight:700,letterSpacing:"0.06em",cursor:"pointer",...j},children:" SETTINGS"})]}),se&&l.jsxs("div",{style:{marginTop:8,padding:"12px 14px",background:"linear-gradient(155deg, rgba(14,20,29,0.97) 0%, rgba(10,15,22,0.94) 100%)",border:"1px solid rgba(28,42,58,0.9)",borderRadius:14},children:[l.jsx("div",{style:{fontSize:9,color:a.dim,letterSpacing:"0.1em",marginBottom:8,fontWeight:700},children:"SLIPPAGE TOLERANCE"}),l.jsxs("div",{style:{display:"flex",gap:5,alignItems:"center"},children:[[25,50,100,200].map(_=>{const D=b===_&&!le;return l.jsx("button",{onClick:()=>{ee(_),Ue("")},style:{flex:1,padding:"7px 0",borderRadius:8,fontSize:10,fontWeight:700,background:D?`${a.accent}20`:"rgba(22,32,45,0.8)",border:`1px solid ${D?`${a.accent}55`:a.border}`,color:D?a.accent:a.dim,cursor:"pointer",...j},children:_===200?"2%":`${(_/100).toFixed(2).replace(".00","")}%`},_)}),l.jsx("input",{value:le,onChange:_=>{Ue(_.target.value);const D=parseFloat(_.target.value);!isNaN(D)&&D>0&&D<=50&&ee(Math.round(D*100))},placeholder:"Custom",style:{flex:1,background:le?`${a.accent}10`:"rgba(22,32,45,0.8)",border:`1px solid ${le?`${a.accent}55`:a.border}`,borderRadius:8,color:a.text,fontSize:10,textAlign:"center",padding:"7px 4px",outline:"none",...j}})]}),l.jsxs("div",{style:{fontSize:9,color:a.muted,marginTop:8},children:["Current slippage:"," ",l.jsxs("span",{style:{color:b>150?a.warn:a.text,fontWeight:600},children:[(b/100).toFixed(2),"%"]}),b>150&&l.jsx("span",{style:{color:a.warn},children:"  High slippage. Proceed with caution."})]}),l.jsxs("div",{style:{marginTop:12,paddingTop:10,borderTop:"1px solid rgba(28,42,58,0.7)"},children:[l.jsx("div",{style:{fontSize:9,color:a.dim,letterSpacing:"0.1em",marginBottom:6,fontWeight:700},children:"STANDARD SETTINGS"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{style:{background:"rgba(22,32,45,0.8)",border:`1px solid ${a.border}`,borderRadius:8,padding:"7px 8px"},children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:4},children:"Deadline (min)"}),l.jsx("input",{value:Nt,onChange:_=>{const D=_.target.value.replace(/[^\d]/g,"");if(!D){Ft("");return}const Z=Math.max(1,Math.min(120,Number(D)));Ft(String(Z))},placeholder:"20",style:{width:"100%",background:"none",border:"none",outline:"none",color:a.text,fontSize:11,...j}})]}),l.jsxs("div",{style:{background:"rgba(22,32,45,0.8)",border:`1px solid ${a.border}`,borderRadius:8,padding:"7px 8px"},children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:4},children:"Route Source"}),l.jsx("div",{style:{display:"flex",gap:4,marginBottom:7},children:[{id:"auto",label:"AUTO"},{id:"kaspa_native",label:"KASPA"},{id:"evm_0x",label:"0x EVM"}].map(_=>{const D=rt===_.id;return l.jsx("button",{onClick:()=>{Xe(_.id),u(null),ge()},style:{flex:1,padding:"5px 0",borderRadius:7,fontSize:8,fontWeight:700,background:D?`${a.accent}20`:"rgba(16,25,35,0.5)",border:`1px solid ${D?`${a.accent}45`:a.border}`,color:D?a.accent:a.dim,cursor:"pointer",...j},children:_.label},_.id)})}),l.jsxs("div",{style:{fontSize:10,color:a.text,...j},children:[Pt.label.toUpperCase()," (",L,")"]}),!Pt.allowed&&Pt.reason&&l.jsx("div",{style:{fontSize:8,color:a.warn,lineHeight:1.4,marginTop:4},children:Pt.reason})]})]})]}),l.jsxs("div",{style:{marginTop:12,paddingTop:10,borderTop:"1px solid rgba(28,42,58,0.7)"},children:[l.jsx("div",{style:{fontSize:9,color:a.dim,letterSpacing:"0.1em",marginBottom:6,fontWeight:700},children:"NETWORK"}),l.jsx("div",{style:{fontSize:10,color:a.text},children:"Kaspa Mainnet  BlockDAG  10 BPS"}),l.jsx("div",{style:{fontSize:9,color:a.dim,marginTop:3},children:"Transactions confirm in ~1 second on average."})]})]})]}),be?l.jsx("div",{style:{textAlign:"center",padding:"8px 0"},children:l.jsx("div",{style:{fontSize:9,color:a.muted,letterSpacing:"0.1em"},children:"SWAP COMING SOON TO KASPA"})}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:$,style:{...Nn(!0),width:"100%",padding:"14px 0",fontSize:12,letterSpacing:"0.08em",borderRadius:14},disabled:m,children:m?"PREPARING SWAP":"SWAP"}),n&&l.jsxs("div",{style:{...et("accent",!0)},children:[l.jsx("div",{style:{...Mt,marginBottom:8,color:a.accent},children:"SWAP PREVIEW"}),n.customTokenOut&&l.jsxs("div",{style:{fontSize:9,color:a.dim,marginBottom:4},children:["Output: ",l.jsxs("span",{style:{color:a.text},children:[n.customTokenOut.symbol," (",n.customTokenOut.standard.toUpperCase(),")"]})]}),l.jsxs("div",{style:{fontSize:9,color:a.dim,marginBottom:3},children:["Route: ",l.jsx("span",{style:{color:a.text},children:n.route.join("  ")})]}),l.jsxs("div",{style:{fontSize:9,color:a.dim,marginBottom:10},children:["Min received: ",l.jsxs("span",{style:{color:a.text},children:[Yl(n.amountOut,Zn,6)," ",(Ae==null?void 0:Ae.symbol)??k]})]}),l.jsxs("div",{style:{fontSize:9,color:a.dim,marginBottom:10},children:["Deadline: ",l.jsxs("span",{style:{color:a.text},children:[Nt||"20","m"]})]}),E?l.jsxs("div",{style:{...Le(),padding:"10px 12px"},children:[l.jsx("div",{style:{fontSize:9,color:a.dim,lineHeight:1.6,marginBottom:8},children:n.routeSource==="kaspa_native"?"This will sign and broadcast via the managed Kaspa signer. Settlement is saved and recovers after restart.":"This will sign and broadcast via the external EVM signer. Settlement is saved and recovers after restart."}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{onClick:Jn,style:{...Nn(!0),flex:1,padding:"9px 0"},disabled:h,children:h?"EXECUTING":"CONFIRM"}),l.jsx("button",{onClick:()=>f(!1),style:{...xe(a.dim),flex:1,padding:"9px 0"},children:"CANCEL"})]})]}):l.jsx("button",{onClick:()=>f(!0),style:{...Nn(!0),width:"100%",padding:"10px 0",borderRadius:10},disabled:h,children:"SIGN & EXECUTE SWAP"})]})]}),s&&l.jsx("div",{style:{...Le(),border:`1px solid ${a.danger}50`,color:a.danger,fontSize:9,lineHeight:1.5},children:s}),o.length>0&&l.jsxs("div",{style:{...Le(),padding:"10px 12px"},children:[l.jsx("div",{style:{...Mt,marginBottom:6},children:"RECENT SWAPS"}),o.map((_,D)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:D<o.length-1?6:0},children:[l.jsx("div",{style:{width:6,height:6,borderRadius:"50%",flexShrink:0,background:_.state==="settled"?a.ok:_.state==="failed"?a.danger:a.warn}}),l.jsx("span",{style:{fontSize:9,color:a.text,flex:1},children:_.state}),l.jsx("span",{style:{fontSize:8,color:a.dim},children:_.txHash?`${_.txHash.slice(0,8)}`:"pending"}),l.jsx("span",{style:{fontSize:8,color:a.muted},children:new Date(_.updatedAt).toLocaleTimeString()})]},_.id))]})]})}const oo=1,li=440,ai=720,ug=li,cg=ai;function Sw({autoLockMinutes:e,persistSession:t,onUnlock:n,onReset:r,walletAddress:o}){const[i,s]=A.useState(""),[u,c]=A.useState(null),[d,m]=A.useState(!1),[g,h]=A.useState(!1),S=A.useRef(null);A.useEffect(()=>{var x;(x=S.current)==null||x.focus()},[]);const w=async x=>{var E;if(x.preventDefault(),!(!i||d)){m(!0),c(null);try{const f=await gr(i,e,{persistSession:t});n(f)}catch(f){const p=f instanceof Error?f.message:String(f);c(p==="INVALID_PASSWORD"?"Incorrect password.":"Failed to unlock. Try again."),s(""),(E=S.current)==null||E.focus()}finally{m(!1)}}};return l.jsxs("div",{style:{width:li,minHeight:ai,...ro(),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",padding:"28px 30px 24px",...j,position:"relative",overflow:"hidden",overflowX:"hidden",overflowY:"auto",zoom:oo},children:[l.jsx("div",{style:{position:"absolute",top:"-12%",left:"50%",transform:"translateX(-50%)",width:360,height:360,borderRadius:"50%",background:`radial-gradient(ellipse, ${a.accent}18 0%, transparent 70%)`,pointerEvents:"none"}}),l.jsx("div",{style:{position:"absolute",bottom:"-10%",right:"-32%",width:260,height:260,borderRadius:"50%",background:`radial-gradient(ellipse, ${a.accent}0A 0%, transparent 72%)`,pointerEvents:"none"}}),l.jsxs("div",{style:{position:"relative",zIndex:1,width:"100%",display:"flex",flexDirection:"column",alignItems:"center",marginTop:4},children:[l.jsxs("div",{style:{marginBottom:o?14:22,textAlign:"center"},children:[l.jsx("img",{src:"../icons/icon128.png",alt:"Forge-OS",style:{width:58,height:58,objectFit:"contain",imageRendering:"auto",filter:"drop-shadow(0 0 8px rgba(57,221,182,0.52))",marginBottom:12}}),l.jsxs("div",{style:{fontSize:17,fontWeight:700,letterSpacing:"0.12em"},children:[l.jsx("span",{style:{color:a.accent},children:"FORGE"}),l.jsx("span",{style:{color:a.text},children:"-OS"})]}),l.jsx("div",{style:{fontSize:10,color:a.dim,marginTop:5,letterSpacing:"0.12em"},children:o?"WELCOME BACK":"WALLET LOCKED"})]}),o&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:16,background:`${a.accent}0A`,border:`1px solid ${a.accent}25`,borderRadius:20,padding:"6px 14px"},children:[l.jsx("div",{style:{width:7,height:7,borderRadius:"50%",background:a.ok,flexShrink:0}}),l.jsx("span",{style:{fontSize:11,color:a.text,fontWeight:600},children:mi(o)})]}),l.jsx("div",{style:{width:48,height:48,borderRadius:"50%",background:`${a.accent}15`,border:`1px solid ${a.accent}30`,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:18},children:l.jsx("span",{style:{fontSize:22},children:""})}),l.jsxs("form",{onSubmit:w,style:{width:"100%"},children:[l.jsxs("div",{style:{marginBottom:12},children:[l.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.1em",marginBottom:6},children:o?"ENTER PASSWORD TO SIGN IN":"PASSWORD"}),l.jsx("input",{ref:S,type:"password",value:i,onChange:x=>s(x.target.value),placeholder:"Enter your password",disabled:d,style:{width:"100%",boxSizing:"border-box",background:"rgba(8,13,20,0.7)",border:`1px solid ${u?a.danger:a.border}`,borderRadius:8,padding:"10px 12px",color:a.text,fontSize:11,...j,outline:"none"}})]}),u&&l.jsx("div",{style:{fontSize:8,color:a.danger,marginBottom:10,textAlign:"center"},children:u}),l.jsx("button",{type:"submit",disabled:!i||d,style:{width:"100%",padding:"10px 0",background:i&&!d?`linear-gradient(90deg, ${a.accent}, #7BE9CF)`:`${a.accent}30`,border:"none",borderRadius:8,color:i&&!d?"#04110E":a.dim,fontSize:10,fontWeight:700,cursor:i&&!d?"pointer":"not-allowed",letterSpacing:"0.1em",...j,transition:"background 0.15s, color 0.15s"},children:d?"UNLOCKING":"UNLOCK WALLET"})]}),l.jsx("div",{style:{marginTop:20,textAlign:"center"},children:g?l.jsxs("div",{style:{background:a.dLow,border:`1px solid ${a.danger}40`,borderRadius:8,padding:"12px 14px",marginTop:4},children:[l.jsx("div",{style:{fontSize:9,color:a.warn,fontWeight:700,marginBottom:6,letterSpacing:"0.08em"},children:" RESET WALLET"}),l.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5,marginBottom:10},children:"This will permanently delete your encrypted vault. Make sure you have your seed phrase backed up before proceeding."}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{onClick:()=>h(!1),style:{flex:1,padding:"7px 0",background:"rgba(33,48,67,0.5)",border:`1px solid ${a.border}`,borderRadius:6,color:a.dim,fontSize:8,cursor:"pointer",...j},children:"CANCEL"}),l.jsx("button",{onClick:r,style:{flex:1,padding:"7px 0",background:a.dLow,border:`1px solid ${a.danger}60`,borderRadius:6,color:a.danger,fontSize:8,fontWeight:700,cursor:"pointer",...j},children:"RESET WALLET"})]})]}):l.jsx("button",{onClick:()=>h(!0),style:{background:"none",border:"none",color:a.dim,fontSize:8,cursor:"pointer",...j},children:"Forgot password?"})})]})]})}const dg="forgeos.import.addressbook.v1",Ef="forgeos.import.addressbook.salt.v1",vw=32,xw=240;function fg(){return chrome.storage.local}function ww(e){return String(e||"").trim().toLowerCase().split(/\s+/).join(" ")}function Ew(e){return String(e||"").trim()}function iu(e){return Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")}function Aw(e){const t=e.trim();if(!t||t.length%2!==0)return new Uint8Array;const n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r/2]=parseInt(t.slice(r,r+2),16);return n}async function pg(e){return new Promise(t=>{fg().get(e,n=>t((n==null?void 0:n[e])??null))})}async function mg(e,t){return new Promise(n=>{fg().set({[e]:t},n)})}async function kw(){const e=await pg(Ef);if(e&&typeof e=="string"){const n=Aw(e);if(n.length>0)return n}const t=crypto.getRandomValues(new Uint8Array(16));return await mg(Ef,iu(t)),t}async function hg(){const e=await pg(dg);return!e||typeof e!="object"?{}:e}async function Tw(e){await mg(dg,e)}async function gg(e,t){const n=await kw(),r=ww(e),o=Ew(t);if(!r)return"";const i=new TextEncoder().encode(`${iu(n)}
${r}
${o}`),s=await crypto.subtle.digest("SHA-256",i);return iu(new Uint8Array(s))}function Iw(e){const t=pt(e.derivation);return{address:e.address,derivation:t,derivationPath:Ht(t),chainLabel:oc(t.chain)}}function Cw(e,t,n){const r=pt(e.derivation);return{address:e.address,network:t,derivation:r,derivationPath:Ht(r),chainLabel:oc(r.chain),createdAt:n,lastUsedAt:n}}function _w(e){const t=new Map;for(const n of e){const r=`${n.network.toLowerCase()}|${n.address.toLowerCase()}|${n.derivationPath}`,o=t.get(r);if(!o){t.set(r,n);continue}t.set(r,{...o,lastUsedAt:Math.max(o.lastUsedAt,n.lastUsedAt),createdAt:Math.min(o.createdAt,n.createdAt)})}return[...t.values()].sort((n,r)=>r.lastUsedAt-n.lastUsedAt)}function Nw(e){const t=Object.entries(e).sort((n,r)=>{var s,u,c,d;const o=((u=(s=n[1])==null?void 0:s[0])==null?void 0:u.lastUsedAt)??0;return(((d=(c=r[1])==null?void 0:c[0])==null?void 0:d.lastUsedAt)??0)-o});return Object.fromEntries(t.slice(0,vw))}async function Pw(e,t,n){const r=await gg(e,t);return r?((await hg())[r]??[]).filter(s=>s.network===n).sort((s,u)=>u.lastUsedAt-s.lastUsedAt).map(Iw):[]}async function su(e,t,n,r){const o=await gg(e,t);if(!o||!r.length)return;const i=Date.now(),s=await hg(),u=s[o]??[],c=r.map(m=>Cw(m,n,i)),d=_w([...c,...u]).slice(0,xw);s[o]=d,await Tw(Nw(s))}async function Rw(e,t,n,r){await su(e,t,n,[r])}const bw=li,Jl=[0,4],Zl=[0,9],lu=80,yg=320,jw=[...rc].join(`
`);function xo(e){return`${e.address.toLowerCase()}|${e.derivationPath}`}function au(e,t){const n=Number(String(e||"").trim());return!Number.isFinite(n)||n<0?t:Math.floor(n)}function Af(e,t,n){const r=au(e,n[0]),o=au(t,n[1]);return[Math.min(r,o),Math.max(r,o)]}function Ow(e){const t=au(e,lu);return Math.max(1,Math.min(yg,t||lu))}function Lw(e){const t=String(e||"").split(/[,\n]+/).map(n=>n.trim()).filter(Boolean);return t.length?t:[...rc]}function kf({onSubmit:e,loading:t,submitLabel:n}){const[r,o]=A.useState(""),[i,s]=A.useState(""),[u,c]=A.useState(null),d=g=>{if(g.preventDefault(),c(null),r.length<8){c("Password must be at least 8 characters.");return}if(r!==i){c("Passwords do not match.");return}e(r)},m=(g=!1)=>({width:"100%",boxSizing:"border-box",background:"rgba(8,13,20,0.8)",border:`1px solid ${g?a.danger:a.border}`,borderRadius:8,padding:"10px 12px",color:a.text,fontSize:11,...j,outline:"none",marginBottom:8});return l.jsxs("form",{onSubmit:d,children:[l.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.1em",marginBottom:8},children:"CREATE PASSWORD"}),l.jsx("input",{type:"password",placeholder:"Password (min 8 characters)",value:r,onChange:g=>o(g.target.value),disabled:t,style:m()}),l.jsx("input",{type:"password",placeholder:"Confirm password",value:i,onChange:g=>s(g.target.value),disabled:t,style:{...m(),marginBottom:0}}),u&&l.jsx("div",{style:{fontSize:8,color:a.danger,marginTop:6},children:u}),l.jsx("button",{type:"submit",disabled:!r||!i||t,style:{width:"100%",marginTop:12,padding:"11px 0",background:r&&i&&!t?`linear-gradient(90deg, ${a.accent}, #7BE9CF)`:`${a.accent}25`,border:"none",borderRadius:8,color:r&&i&&!t?"#04110E":a.dim,fontSize:10,fontWeight:700,cursor:r&&i&&!t?"pointer":"not-allowed",letterSpacing:"0.1em",...j},children:t?"ENCRYPTING":n})]})}function er({children:e}){return l.jsxs("div",{style:{width:bw,minHeight:ai,...ro(),display:"flex",flexDirection:"column",padding:"22px 22px 18px",...j,overflowX:"hidden",overflowY:"auto",position:"relative",zoom:oo},children:[l.jsx("div",{style:{position:"absolute",top:-80,right:-50,width:240,height:240,background:`radial-gradient(ellipse, ${a.accent}14 0%, transparent 70%)`,borderRadius:"50%",pointerEvents:"none"}}),l.jsx("div",{style:{position:"absolute",bottom:-60,left:-50,width:180,height:180,background:"radial-gradient(ellipse, rgba(57,221,182,0.10) 0%, transparent 70%)",borderRadius:"50%",pointerEvents:"none"}}),l.jsx("div",{style:{position:"relative",zIndex:1,display:"flex",flexDirection:"column",flex:1},children:e})]})}function kr({title:e,sub:t,onBack:n}){return l.jsxs("div",{style:{marginBottom:20},children:[n&&l.jsx("button",{onClick:n,style:{background:"none",border:"none",color:a.dim,fontSize:8,cursor:"pointer",...j,marginBottom:10,padding:0},children:" back"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[l.jsx("img",{src:"../icons/icon48.png",alt:"",style:{width:30,height:30,objectFit:"contain",filter:"drop-shadow(0 0 10px rgba(57,221,182,0.65))"}}),l.jsxs("span",{style:{fontSize:15,fontWeight:700,letterSpacing:"0.11em"},children:[l.jsx("span",{style:{color:a.accent},children:"FORGE"}),l.jsx("span",{style:{color:a.text},children:"-OS"})]})]}),l.jsx("div",{style:{fontSize:13,color:a.text,fontWeight:700,letterSpacing:"0.05em"},children:e}),t&&l.jsx("div",{style:{fontSize:8,color:a.dim,marginTop:5,lineHeight:1.6},children:t})]})}function Dw({network:e,onComplete:t}){const[n,r]=A.useState("choose"),o="mainnet",[i,s]=A.useState(""),[u,c]=A.useState(""),[d,m]=A.useState(it),[g,h]=A.useState(""),[S,w]=A.useState(""),[x,E]=A.useState(""),[f,p]=A.useState(it),[y,v]=A.useState([]),[T,k]=A.useState([]),[C,P]=A.useState(jw),[W,b]=A.useState(String(Jl[0])),[ee,ie]=A.useState(String(Jl[1])),[q,Re]=A.useState(String(Zl[0])),[ce,J]=A.useState(String(Zl[1])),[te,O]=A.useState(!0),[z,U]=A.useState(!0),[F,Q]=A.useState(String(lu)),[pe,de]=A.useState(Ht(it)),[X,ae]=A.useState(!1),[B,se]=A.useState(!1),[Se,le]=A.useState(null),Ue=(I,K)=>{const G=new Map;for(const Ee of[...I,...K]){const Ve=xo(Ee);G.has(Ve)||G.set(Ve,Ee)}return[...G.values()]},Nt=()=>{const I=[];return te&&I.push(0),z&&I.push(1),I.length?I:[0]},Ft=async()=>{const I=await Pw(g,S||void 0,o);return k(I.map(K=>xo(K))),I},rt=async()=>{se(!0),le(null);try{const I=await Ft();if(!I.length)throw new Error("No remembered candidates found for this phrase/passphrase.");v(I);const K=I[0];E(K.address),p(K.derivation),de(K.derivationPath),r("import_discover")}catch(I){const K=I instanceof Error?I.message:String(I);le(K||"Failed to load remembered candidates.")}finally{se(!1)}},Xe=async()=>{var I;se(!0),le(null);try{const K=L1(pe),G=await Xd(g,o,{mnemonicPassphrase:S||void 0,derivation:K}),Ee={address:G.address,derivation:pt(G.derivation??K),derivationPath:Ht(G.derivation??K),chainLabel:((I=G.derivation)==null?void 0:I.chain)===1?"change":"receive"};E(Ee.address),p(Ee.derivation),v(Ve=>Ue([Ee],Ve)),await su(g,S||void 0,o,[Ee]),k(Ve=>{const $t=new Set(Ve);return $t.add(xo(Ee)),[...$t]}),r("import_password")}catch(K){const G=K instanceof Error?K.message:String(K);le(G||"Failed to validate derivation path.")}finally{se(!1)}},be=async()=>{se(!0),le(null);try{const I=await Y1(o);s(I.phrase),c(I.address),m(pt(I.derivation??it)),r("create_view")}catch{le("Failed to generate wallet. Please try again.")}finally{se(!1)}},Ye=async I=>{se(!0),le(null);try{await bs(i,I,u,o,{derivation:d}),await Ha({address:u,network:o});const K=await gr(I);s(""),t(K)}catch{le("Failed to encrypt vault. Please try again."),se(!1)}},Fe=async()=>{se(!0),le(null);try{const I=await Xd(g,o,{mnemonicPassphrase:S||void 0}),K=pt(I.derivation??it),G={address:I.address,derivation:K,derivationPath:Ht(K),chainLabel:K.chain===1?"change":"receive"};E(I.address),p(K),v([G]),de(G.derivationPath),r("import_password")}catch(I){const K=I instanceof Error?I.message:String(I);le(K.toLowerCase().includes("bip39")||K.toLowerCase().includes("checksum")?"Invalid BIP39 phrase. Check word count, spelling, and passphrase.":"Failed to validate phrase.")}finally{se(!1)}},St=async()=>{se(!0),le(null);let I=[],K=[],G="";try{try{I=await Ft()}catch{I=[]}const Ee=Af(W,ee,Jl),Ve=Af(q,ce,Zl),$t=Nt(),Yn=Lw(C),Jn=Ow(F);try{K=await J1(g,o,{mnemonicPassphrase:S||void 0,basePaths:Yn,accountRange:Ee,indexRange:Ve,chains:$t,limit:Jn})}catch(Ae){G=Ae instanceof Error?Ae.message:String(Ae)}const vt=Ue(K,I);if(!vt.length)throw new Error(G||"No derivation candidates found for the configured scan window.");K.length&&await su(g,S||void 0,o,K),G&&I.length&&le(`${G} Showing remembered candidates only.`),v(vt),k(vt.map(Ae=>xo(Ae)));const fe=vt[0];x||(E(fe.address),p(fe.derivation)),de(fe.derivationPath),r("import_discover")}catch(Ee){const Ve=Ee instanceof Error?Ee.message:String(Ee);le(Ve||"Failed to scan import paths.")}finally{se(!1)}},ge=I=>{E(I.address),p(pt(I.derivation)),de(I.derivationPath),r("import_password")},$=async I=>{se(!0),le(null);try{const K=g.trim().toLowerCase().split(/\s+/).join(" ");await bs(K,I,x,o,{mnemonicPassphrase:S||void 0,derivation:f}),await Ha({address:x,network:o});try{await Rw(K,S||void 0,o,{address:x,derivation:f,derivationPath:Ht(f),chainLabel:f.chain===1?"change":"receive"})}catch{}const G=await gr(I);h(""),w(""),v([]),k([]),t(G)}catch{le("Failed to encrypt vault. Please try again."),se(!1)}},ne=i.split(" ");return n==="choose"?l.jsxs(er,{children:[l.jsx(kr,{title:"SET UP YOUR WALLET",sub:"Non-custodial  Your keys never leave your device"}),l.jsx("div",{style:{display:"flex",gap:5,flexWrap:"wrap",marginBottom:14},children:["KASPA L1  L2","NON-CUSTODIAL","BIP44"].map(I=>l.jsx("span",{style:{fontSize:8,color:a.accent,fontWeight:700,letterSpacing:"0.08em",background:`${a.accent}10`,border:`1px solid ${a.accent}22`,borderRadius:4,padding:"3px 7px"},children:I},I))}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:18,padding:"7px 12px",background:`${a.accent}08`,border:`1px solid ${a.accent}20`,borderRadius:8},children:[l.jsx("div",{style:{width:7,height:7,borderRadius:"50%",background:a.ok,flexShrink:0}}),l.jsx("span",{style:{fontSize:8,color:a.accent,fontWeight:700,letterSpacing:"0.08em"},children:"MAINNET"})]}),Se&&l.jsx("div",{style:{fontSize:8,color:a.danger,marginBottom:10},children:Se}),l.jsx("button",{onClick:be,disabled:B,style:{width:"100%",padding:"18px 16px",textAlign:"left",background:`linear-gradient(145deg, ${a.accent}1A, rgba(11,17,24,0.95))`,border:`1px solid ${a.accent}45`,borderRadius:12,marginBottom:10,cursor:B?"not-allowed":"pointer",...j},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[l.jsx("div",{style:{width:40,height:40,borderRadius:"50%",flexShrink:0,background:`${a.accent}18`,border:`1px solid ${a.accent}40`,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("span",{style:{color:a.accent,fontSize:18},children:""})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:11,fontWeight:700,color:a.accent,marginBottom:4,letterSpacing:"0.06em"},children:B?"GENERATING":"CREATE NEW WALLET"}),l.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.6},children:"Generate a new wallet  24-word seed phrase  fully encrypted locally"})]})]})}),l.jsx("button",{onClick:()=>{le(null),h(""),w(""),E(""),v([]),k([]),p(it),de(Ht(it)),r("import_phrase")},style:{width:"100%",padding:"18px 16px",textAlign:"left",background:"rgba(11,17,24,0.85)",border:`1px solid ${a.border}`,borderRadius:12,marginBottom:18,cursor:"pointer",...j},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[l.jsx("div",{style:{width:40,height:40,borderRadius:"50%",flexShrink:0,background:"rgba(33,48,67,0.5)",border:`1px solid ${a.border}`,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("span",{style:{color:a.dim,fontSize:18},children:""})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:11,fontWeight:700,color:a.text,marginBottom:4,letterSpacing:"0.06em"},children:"IMPORT WALLET"}),l.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.6},children:"Restore from a BIP39 seed phrase  supports 12/15/18/21/24 words"})]})]})}),l.jsx("div",{style:{marginTop:"auto",padding:"10px 12px",background:"rgba(5,7,10,0.5)",border:`1px solid ${a.border}`,borderRadius:8},children:["Your keys never leave your device.","Non-custodial  Forge-OS has zero access to your funds."].map((I,K)=>l.jsxs("div",{style:{display:"flex",gap:6,marginBottom:K===0?4:0},children:[l.jsx("span",{style:{color:a.ok,fontSize:8,flexShrink:0},children:""}),l.jsx("span",{style:{fontSize:8,color:a.dim,lineHeight:1.5},children:I})]},K))})]}):n==="create_view"?l.jsxs(er,{children:[l.jsx(kr,{title:"YOUR SEED PHRASE",sub:"Write these 24 words down in order and store them offline. Anyone with this phrase controls your wallet.",onBack:()=>{r("choose"),s(""),c(""),m(it)}}),l.jsx("div",{style:{background:a.wLow,border:`1px solid ${a.warn}40`,borderRadius:8,padding:"8px 12px",marginBottom:12},children:l.jsx("div",{style:{fontSize:8,color:a.warn,fontWeight:700},children:" NEVER share this phrase. Forge-OS will never ask for it."})}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:4,marginBottom:14},children:ne.map((I,K)=>l.jsxs("div",{style:{background:"rgba(5,7,10,0.9)",border:`1px solid ${a.border}`,borderRadius:5,padding:"5px 4px",display:"flex",alignItems:"center",gap:3},children:[l.jsxs("span",{style:{fontSize:8,color:a.dim,flexShrink:0},children:[K+1,"."]}),l.jsx("span",{style:{fontSize:8,color:a.text,fontWeight:600},children:I})]},K))}),l.jsxs("label",{style:{display:"flex",gap:8,alignItems:"flex-start",cursor:"pointer",marginBottom:14},children:[l.jsx("input",{type:"checkbox",checked:X,onChange:I=>ae(I.target.checked),style:{marginTop:2,accentColor:a.accent,flexShrink:0}}),l.jsx("span",{style:{fontSize:8,color:a.dim,lineHeight:1.5},children:"I have written down my 24-word seed phrase and stored it securely offline."})]}),l.jsx("button",{onClick:()=>r("create_password"),disabled:!X,style:{width:"100%",padding:"11px 0",background:X?`linear-gradient(90deg, ${a.accent}, #7BE9CF)`:`${a.accent}25`,border:"none",borderRadius:8,color:X?"#04110E":a.dim,fontSize:10,fontWeight:700,cursor:X?"pointer":"not-allowed",letterSpacing:"0.1em",...j},children:"I'VE SAVED MY PHRASE "})]}):n==="create_password"?l.jsxs(er,{children:[l.jsx(kr,{title:"ENCRYPT YOUR WALLET",sub:"Your seed phrase will be encrypted and stored locally. You'll need this password to unlock your wallet.",onBack:()=>r("create_view")}),Se&&l.jsx("div",{style:{fontSize:8,color:a.danger,marginBottom:10},children:Se}),l.jsx(kf,{onSubmit:Ye,loading:B,submitLabel:"CREATE WALLET"})]}):n==="import_phrase"?l.jsxs(er,{children:[l.jsx(kr,{title:"IMPORT SEED PHRASE",sub:"Enter a BIP39 seed phrase (12/15/18/21/24 words). Optional BIP39 passphrase supported.",onBack:()=>r("choose")}),Se&&l.jsx("div",{style:{fontSize:8,color:a.danger,marginBottom:10},children:Se}),l.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.1em",marginBottom:7},children:"SEED PHRASE"}),l.jsx("textarea",{value:g,onChange:I=>{h(I.target.value),v([]),k([]),E(""),le(null)},placeholder:"word1 word2 word3  (space-separated)",rows:4,style:{width:"100%",boxSizing:"border-box",background:"rgba(8,13,20,0.8)",border:`1px solid ${a.border}`,borderRadius:8,padding:"10px 12px",color:a.text,fontSize:10,resize:"vertical",...j,outline:"none",marginBottom:10}}),l.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.1em",marginBottom:7},children:"BIP39 PASSPHRASE (OPTIONAL)"}),l.jsx("input",{type:"password",value:S,onChange:I=>{w(I.target.value),v([]),k([]),E(""),le(null)},placeholder:"Optional passphrase / 25th word",style:{width:"100%",boxSizing:"border-box",background:"rgba(8,13,20,0.8)",border:`1px solid ${a.border}`,borderRadius:8,padding:"10px 12px",color:a.text,fontSize:10,...j,outline:"none",marginBottom:10}}),g.trim()&&(()=>{const I=g.trim().split(/\s+/).filter(Boolean).length,K=[12,15,18,21,24].includes(I);return l.jsxs("div",{style:{fontSize:8,color:K?a.ok:a.warn,marginBottom:8},children:[I," words ",K?"":"(need 12/15/18/21/24)"]})})(),l.jsxs("div",{style:{background:"rgba(8,13,20,0.65)",border:`1px solid ${a.border}`,borderRadius:8,padding:"9px 10px",marginBottom:10},children:[l.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.08em",marginBottom:6},children:"DISCOVERY SCAN OPTIONS"}),l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:5},children:"BASE PATH ROOTS (ONE PER LINE)"}),l.jsx("textarea",{value:C,onChange:I=>P(I.target.value),rows:2,style:{width:"100%",boxSizing:"border-box",background:"rgba(5,7,10,0.8)",border:`1px solid ${a.border}`,borderRadius:8,padding:"8px 10px",color:a.text,fontSize:8,resize:"vertical",...j,outline:"none",marginBottom:8}}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:8},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:4},children:"ACCOUNT RANGE"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:6},children:[l.jsx("input",{type:"number",min:0,value:W,onChange:I=>b(I.target.value),placeholder:"start",style:{width:"100%",boxSizing:"border-box",background:"rgba(5,7,10,0.8)",border:`1px solid ${a.border}`,borderRadius:7,padding:"7px 8px",color:a.text,fontSize:8,...j,outline:"none"}}),l.jsx("input",{type:"number",min:0,value:ee,onChange:I=>ie(I.target.value),placeholder:"end",style:{width:"100%",boxSizing:"border-box",background:"rgba(5,7,10,0.8)",border:`1px solid ${a.border}`,borderRadius:7,padding:"7px 8px",color:a.text,fontSize:8,...j,outline:"none"}})]})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:4},children:"INDEX RANGE"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:6},children:[l.jsx("input",{type:"number",min:0,value:q,onChange:I=>Re(I.target.value),placeholder:"start",style:{width:"100%",boxSizing:"border-box",background:"rgba(5,7,10,0.8)",border:`1px solid ${a.border}`,borderRadius:7,padding:"7px 8px",color:a.text,fontSize:8,...j,outline:"none"}}),l.jsx("input",{type:"number",min:0,value:ce,onChange:I=>J(I.target.value),placeholder:"end",style:{width:"100%",boxSizing:"border-box",background:"rgba(5,7,10,0.8)",border:`1px solid ${a.border}`,borderRadius:7,padding:"7px 8px",color:a.text,fontSize:8,...j,outline:"none"}})]})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:5},children:"CHAINS"}),l.jsxs("div",{style:{display:"flex",gap:10},children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:5,fontSize:8,color:a.dim,cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:te,onChange:I=>O(I.target.checked),style:{accentColor:a.accent}}),"RECEIVE (0)"]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:5,fontSize:8,color:a.dim,cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:z,onChange:I=>U(I.target.checked),style:{accentColor:a.accent}}),"CHANGE (1)"]})]})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:4},children:"RESULT LIMIT"}),l.jsx("input",{type:"number",min:1,max:yg,value:F,onChange:I=>Q(I.target.value),style:{width:"100%",boxSizing:"border-box",background:"rgba(5,7,10,0.8)",border:`1px solid ${a.border}`,borderRadius:7,padding:"7px 8px",color:a.text,fontSize:8,...j,outline:"none"}})]})]})]}),l.jsxs("div",{style:{background:"rgba(8,13,20,0.65)",border:`1px solid ${a.border}`,borderRadius:8,padding:"9px 10px",marginBottom:10},children:[l.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.08em",marginBottom:6},children:"MANUAL DERIVATION PATH"}),l.jsx("input",{value:pe,onChange:I=>de(I.target.value),placeholder:"m/44'/111'/0'/0/0",style:{width:"100%",boxSizing:"border-box",background:"rgba(5,7,10,0.8)",border:`1px solid ${a.border}`,borderRadius:8,padding:"9px 10px",color:a.text,fontSize:8,...j,outline:"none",marginBottom:8}}),l.jsx("button",{onClick:Xe,disabled:!g.trim()||B,style:{width:"100%",padding:"9px 0",background:"rgba(11,17,24,0.85)",border:`1px solid ${a.border}`,borderRadius:8,color:g.trim()&&!B?a.text:a.dim,fontSize:8,fontWeight:700,cursor:g.trim()&&!B?"pointer":"not-allowed",letterSpacing:"0.08em",...j},children:B?"VALIDATING":"USE MANUAL PATH"})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsx("button",{onClick:Fe,disabled:!g.trim()||B,style:{width:"100%",padding:"11px 0",background:g.trim()&&!B?`linear-gradient(90deg, ${a.accent}, #7BE9CF)`:`${a.accent}25`,border:"none",borderRadius:8,color:g.trim()&&!B?"#04110E":a.dim,fontSize:10,fontWeight:700,cursor:g.trim()&&!B?"pointer":"not-allowed",letterSpacing:"0.1em",...j},children:B?"VALIDATING":"VALIDATE PHRASE "}),l.jsx("button",{onClick:St,disabled:!g.trim()||B,style:{width:"100%",padding:"11px 0",background:"rgba(11,17,24,0.85)",border:`1px solid ${a.border}`,borderRadius:8,color:g.trim()&&!B?a.text:a.dim,fontSize:9,fontWeight:700,cursor:g.trim()&&!B?"pointer":"not-allowed",letterSpacing:"0.08em",...j},children:B?"SCANNING":"SCAN PATHS"})]}),l.jsx("button",{onClick:rt,disabled:!g.trim()||B,style:{width:"100%",padding:"10px 0",marginTop:8,background:"rgba(11,17,24,0.85)",border:`1px solid ${a.border}`,borderRadius:8,color:g.trim()&&!B?a.text:a.dim,fontSize:8,fontWeight:700,cursor:g.trim()&&!B?"pointer":"not-allowed",letterSpacing:"0.08em",...j},children:B?"LOADING":"LOAD REMEMBERED CANDIDATES"})]}):n==="import_discover"?l.jsxs(er,{children:[l.jsx(kr,{title:"SELECT DERIVATION",sub:"Choose the address/path that matches your existing wallet. This choice will be saved for signing.",onBack:()=>r("import_phrase")}),Se&&l.jsx("div",{style:{fontSize:8,color:a.danger,marginBottom:10},children:Se}),l.jsxs("div",{style:{background:"rgba(11,17,24,0.65)",border:`1px solid ${a.border}`,borderRadius:8,padding:"8px 10px",marginBottom:10},children:[l.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5},children:"Showing common derivation candidates for your phrase/passphrase. If unsure, compare with the address shown in your current wallet app and select the exact match."}),l.jsxs("div",{style:{fontSize:8,color:a.dim,marginTop:6},children:["Remembered candidates for this mnemonic fingerprint: ",T.length]})]}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:300,overflowY:"auto",paddingRight:2,marginBottom:12},children:y.map((I,K)=>{const G=I.address.toLowerCase()===x.toLowerCase()&&Ht(I.derivation)===Ht(f),Ee=T.includes(xo(I));return l.jsxs("button",{onClick:()=>ge(I),style:{width:"100%",textAlign:"left",background:G?`${a.accent}10`:"rgba(8,13,20,0.8)",border:`1px solid ${G?`${a.accent}55`:a.border}`,borderRadius:8,padding:"9px 10px",cursor:"pointer",...j},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,marginBottom:4},children:[l.jsxs("span",{style:{fontSize:8,color:G?a.accent:a.text,fontWeight:700},children:["#",K+1,"  ",I.chainLabel.toUpperCase()]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[Ee&&l.jsx("span",{style:{fontSize:8,color:a.accent,border:`1px solid ${a.accent}44`,background:`${a.accent}14`,borderRadius:4,padding:"2px 4px",letterSpacing:"0.06em"},children:"REMEMBERED"}),l.jsx("span",{style:{fontSize:8,color:a.dim},children:I.derivation.account===0?"acct 0":`acct ${I.derivation.account}`})]})]}),l.jsx("div",{style:{fontSize:8,color:a.text,lineHeight:1.45,wordBreak:"break-all",marginBottom:4},children:I.address}),l.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.4,wordBreak:"break-all"},children:I.derivationPath})]},`${I.address}-${I.derivationPath}`)})}),l.jsx("button",{onClick:()=>St(),disabled:B,style:{width:"100%",padding:"10px 0",background:"rgba(11,17,24,0.85)",border:`1px solid ${a.border}`,borderRadius:8,color:B?a.dim:a.text,fontSize:9,fontWeight:700,cursor:B?"not-allowed":"pointer",letterSpacing:"0.08em",...j},children:B?"SCANNING":"RESCAN CANDIDATES"})]}):n==="import_password"?l.jsxs(er,{children:[l.jsx(kr,{title:"ENCRYPT YOUR WALLET",sub:"Your imported phrase will be encrypted and stored locally. Choose a strong password.",onBack:()=>r(y.length?"import_discover":"import_phrase")}),l.jsxs("div",{style:{background:"rgba(8,13,20,0.8)",border:`1px solid ${a.border}`,borderRadius:8,padding:"8px 10px",marginBottom:10},children:[l.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:4,letterSpacing:"0.08em"},children:"SELECTED ADDRESS"}),l.jsx("div",{style:{fontSize:8,color:a.text,lineHeight:1.4,wordBreak:"break-all",marginBottom:4},children:x}),l.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.4,wordBreak:"break-all"},children:Ht(f)})]}),Se&&l.jsx("div",{style:{fontSize:8,color:a.danger,marginBottom:10},children:Se}),l.jsx(kf,{onSubmit:$,loading:B,submitLabel:"IMPORT WALLET"})]}):l.jsx(er,{children:l.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("img",{src:"../icons/icon48.png",alt:"",style:{width:36,height:36,objectFit:"contain",filter:"drop-shadow(0 0 12px rgba(57,221,182,0.7))",marginBottom:14}}),l.jsx("div",{style:{fontSize:10,color:a.accent,marginBottom:6,letterSpacing:"0.1em",fontWeight:700},children:"ENCRYPTING VAULT"}),l.jsx("div",{style:{fontSize:8,color:a.dim},children:"Deriving key  This may take a moment"})]})})})}function Mw({address:e,network:t,origin:n,onApprove:r,onReject:o}){const i=n??"forge-os.xyz";return l.jsxs("div",{style:{width:"100%",maxWidth:ug,height:"100%",minHeight:cg,...ro(),display:"flex",flexDirection:"column",...j,overflow:"hidden",zoom:oo},children:[l.jsxs("div",{style:{padding:"12px 14px 10px",borderBottom:`1px solid ${a.border}`,display:"flex",alignItems:"center",gap:8},children:[l.jsx("img",{src:"../icons/icon48.png",alt:"Forge-OS",style:{width:22,height:22,objectFit:"contain",filter:"drop-shadow(0 0 6px rgba(57,221,182,0.5))"}}),l.jsxs("span",{style:{fontSize:13,fontWeight:700,letterSpacing:"0.1em"},children:[l.jsx("span",{style:{color:a.accent},children:"FORGE"}),l.jsx("span",{style:{color:a.text},children:"-OS"})]})]}),l.jsxs("div",{style:{flex:1,minHeight:0,display:"flex",flexDirection:"column",padding:"14px 16px 12px",gap:12,overflowY:"auto"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{width:52,height:52,borderRadius:"50%",background:`${a.accent}18`,border:`2px solid ${a.accent}40`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 10px"},children:l.jsx("img",{src:"../icons/icon48.png",alt:"",style:{width:30,height:30,objectFit:"contain"}})}),l.jsx("div",{style:{fontSize:13,fontWeight:700,color:a.text,marginBottom:4},children:"Connect to Site"}),l.jsx("div",{style:{fontSize:10,color:a.dim,letterSpacing:"0.06em",wordBreak:"break-word",overflowWrap:"anywhere"},children:i})]}),l.jsxs("div",{style:{background:"rgba(11,17,24,0.8)",border:`1px solid ${a.border}`,borderRadius:10,padding:"12px 14px"},children:[l.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.12em",marginBottom:10},children:"THIS SITE WILL BE ABLE TO"}),[{icon:"",label:"View your wallet address"},{icon:"",label:"Request message signatures"}].map(s=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6,fontSize:10,color:a.text},children:[l.jsx("span",{style:{color:a.ok,fontSize:9,flexShrink:0},children:s.icon}),s.label]},s.label)),l.jsx("div",{style:{height:1,background:a.border,margin:"10px 0"}}),l.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.12em",marginBottom:6},children:"THIS SITE WILL NOT BE ABLE TO"}),[{icon:"",label:"Access your private keys or seed phrase"},{icon:"",label:"Send transactions without your approval"}].map(s=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4,fontSize:10,color:a.muted},children:[l.jsx("span",{style:{color:a.danger,fontSize:9,flexShrink:0},children:s.icon}),s.label]},s.label))]}),l.jsxs("div",{style:{background:`${a.accent}08`,border:`1px solid ${a.accent}20`,borderRadius:8,padding:"10px 12px",display:"flex",alignItems:"center",gap:10},children:[l.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:a.ok,flexShrink:0}}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:9,color:a.dim,marginBottom:2},children:"CONNECTING WITH"}),l.jsx("div",{style:{fontSize:11,color:a.text,fontWeight:600},children:mi(e)}),l.jsx("div",{style:{fontSize:8,color:a.dim},children:t})]})]}),l.jsxs("div",{style:{display:"flex",gap:10,marginTop:2},children:[l.jsx("button",{onClick:o,style:{flex:1,background:"rgba(33,48,67,0.5)",border:`1px solid ${a.border}`,borderRadius:8,padding:"10px 0",color:a.dim,fontSize:10,fontWeight:700,cursor:"pointer",letterSpacing:"0.08em",...j},children:"REJECT"}),l.jsx("button",{onClick:r,style:{flex:2,background:`linear-gradient(90deg, ${a.accent}, #7BE9CF)`,border:"none",borderRadius:8,padding:"10px 0",color:"#04110E",fontSize:11,fontWeight:700,cursor:"pointer",letterSpacing:"0.08em",...j},children:"CONNECT "})]})]})]})}function zw({address:e,network:t,origin:n,message:r,loading:o=!1,error:i,onApprove:s,onReject:u}){const c=n??"forge-os.xyz";return l.jsxs("div",{style:{width:"100%",maxWidth:ug,height:"100%",minHeight:cg,...ro(),display:"flex",flexDirection:"column",...j,overflow:"hidden",zoom:oo},children:[l.jsxs("div",{style:{padding:"12px 14px 10px",borderBottom:`1px solid ${a.border}`,display:"flex",alignItems:"center",gap:8},children:[l.jsx("img",{src:"../icons/icon48.png",alt:"Forge-OS",style:{width:22,height:22,objectFit:"contain",filter:"drop-shadow(0 0 6px rgba(57,221,182,0.5))"}}),l.jsxs("span",{style:{fontSize:13,fontWeight:700,letterSpacing:"0.1em"},children:[l.jsx("span",{style:{color:a.accent},children:"FORGE"}),l.jsx("span",{style:{color:a.text},children:"-OS"})]})]}),l.jsxs("div",{style:{flex:1,minHeight:0,display:"flex",flexDirection:"column",padding:"18px 16px",gap:12,overflowY:"auto"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{width:52,height:52,borderRadius:"50%",background:`${a.warn}18`,border:`2px solid ${a.warn}40`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px"},children:l.jsx("span",{style:{fontSize:22},children:""})}),l.jsx("div",{style:{fontSize:12,fontWeight:700,color:a.text,marginBottom:3},children:"Signature Request"}),l.jsx("div",{style:{fontSize:10,color:a.dim,letterSpacing:"0.06em"},children:c})]}),l.jsxs("div",{style:{background:"rgba(11,17,24,0.9)",border:`1px solid ${a.border}`,borderRadius:10,padding:"10px 12px",minWidth:0},children:[l.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.12em",marginBottom:6},children:"MESSAGE TO SIGN"}),l.jsx("div",{style:{maxHeight:180,overflowY:"auto",background:"rgba(5,7,10,0.7)",border:`1px solid ${a.border}`,borderRadius:8,padding:"10px",fontSize:9,color:a.text,lineHeight:1.5,whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"},children:r})]}),l.jsxs("div",{style:{background:`${a.accent}08`,border:`1px solid ${a.accent}20`,borderRadius:8,padding:"10px 12px",display:"flex",alignItems:"center",gap:10,minWidth:0},children:[l.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:a.ok,flexShrink:0}}),l.jsxs("div",{style:{minWidth:0},children:[l.jsx("div",{style:{fontSize:9,color:a.dim,marginBottom:2},children:"SIGNING WITH"}),l.jsx("div",{style:{fontSize:11,color:a.text,fontWeight:600},children:mi(e)}),l.jsx("div",{style:{fontSize:8,color:a.dim},children:t})]})]}),i&&l.jsx("div",{style:{fontSize:9,color:a.danger,lineHeight:1.5,textAlign:"center"},children:i})]}),l.jsxs("div",{style:{padding:"12px 16px",borderTop:`1px solid ${a.border}`,display:"flex",gap:10},children:[l.jsx("button",{onClick:u,disabled:o,style:{flex:1,background:"rgba(33,48,67,0.5)",border:`1px solid ${a.border}`,borderRadius:8,padding:"10px 0",color:a.dim,fontSize:10,fontWeight:700,cursor:o?"not-allowed":"pointer",letterSpacing:"0.08em",...j},children:"REJECT"}),l.jsx("button",{onClick:s,disabled:o,style:{flex:2,background:o?`${a.accent}35`:`linear-gradient(90deg, ${a.accent}, #7BE9CF)`,border:"none",borderRadius:8,padding:"10px 0",color:o?a.dim:"#04110E",fontSize:11,fontWeight:700,cursor:o?"not-allowed":"pointer",letterSpacing:"0.08em",...j},children:o?"SIGNING":"SIGN MESSAGE "})]})]})}const Tf="forgeos.connect.pending",If="forgeos.sign.pending",Bw=12e4,Uw=new Set(["forge-os.xyz","www.forge-os.xyz","forgeos.xyz","www.forgeos.xyz","localhost","127.0.0.1"]);function Fw(){const[e,t]=A.useState({type:"loading"}),[n,r]=A.useState(null),[o,i]=A.useState("mainnet"),[s,u]=A.useState(null),[c,d]=A.useState(0),[m,g]=A.useState(!1),[h,S]=A.useState("wallet"),[w,x]=A.useState(),[E,f]=A.useState(0),[p,y]=A.useState(15),[v,T]=A.useState(!1),[k,C]=A.useState(!1),[P,W]=A.useState(null),[b,ee]=A.useState(null),[ie,q]=A.useState(!1),[Re,ce]=A.useState(null),J=A.useRef(new Set),te=A.useRef(null),[O,z]=A.useState(null),[U,F]=A.useState(null),[Q,pe]=A.useState(null),[de,X]=A.useState(null),[ae,B]=A.useState(null),[se,Se]=A.useState(null),[le,Ue]=A.useState(null),Nt=["mainnet","testnet-10","testnet-11","testnet-12"],Ft={mainnet:"MAINNET","testnet-10":"TN10","testnet-11":"TN11","testnet-12":"TN12"},rt=45e3,Xe=45e3,be=6e4,Ye=A.useCallback(R=>{if(!R)return!1;let H="";try{H=R.origin?new URL(R.origin).hostname.toLowerCase():""}catch{H=""}const Te=Uw.has(H),Me=R.message.includes("Sign in to Forge.OS")&&R.message.includes("Domain: forge-os.xyz");return Te&&Me},[]);A.useEffect(()=>{(async()=>{try{const[R,H,Te,Me,$e]=await Promise.all([rh(),_s(),i1(),l1(),u1()]);if(i(H),y(Te),T(Me===!0),C($e===!0),!R){const xt=await Wd();xt!=null&&xt.address?(r({mnemonic:"",address:xt.address,network:H,autoLockAt:1/0}),ge(xt.address,H),t({type:"unlocked"})):t({type:"first_run"});return}const Rt=Vn()??await oh();if(Rt)r(Rt),ge(Rt.address,H),t({type:"unlocked"});else{const xt=await Wd();z((xt==null?void 0:xt.address)??null),t({type:"locked"})}}catch{t({type:"first_run"})}})()},[]);const Fe=A.useCallback(()=>{var H;const R=(H=chrome.storage)==null?void 0:H.session;R!=null&&R.get&&R.get([Tf,If]).then(Te=>{const Me=Te==null?void 0:Te[Tf],$e=Te==null?void 0:Te[If];W(Me!=null&&Me.requestId?Me:null),ee($e!=null&&$e.requestId&&typeof($e==null?void 0:$e.message)=="string"?$e:null)}).catch(()=>{})},[]);A.useEffect(()=>{Fe()},[Fe]),A.useEffect(()=>{const R=(H,Te)=>{Te==="session"&&Fe()};return chrome.storage.onChanged.addListener(R),()=>chrome.storage.onChanged.removeListener(R)},[Fe]),A.useEffect(()=>{ce(null)},[b==null?void 0:b.requestId]),A.useEffect(()=>{const R=()=>{te.current!==null&&(window.clearTimeout(te.current),te.current=null)};if(e.type!=="unlocked"||v){R();return}if(!!(P||b)){R();return}return R(),te.current=window.setTimeout(()=>{te.current=null,Xa(!1)},Bw),R},[e.type,v,P==null?void 0:P.requestId,b==null?void 0:b.requestId]),A.useEffect(()=>()=>{te.current!==null&&(window.clearTimeout(te.current),te.current=null)},[]),A.useEffect(()=>{const R=H=>{(H==null?void 0:H.type)==="AUTOLOCK_FIRED"&&ne()};return chrome.runtime.onMessage.addListener(R),()=>chrome.runtime.onMessage.removeListener(R)},[]),A.useEffect(()=>{if(e.type!=="unlocked"||!n)return;const R=setInterval(()=>{Vn()||ne()},3e4);return()=>clearInterval(R)},[e.type,n]);const St=A.useCallback(R=>{var Me;const H=w1(R);if(!Array.isArray(H)||H.length===0){pe(null);return}const Te=[...H].sort(($e,Rt)=>$e.lastOkAt!==Rt.lastOkAt?Rt.lastOkAt-$e.lastOkAt:$e.consecutiveFails!==Rt.consecutiveFails?$e.consecutiveFails-Rt.consecutiveFails:Rt.lastFailAt-$e.lastFailAt);pe(((Me=Te[0])==null?void 0:Me.base)??null)},[]);A.useEffect(()=>{if(e.type!=="unlocked")return;const R=async()=>{const Te=await R1(o);Te!=null&&Te.virtualDaaScore?(F(Te.virtualDaaScore),Se(Date.now()),Ue(Me=>Me!=null&&Me.startsWith("Live BlockDAG feed")?null:Me)):Ue("Live BlockDAG feed unavailable  retrying"),St(o)};R();const H=setInterval(R,2e4);return()=>clearInterval(H)},[e.type,o,St]);const ge=A.useCallback(async(R,H)=>{try{const Te=Oo(R,H),[Me,$e]=await Promise.allSettled([b1(Te,H),j1(H)]),Rt=Date.now();let xt=!1;Me.status==="fulfilled"?(u(Me.value),X(Rt)):xt=!0,$e.status==="fulfilled"?(d($e.value),B(Rt)):xt=!0,Ue(vi=>xt?"Live balance/price feed degraded  retrying":vi!=null&&vi.startsWith("Live balance/price feed")?null:vi),St(H)}catch{}},[St]);A.useEffect(()=>{if(e.type!=="unlocked"||!(n!=null&&n.address))return;const R=()=>{ge(n.address,o)};R();const H=setInterval(R,15e3);return()=>clearInterval(H)},[e.type,n==null?void 0:n.address,o,ge]);const $=R=>{z(null),r(R),ge(R.address,o),t({type:"unlocked"})},ne=()=>{z((n==null?void 0:n.address)??null),ih(),r(null),u(null),d(0),F(null),pe(null),X(null),B(null),Se(null),Ue(null),t({type:"locked"})},I=async()=>{const{resetWallet:R}=await Wm(async()=>{const{resetWallet:H}=await Promise.resolve().then(()=>W1);return{resetWallet:H}},void 0);await R(),r(null),u(null),d(0),F(null),pe(null),X(null),B(null),Se(null),Ue(null),t({type:"first_run"})},K=R=>{r(R),ge(R.address,o),t({type:"unlocked"})},G=(()=>{if(!(n!=null&&n.address))return null;try{return Oo(n.address,o)}catch{return n.address}})(),Ee=async()=>{if(G)try{await navigator.clipboard.writeText(G),g(!0),setTimeout(()=>g(!1),2e3)}catch{}},Ve=async()=>{const R=Nt.indexOf(o),H=Nt[(R+1)%Nt.length];if(i(H),await o1(H),u(null),F(null),pe(null),X(null),B(null),Se(null),Ue(null),n!=null&&n.address){try{await Ha({address:Oo(n.address,H),network:H})}catch{}ge(n.address,H)}},$t=()=>{e.type==="unlocked"&&ns(p,{persistSession:v})},Yn=async R=>{y(R),await s1(R),e.type==="unlocked"&&ns(R,{persistSession:v})},Jn=async R=>{T(R),await a1(R),await Xa(R),e.type==="unlocked"&&ns(p,{persistSession:R})},vt=async()=>{const R=!k;C(R);try{await c1(R)}catch{}};A.useEffect(()=>{e.type!=="unlocked"||!b||n!=null&&n.mnemonic||(chrome.runtime.sendMessage({type:"FORGEOS_SIGN_REJECT",requestId:b.requestId,error:"Managed wallet is required for site signing"}).catch(()=>{}),ee(null))},[e.type,b,n==null?void 0:n.mnemonic]);const fe=async()=>{const R=b;if(R){if(!(n!=null&&n.mnemonic)){ce("Wallet is locked. Unlock to sign.");return}q(!0),ce(null);try{const H=await Z1(n.mnemonic,R.message,{mnemonicPassphrase:n.mnemonicPassphrase,derivation:n.derivation});await chrome.runtime.sendMessage({type:"FORGEOS_SIGN_APPROVE",requestId:R.requestId,signature:H}),ee(null)}catch(H){const Te=H instanceof Error?H.message:String(H);ce(Te||"Signing failed")}finally{q(!1)}}},Ae=()=>{b&&(chrome.runtime.sendMessage({type:"FORGEOS_SIGN_REJECT",requestId:b.requestId,error:"Signing rejected by user"}).catch(()=>{}),window.close())};if(A.useEffect(()=>{if(e.type!=="unlocked"||!b||ie||!(n!=null&&n.mnemonic))return;const R=b.requestId;!R||J.current.has(R)||Ye(b)&&(J.current.add(R),fe())},[e.type,b,n==null?void 0:n.mnemonic,ie,Ye]),e.type==="loading")return l.jsxs("div",{style:{width:li,height:ai,...ro(),display:"flex",alignItems:"center",justifyContent:"center",...j,position:"relative",overflowX:"hidden",overflowY:"auto",zoom:oo},children:[l.jsx("div",{style:{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%,-50%)",width:260,height:260,borderRadius:"50%",background:`radial-gradient(ellipse, ${a.accent}12 0%, transparent 70%)`,pointerEvents:"none"}}),l.jsxs("div",{style:{textAlign:"center",position:"relative"},children:[l.jsx("img",{src:"../icons/icon48.png",alt:"",style:{width:36,height:36,objectFit:"contain",opacity:.7,filter:"drop-shadow(0 0 10px rgba(57,221,182,0.5))"}}),l.jsx("div",{style:{fontSize:9,color:a.dim,marginTop:10,letterSpacing:"0.14em"},children:"LOADING"})]})]});if(e.type==="first_run")return l.jsx(Dw,{network:o,onComplete:K});if(e.type==="locked"){const R=v||!!(P||b);return l.jsx(Sw,{walletAddress:O,autoLockMinutes:p,persistSession:R,onUnlock:$,onReset:I})}const cn=!!(n!=null&&n.mnemonic);if(b&&G&&cn&&!Ye(b))return l.jsx(zw,{address:G,network:o,origin:b.origin,message:b.message,loading:ie,error:Re,onApprove:fe,onReject:Ae});if(P&&G)return l.jsx(Mw,{address:G,network:o,origin:P.origin,onApprove:()=>{chrome.runtime.sendMessage({type:"FORGEOS_CONNECT_APPROVE",requestId:P.requestId,address:G,network:o}).catch(()=>{}),W(null)},onReject:()=>{chrome.runtime.sendMessage({type:"FORGEOS_CONNECT_REJECT",requestId:P.requestId}).catch(()=>{}),window.close()}});const Pt=G,Zn="USD",xr=s!==null&&c>0?s*c:null,L=xr!==null?Zy(xr,Zn):"",V=k?"":L,me=o==="mainnet",Zt=Date.now(),ct=(R,H)=>R!==null&&Zt-R<=H,Kt=ct(de,rt),_=ct(ae,Xe),D=ct(se,be),Z=Kt&&_&&D,qt=Kt||_||D,qn=Z?"LIVE FEED":qt?"PARTIAL FEED":"FEED OFFLINE",sl=Z?a.ok:qt?a.warn:a.danger,uo=Math.max(de??0,ae??0,se??0),dn=uo>0?new Date(uo).toLocaleTimeString([],{hour12:!1}):"never",Sg=(()=>{if(!Q)return"endpoint unknown";try{return new URL(Q).host}catch{return Q}})(),ll=me?a.ok:a.warn;return l.jsxs("div",{onClick:$t,style:{width:li,minHeight:ai,...ro(),display:"flex",flexDirection:"column",...j,position:"relative",overflowX:"hidden",overflowY:"auto",zoom:oo},children:[l.jsx("div",{style:{position:"absolute",top:-60,left:"50%",transform:"translateX(-50%)",width:320,height:320,borderRadius:"50%",background:`radial-gradient(ellipse, ${a.accent}0D 0%, transparent 70%)`,pointerEvents:"none",zIndex:0}}),l.jsx("div",{style:{position:"absolute",bottom:40,right:-60,width:200,height:200,borderRadius:"50%",background:`radial-gradient(ellipse, ${a.accent}07 0%, transparent 70%)`,pointerEvents:"none",zIndex:0}}),l.jsxs("div",{style:{padding:"13px 16px 11px",borderBottom:`1px solid ${a.border}`,display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",zIndex:1},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:9},children:[l.jsx("img",{src:"../icons/icon48.png",alt:"Forge-OS",style:{width:24,height:24,objectFit:"contain",filter:"drop-shadow(0 0 8px rgba(57,221,182,0.55))"}}),l.jsxs("span",{style:{fontSize:14,fontWeight:700,letterSpacing:"0.1em"},children:[l.jsx("span",{style:{color:a.accent},children:"FORGE"}),l.jsx("span",{style:{color:a.text},children:"-OS"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("button",{onClick:Ve,title:"Click to switch network",style:{fontSize:9,color:ll,fontWeight:700,letterSpacing:"0.1em",background:`${ll}15`,border:`1px solid ${ll}35`,borderRadius:4,padding:"3px 8px",cursor:"pointer",...j},children:Ft[o]??o.toUpperCase()}),cn&&l.jsx("button",{onClick:ne,title:"Lock wallet",style:{background:"rgba(33,48,67,0.5)",border:`1px solid ${a.border}`,borderRadius:4,padding:"3px 8px",color:a.dim,fontSize:10,cursor:"pointer",...j},children:""})]})]}),Pt?l.jsxs("div",{style:{padding:"20px 16px 16px",borderBottom:`1px solid ${a.border}`,textAlign:"center",position:"relative",zIndex:1},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6,marginBottom:16},children:[l.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:a.ok,flexShrink:0,boxShadow:`0 0 6px ${a.ok}`}}),l.jsx("span",{style:{fontSize:10,color:a.dim,letterSpacing:"0.04em"},children:mi(Pt)}),l.jsx("button",{onClick:Ee,style:{...xe(m?a.ok:a.dim,!0),padding:"3px 8px",fontSize:9,letterSpacing:"0.08em",color:m?a.ok:a.dim,minWidth:56},children:m?"COPIED":"COPY"})]}),l.jsxs("div",{style:{marginBottom:6},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6,marginBottom:6},children:[l.jsx("span",{style:{fontSize:8,color:a.dim,letterSpacing:"0.1em"},children:"TOTAL PORTFOLIO VALUE"}),l.jsx("button",{onClick:vt,"aria-label":k?"Show portfolio balances":"Hide portfolio balances",title:k?"Show portfolio balances":"Hide portfolio balances",style:{...xe(k?a.warn:a.dim,!0),padding:"3px 0",fontSize:9,letterSpacing:"0.08em",color:k?a.warn:a.dim,minWidth:34,width:34,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:l.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",style:{flexShrink:0},children:[l.jsx("path",{d:"M1 6C1 6 2.8 3.4 6 3.4C9.2 3.4 11 6 11 6C11 6 9.2 8.6 6 8.6C2.8 8.6 1 6 1 6Z",stroke:"currentColor",strokeWidth:"1"}),l.jsx("circle",{cx:"6",cy:"6",r:"1.3",fill:"currentColor"}),k&&l.jsx("path",{d:"M1.3 1.3L10.7 10.7",stroke:"currentColor",strokeWidth:"1.2"})]})})]}),l.jsx("div",{style:{fontSize:38,fontWeight:700,color:a.text,letterSpacing:"0.005em",lineHeight:1},children:V})]}),l.jsx("div",{style:{display:"flex",gap:8,marginTop:16},children:[{label:"SEND",action:()=>{S("wallet"),x("send"),f(R=>R+1)}},{label:"RECEIVE",action:()=>{S("wallet"),x("receive"),f(R=>R+1)}},{label:"SWAP",action:()=>S("swap")}].map(R=>l.jsx("button",{onClick:R.action,style:{flex:1,background:`linear-gradient(145deg, ${a.accent}1A, rgba(8,13,20,0.7))`,border:`1px solid ${a.accent}40`,borderRadius:10,padding:"9px 0",color:a.accent,fontSize:10,fontWeight:700,cursor:"pointer",...j,letterSpacing:"0.1em",transition:"background 0.15s, border-color 0.15s"},children:R.label},R.label))})]}):l.jsxs("div",{style:{padding:"28px 16px",textAlign:"center",borderBottom:`1px solid ${a.border}`,position:"relative",zIndex:1},children:[l.jsx("div",{style:{fontSize:11,color:a.dim,marginBottom:12},children:"No wallet connected"}),l.jsx("button",{onClick:()=>chrome.tabs.create({url:"https://forge-os.xyz"}),style:{background:`linear-gradient(90deg, ${a.accent}, #7BE9CF)`,color:"#04110E",border:"none",borderRadius:10,padding:"10px 20px",fontSize:11,fontWeight:700,cursor:"pointer",...j,letterSpacing:"0.08em"},children:"OPEN FORGE-OS "})]}),l.jsx("div",{style:{display:"flex",borderBottom:`1px solid ${a.border}`,position:"relative",zIndex:1},children:["wallet","swap","agents","security"].map(R=>l.jsx("button",{onClick:()=>S(R),style:{flex:1,background:h===R?`${a.accent}08`:"none",border:"none",borderBottom:`2px solid ${h===R?a.accent:"transparent"}`,color:h===R?a.accent:a.dim,fontSize:10,fontWeight:700,cursor:"pointer",padding:"9px 0",letterSpacing:"0.1em",...j,textTransform:"uppercase",transition:"color 0.15s, border-color 0.15s, background 0.15s",boxShadow:h===R?`0 2px 12px ${a.accent}25`:"none"},children:R},R))}),l.jsxs("div",{style:{flex:1,overflow:"auto",position:"relative",zIndex:1},children:[h==="wallet"&&l.jsx(pv,{address:Pt,balance:s,usdPrice:c,network:o,mode:w,modeRequestId:E,onModeConsumed:()=>x(void 0),onBalanceInvalidated:()=>(n==null?void 0:n.address)&&ge(n.address,o),hideBalances:k}),h==="swap"&&l.jsx(yw,{}),h==="agents"&&l.jsx(Iv,{network:o}),h==="security"&&l.jsx(Cv,{address:Pt,network:o,isManagedWallet:cn,autoLockMinutes:p,persistUnlockSessionEnabled:v,onAutoLockMinutesChange:Yn,onPersistUnlockSessionChange:Jn,onLock:ne})]}),l.jsxs("div",{style:{padding:"7px 16px",borderTop:`1px solid ${a.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",zIndex:1},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[l.jsx("span",{style:{fontSize:8,color:a.muted,letterSpacing:"0.06em"},children:"FORGE-OS"}),l.jsxs("span",{style:{fontSize:8,color:sl,letterSpacing:"0.05em",fontWeight:700},children:[" ",qn]}),U&&l.jsxs("span",{style:{fontSize:8,color:a.dim,letterSpacing:"0.04em"},children:[" ",T1[o]??10," BPS  DAA ",(parseInt(U,10)/1e6).toFixed(1),"M"]}),l.jsxs("span",{style:{fontSize:8,color:a.dim,letterSpacing:"0.04em"},children:[" RPC ",Sg]}),l.jsxs("span",{style:{fontSize:8,color:a.dim,letterSpacing:"0.04em"},children:[" UPDATE ",dn]})]}),l.jsx("button",{onClick:()=>chrome.tabs.create({url:"https://forge-os.xyz"}),style:{background:"none",border:"none",color:a.accent,fontSize:8,cursor:"pointer",...j,letterSpacing:"0.06em"},children:"OPEN SITE "})]}),le&&l.jsx("div",{style:{padding:"0 16px 7px",fontSize:8,color:a.warn,letterSpacing:"0.03em",position:"relative",zIndex:1},children:le})]})}Km(document.getElementById("root")).render(l.jsx(A.StrictMode,{children:l.jsx(Fw,{})}));
