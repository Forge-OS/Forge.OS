import{r as y,j as e}from"./react-vendor-D4yGots9.js";import{T as a,A as p,m as i,a as s,C as l,L as x,e as f,g as A,h as C,b as F,E as T,i as L,d as R,j as b}from"./index-DRVK2X3x.js";import{R as z,B,C as k,X as N,Y as $,T as K,c as h}from"./recharts-vendor-DqQ-4nM4.js";import"./d3-render-vendor-RkpHolfk.js";import"./d3-scale-vendor-BynLqmir.js";function G({log:m,agentCapital:O}){const[g,j]=y.useState(typeof window<"u"?window.innerWidth:1200);y.useEffect(()=>{if(typeof window>"u")return;const t=()=>j(window.innerWidth);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const r=g<760,u=r?"repeat(2,1fr)":"repeat(4,1fr)",E=r?"82px 58px 1fr":"90px 60px 90px 90px 1fr",n=m.filter(t=>t.fee!=null),d=parseFloat(n.reduce((t,o)=>t+(o.fee||0),0).toFixed(4)),S=parseFloat((d*a).toFixed(4)),v=parseFloat((d*p).toFixed(4)),w=m.filter(t=>t.type==="EXEC").length,c=n.slice(0,10).reverse().map((t,o)=>({label:`#${o+1}`,treasury:parseFloat((t.fee*a).toFixed(4)),pool:parseFloat((t.fee*p).toFixed(4))}));return e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:s.text,fontWeight:700,...i,marginBottom:4},children:"Treasury & Fee Routing"}),e.jsxs("div",{style:{fontSize:12,color:s.dim,marginBottom:16},children:["All protocol fees split automatically: ",p*100,"% agent pool · ",a*100,"% treasury."]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:u,gap:10,marginBottom:14},children:[{l:"Total Fees Paid",v:`${d} KAS`,c:s.text},{l:"Treasury Collected",v:`${S} KAS`,c:s.warn},{l:"Agent Pool",v:`${v} KAS`,c:s.ok},{l:"Exec Cycles",v:w,c:s.dim}].map(t=>e.jsxs(l,{p:14,children:[e.jsx(x,{children:t.l}),e.jsx("div",{style:{fontSize:18,color:t.c,fontWeight:700,...i},children:t.v})]},t.l))}),e.jsxs(l,{p:18,style:{marginBottom:12},children:[e.jsx(x,{children:"Treasury Address"}),e.jsx("div",{style:{fontSize:12,color:s.accent,...i,wordBreak:"break-all",marginBottom:10},children:f}),e.jsxs("div",{style:{fontSize:11,color:s.dim,marginBottom:10,...i},children:["Treasury payout mode: ",C?"ON-CHAIN ENABLED":"LEDGER-ONLY"," · per execution payout ",A," KAS"]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx(F,{onClick:()=>{var t;return(t=navigator.clipboard)==null?void 0:t.writeText(f)},variant:"ghost",size:"sm",children:"COPY"}),e.jsx(T,{href:`${L}/addresses/${f}`,label:"VERIFY ON-CHAIN ↗"})]})]}),c.length>0&&e.jsxs(l,{p:18,style:{marginBottom:12},children:[e.jsxs(x,{children:["Fee Split History (last ",c.length," cycles)"]}),e.jsx(z,{width:"100%",height:120,children:e.jsxs(B,{data:c,margin:{top:4,right:4,left:-24,bottom:0},children:[e.jsx(k,{stroke:s.border,vertical:!1}),e.jsx(N,{dataKey:"label",tick:{fill:s.dim,fontSize:10,fontFamily:"Courier New"},tickLine:!1,axisLine:!1}),e.jsx($,{tick:{fill:s.dim,fontSize:10,fontFamily:"Courier New"},tickLine:!1,axisLine:!1,tickFormatter:t=>`${t}`}),e.jsx(K,{contentStyle:{background:s.s2,border:`1px solid ${s.border}`,borderRadius:4,...i,fontSize:11}}),e.jsx(h,{dataKey:"pool",fill:s.ok,radius:[2,2,0,0],name:"Agent Pool"}),e.jsx(h,{dataKey:"treasury",fill:s.warn,radius:[2,2,0,0],name:"Treasury"})]})})]}),e.jsxs(l,{p:0,children:[e.jsx("div",{style:{padding:"11px 16px",borderBottom:`1px solid ${s.border}`},children:e.jsx("span",{style:{fontSize:11,color:s.dim,...i},children:"FEE LEDGER — ALL ENTRIES"})}),n.slice(0,12).map((t,o)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:E,gap:8,padding:"8px 16px",borderBottom:`1px solid ${s.border}`,alignItems:"center"},children:[e.jsx("span",{style:{fontSize:11,color:s.dim,...i},children:R(t.ts)}),e.jsx("span",{style:{fontSize:11,color:b[t.type],...i,fontWeight:700},children:t.type}),!r&&e.jsxs("span",{style:{fontSize:12,color:s.text,...i},children:[t.fee," KAS"]}),!r&&e.jsxs("span",{style:{fontSize:11,color:s.warn,...i},children:[(t.fee*a).toFixed(4)," → tsy"]}),e.jsx("span",{style:{fontSize:11,color:s.dim,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.msg})]},o))]})]})}export{G as TreasuryPanel};
