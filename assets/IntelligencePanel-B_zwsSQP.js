import{r as w,j as t}from"./react-vendor-D4yGots9.js";import{a as e,m as n,b as I,C as p,B as l,d as S,L as g}from"./index-DRVK2X3x.js";function L({decisions:x,loading:m,onRun:k}){var h;const[C,v]=w.useState(typeof window<"u"?window.innerWidth:1200);w.useEffect(()=>{if(typeof window>"u")return;const r=()=>v(window.innerWidth);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const s=C<760,b=s?"repeat(2,1fr)":"repeat(4,1fr)",E=s?"78px 108px 1fr":"90px 120px 80px 80px 1fr",c=x[0],i=c==null?void 0:c.dec,_=(i==null?void 0:i.action)==="ACCUMULATE"?e.ok:(i==null?void 0:i.action)==="REDUCE"?e.danger:(i==null?void 0:i.action)==="REBALANCE"?e.purple:e.warn,y=String((i==null?void 0:i.decision_source)||(c==null?void 0:c.source)||"ai"),z=y==="hybrid-ai"?e.accent:y==="quant-core"?e.text:y==="fallback"?e.warn:e.ok,o=(i==null?void 0:i.quant_metrics)||null,f=r=>r==null||r===""?"—":typeof r=="number"?Number.isFinite(r)?Math.abs(r)>=1e3?String(Math.round(r)):String(r):"—":typeof r=="boolean"?r?"yes":"no":String(r);return t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",flexDirection:s?"column":"row",justifyContent:"space-between",alignItems:s?"flex-start":"center",marginBottom:16,gap:s?8:0},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:13,color:e.text,fontWeight:700,...n},children:"Quant Intelligence Layer"}),t.jsx("div",{style:{fontSize:11,color:e.dim},children:"Deterministic quant core + AI risk overlay · Kelly sizing · regime detection · execution guardrails"})]}),t.jsx(I,{onClick:k,disabled:m,children:m?"PROCESSING...":"RUN QUANT CYCLE"})]}),m&&t.jsxs(p,{p:24,style:{textAlign:"center",marginBottom:12},children:[t.jsx("div",{style:{fontSize:12,color:e.dim,...n,marginBottom:6},children:"Running quant engine..."}),t.jsx("div",{style:{fontSize:11,color:e.dim},children:"Kaspa on-chain data → Kelly sizing → Monte Carlo → Decision"})]}),!i&&!m&&t.jsxs(p,{p:40,style:{textAlign:"center",marginBottom:12},children:[t.jsx("div",{style:{fontSize:13,color:e.dim,...n,marginBottom:6},children:"No intelligence output yet."}),t.jsx("div",{style:{fontSize:12,color:e.dim},children:"Run a quant cycle to generate a structured trade decision with Kelly sizing and Monte Carlo confidence."})]}),i&&t.jsxs(t.Fragment,{children:[t.jsxs(p,{p:18,style:{marginBottom:10,border:`1px solid ${_}25`},children:[t.jsxs("div",{style:{display:"flex",alignItems:s?"flex-start":"center",justifyContent:"space-between",flexDirection:s?"column":"row",gap:s?8:0,marginBottom:14},children:[t.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[t.jsx(l,{text:i.action,color:_}),t.jsx(l,{text:i.strategy_phase,color:e.purple}),t.jsx(l,{text:`SOURCE ${y.toUpperCase()}`,color:z}),(o==null?void 0:o.regime)&&t.jsx(l,{text:`REGIME ${String(o.regime).replace(/_/g," ")}`,color:e.accent}),t.jsx("span",{style:{fontSize:11,color:e.dim,...n},children:S(c.ts)})]}),t.jsxs("div",{style:{display:"flex",gap:8},children:[t.jsx(l,{text:`CONF ${i.confidence_score}`,color:i.confidence_score>=.8?e.ok:e.warn}),t.jsx(l,{text:`RISK ${i.risk_score}`,color:i.risk_score<=.4?e.ok:i.risk_score<=.7?e.warn:e.danger})]})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:b,gap:10,marginBottom:14},children:[["Kelly Fraction",`${(i.kelly_fraction*100).toFixed(1)}%`,e.accent],["Monte Carlo Win",`${i.monte_carlo_win_pct}%`,e.ok],["Capital Alloc",`${i.capital_allocation_kas} KAS`,e.text],["Expected Value",`+${i.expected_value_pct}%`,e.ok],["Stop Loss",`-${i.stop_loss_pct}%`,e.danger],["Take Profit",`+${i.take_profit_pct}%`,e.ok],["Volatility",i.volatility_estimate,i.volatility_estimate==="HIGH"?e.danger:i.volatility_estimate==="MEDIUM"?e.warn:e.ok],["Liquidity Impact",i.liquidity_impact,i.liquidity_impact==="SIGNIFICANT"?e.danger:e.dim],["Engine Latency",`${i.engine_latency_ms||0} ms`,(i.engine_latency_ms||0)<=2500?e.ok:e.warn],["Data Quality",(o==null?void 0:o.data_quality_score)??"—",((o==null?void 0:o.data_quality_score)??0)>=.75?e.ok:e.warn]].map(([r,a,u])=>t.jsxs("div",{style:{background:e.s2,borderRadius:4,padding:"10px 12px"},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...n,letterSpacing:"0.06em",marginBottom:4},children:r}),t.jsx("div",{style:{fontSize:13,color:u,fontWeight:700,...n},children:a})]},r))}),t.jsxs("div",{style:{background:e.s2,borderRadius:4,padding:"10px 14px",marginBottom:12},children:[t.jsx(g,{children:"Decision Rationale"}),t.jsx("div",{style:{fontSize:13,color:e.text,lineHeight:1.5},children:i.rationale}),i.decision_source_detail&&t.jsxs("div",{style:{fontSize:11,color:e.dim,marginTop:8,...n},children:["source detail: ",i.decision_source_detail]})]}),((h=i.risk_factors)==null?void 0:h.length)>0&&t.jsxs("div",{style:{marginBottom:12},children:[t.jsx(g,{children:"Risk Factors"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:i.risk_factors.map((r,a)=>t.jsx(l,{text:r,color:e.warn},a))})]}),t.jsxs("div",{style:{background:e.aLow,borderRadius:4,padding:"10px 14px"},children:[t.jsx(g,{color:e.accent,children:"Next Review Trigger"}),t.jsx("div",{style:{fontSize:12,color:e.text},children:i.next_review_trigger})]})]}),o&&t.jsxs(p,{p:18,style:{marginBottom:10},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,gap:8,flexWrap:"wrap"},children:[t.jsx(g,{children:"Quant Core Diagnostics"}),t.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[t.jsx(l,{text:`SAMPLES ${f(o.sample_count)}`,color:e.dim}),t.jsx(l,{text:`EDGE ${f(o.edge_score)}`,color:(Number(o.edge_score)||0)>0?e.ok:e.warn}),o.ai_overlay_applied&&t.jsx(l,{text:"AI OVERLAY APPLIED",color:e.accent})]})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"1fr 1fr",gap:8},children:[["Risk Profile",o.risk_profile],["Risk Ceiling",o.risk_ceiling],["Kelly Cap",o.kelly_cap],["Price USD",o.price_usd],["1-step Return %",o.price_return_1_pct],["5-step Return %",o.price_return_5_pct],["20-step Return %",o.price_return_20_pct],["Momentum Z",o.momentum_z],["EWMA Volatility",o.ewma_volatility],["DAA Velocity",o.daa_velocity],["DAA Slope",o.daa_slope],["Drawdown %",o.drawdown_pct],["Model Win Prob",o.win_probability_model],["Exposure Cap %",o.exposure_cap_pct]].map(([r,a])=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,background:e.s2,borderRadius:4,padding:"9px 12px"},children:[t.jsx("span",{style:{fontSize:11,color:e.dim,...n},children:r}),t.jsx("span",{style:{fontSize:11,color:e.text,...n},children:f(a)})]},String(r)))})]}),x.length>1&&t.jsxs(p,{p:0,children:[t.jsx("div",{style:{padding:"11px 16px",borderBottom:`1px solid ${e.border}`},children:t.jsxs("span",{style:{fontSize:11,color:e.dim,...n},children:["DECISION HISTORY — ",x.length," records"]})}),x.slice(1).map((r,a)=>{var j;const u=r.dec.action==="ACCUMULATE"?e.ok:r.dec.action==="REDUCE"?e.danger:e.warn,d=String(((j=r==null?void 0:r.dec)==null?void 0:j.decision_source)||(r==null?void 0:r.source)||"ai"),R=d==="hybrid-ai"?"HYB":d==="quant-core"?"Q":d==="fallback"?"F":"AI",A=d==="hybrid-ai"?e.accent:d==="quant-core"?e.text:d==="fallback"?e.warn:e.ok;return t.jsxs("div",{style:{display:"grid",gridTemplateColumns:E,gap:10,padding:"9px 16px",borderBottom:`1px solid ${e.border}`,alignItems:"center"},children:[t.jsx("span",{style:{fontSize:11,color:e.dim,...n},children:S(r.ts)}),t.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[t.jsx(l,{text:r.dec.action,color:u}),!s&&t.jsx(l,{text:R,color:A})]}),!s&&t.jsxs("span",{style:{fontSize:12,color:e.text,...n},children:[r.dec.capital_allocation_kas," KAS"]}),!s&&t.jsxs("span",{style:{fontSize:12,color:r.dec.confidence_score>=.8?e.ok:e.warn,...n},children:["c:",r.dec.confidence_score]}),t.jsx("span",{style:{fontSize:11,color:e.dim,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.dec.rationale})]},a)})]})]})]})}export{L as IntelligencePanel};
