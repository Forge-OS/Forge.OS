import{j as t}from"./react-vendor-D4yGots9.js";import{m as l,a as i,C as p,B as f,L as S}from"./index-DRVK2X3x.js";function N({summary:e}){const b=Array.isArray(e==null?void 0:e.rows)?e.rows:[],c=Number(((e==null?void 0:e.netPnlKas)??(e==null?void 0:e.estimatedNetPnlKas))||0),x=String((e==null?void 0:e.netPnlMode)||"estimated"),h=Number((e==null?void 0:e.signalQualityScore)||0),g=Number((e==null?void 0:e.timingAlphaPct)||0);return t.jsxs("div",{children:[t.jsxs("div",{style:{marginBottom:14},children:[t.jsxs("div",{style:{fontSize:13,color:i.text,fontWeight:700,...l},children:["PnL Attribution (",x==="hybrid"?"Hybrid":"Estimated",")"]}),t.jsx("div",{style:{fontSize:11,color:i.dim},children:x==="hybrid"?"Confirmed receipts use realized broadcastâ†’confirmation execution drift; remaining execution costs stay estimated.":"Attribution is estimated from quant expected value, queue execution outcomes, fee logs, liquidity buckets, and market snapshots."})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(180px,1fr))",gap:10,marginBottom:12},children:[[x==="hybrid"?"Net PnL (hybrid)":"Net PnL (est)",`${c>=0?"+":""}${c.toFixed(4)} KAS`,c>=0?i.ok:i.danger],["Fill Rate",`${Number((e==null?void 0:e.fillRatePct)||0).toFixed(1)}%`,Number((e==null?void 0:e.fillRatePct)||0)>=70?i.ok:i.warn],["Confirmed Receipts",`${Number((e==null?void 0:e.confirmedSignals)||0)}`,Number((e==null?void 0:e.confirmedSignals)||0)>0?i.ok:i.dim],["Receipt Coverage",`${Number((e==null?void 0:e.receiptCoveragePct)||0).toFixed(1)}%`,Number((e==null?void 0:e.receiptCoveragePct)||0)>=50?i.ok:i.warn],["Signal Quality",`${h.toFixed(3)}`,h>=.65?i.ok:i.warn],["Timing Alpha",`${g>=0?"+":""}${g.toFixed(3)}%`,g>=0?i.ok:i.warn],["Avg Confidence",`${Number((e==null?void 0:e.avgSignalConfidence)||0).toFixed(3)}`,i.text],["Avg EV",`${Number((e==null?void 0:e.avgExpectedValuePct)||0).toFixed(3)}%`,i.text],["Missed Fill",`${Number((e==null?void 0:e.missedFillKas)||0).toFixed(4)} KAS`,Number((e==null?void 0:e.missedFillKas)||0)>0?i.warn:i.ok],["Timing Wins",`${Number((e==null?void 0:e.timingWins)||0)}/${Number((e==null?void 0:e.timingSamples)||0)}`,i.dim]].map(([n,d,o])=>t.jsxs(p,{p:12,children:[t.jsx("div",{style:{fontSize:10,color:i.dim,...l,marginBottom:4},children:n}),t.jsx("div",{style:{fontSize:13,color:o,fontWeight:700,...l},children:d})]},String(n)))}),t.jsxs(p,{p:0,style:{marginBottom:12},children:[t.jsx("div",{style:{padding:"11px 16px",borderBottom:`1px solid ${i.border}`},children:t.jsx("span",{style:{fontSize:11,color:i.dim,...l},children:"ATTRIBUTION BREAKDOWN"})}),b.length===0&&t.jsx("div",{style:{padding:16,fontSize:12,color:i.dim},children:"Run more cycles to build attribution history."}),b.map(n=>{const d=Number((n==null?void 0:n.value)||0),o=d>=0?i.ok:i.danger;return t.jsxs("div",{style:{padding:"10px 16px",borderBottom:`1px solid ${i.border}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,alignItems:"center",marginBottom:4},children:[t.jsx("div",{style:{fontSize:12,color:i.text,...l},children:n==null?void 0:n.label}),t.jsx(f,{text:`${d>=0?"+":""}${d.toFixed(4)}${String((n==null?void 0:n.label)||"").includes("Alpha")?"%":" KAS"}`,color:o})]}),(n==null?void 0:n.hint)&&t.jsx("div",{style:{fontSize:11,color:i.dim},children:n.hint})]},String(n==null?void 0:n.label))})]}),t.jsxs(p,{p:14,children:[t.jsx(S,{children:"Execution Funnel"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(180px,1fr))",gap:8},children:[["Actionable Signals",(e==null?void 0:e.actionableSignals)??0,i.text],["Executed",(e==null?void 0:e.executedSignals)??0,i.ok],["Pending",(e==null?void 0:e.pendingSignals)??0,i.warn],["Rejected",(e==null?void 0:e.rejectedSignals)??0,i.danger]].map(([n,d,o])=>t.jsxs("div",{style:{background:i.s2,borderRadius:6,padding:"9px 12px"},children:[t.jsx("div",{style:{fontSize:10,color:i.dim,...l,marginBottom:3},children:n}),t.jsx("div",{style:{fontSize:13,color:o,fontWeight:700,...l},children:d})]},String(n)))})]})]})}export{N as PnlAttributionPanel};
